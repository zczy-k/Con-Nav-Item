<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹¦ç­¾ç®¡ç†å™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f5f5; min-height: 100vh; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        /* å¤´éƒ¨ */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 24px; display: flex; align-items: center; gap: 10px; }
        .header-stats { display: flex; gap: 16px; font-size: 14px; }
        .stat-item { background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 20px; }
        
        /* å·¥å…·æ  */
        .toolbar { background: white; padding: 12px 16px; border-radius: 12px; margin-bottom: 20px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .search-input { flex: 1; min-width: 200px; padding: 10px 16px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 14px; }
        .search-input:focus { outline: none; border-color: #667eea; }
        .btn { padding: 8px 14px; border: none; border-radius: 8px; font-size: 13px; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(102,126,234,0.4); }
        .btn-secondary { background: #f0f0f0; color: #333; }
        .btn-secondary:hover { background: #e0e0e0; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        .btn-small { padding: 4px 8px; font-size: 12px; }
        
        /* ä¸»å†…å®¹åŒº - åŒæ å¸ƒå±€ */
        .main-layout { display: flex; gap: 20px; min-height: 600px; }
        
        /* å·¦ä¾§æ–‡ä»¶å¤¹æ ‘ */
        .folder-panel { width: 280px; flex-shrink: 0; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .folder-panel-header { padding: 16px; border-bottom: 1px solid #f0f0f0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center; }
        .folder-tree { flex: 1; overflow-y: auto; padding: 8px; }
        .folder-item { padding: 8px 12px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-bottom: 2px; transition: all 0.2s; }
        .folder-item:hover { background: #f5f5f5; }
        .folder-item.active { background: #eff6ff; color: #3b82f6; }
        .folder-item.drag-over { background: #dbeafe; border: 2px dashed #3b82f6; }
        .folder-item .folder-icon { font-size: 14px; }
        .folder-item .folder-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 14px; }
        .folder-item .folder-count { font-size: 12px; color: #999; }
        .folder-item .folder-actions { display: flex; gap: 4px; }
        .folder-item.dragging { opacity: 0.5; }
        .btn-icon { background: none; border: none; cursor: pointer; padding: 2px 4px; font-size: 12px; border-radius: 4px; transition: background 0.2s; }
        .btn-icon:hover { background: rgba(0,0,0,0.1); }
        
        /* æ ‡ç­¾ */
        .tag { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; background: #eff6ff; color: #3b82f6; border-radius: 12px; font-size: 12px; cursor: pointer; transition: all 0.2s; border: 1px solid transparent; }
        .tag:hover { background: #dbeafe; transform: translateY(-1px); }
        .tag.active { background: #3b82f6; color: white; border-color: #2563eb; }
        .tag-remove { margin-left: 2px; cursor: pointer; opacity: 0.7; }
        .tag-remove:hover { opacity: 1; }
        .bookmark-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 4px; }
        .bookmark-tag { padding: 2px 6px; background: #f0f0f0; color: #666; border-radius: 8px; font-size: 11px; }
        .add-tag-btn { padding: 2px 6px; background: #e0e0e0; color: #999; border-radius: 8px; font-size: 11px; cursor: pointer; border: 1px dashed #ccc; }
        .add-tag-btn:hover { background: #d0d0d0; color: #666; }
        .folder-indent-1 { padding-left: 24px; }
        .folder-indent-2 { padding-left: 40px; }
        .folder-indent-3 { padding-left: 56px; }
        
        /* å³ä¾§ä¹¦ç­¾åˆ—è¡¨ */
        .bookmark-panel { flex: 1; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .bookmark-panel-header { padding: 16px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; }
        .bookmark-panel-title { font-weight: 600; color: #333; }
        .bookmark-panel-actions { display: flex; gap: 8px; }
        .bookmark-list { flex: 1; overflow-y: auto; padding: 8px; }
        
        /* ä¹¦ç­¾é¡¹ */
        .bookmark-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 8px; margin-bottom: 4px; transition: all 0.2s; cursor: grab; border: 1px solid transparent; }
        .bookmark-item:hover { background: #f9fafb; }
        .bookmark-item.selected { background: #eff6ff; border-color: #bfdbfe; }
        .bookmark-item.dragging { opacity: 0.5; }
        .bookmark-checkbox { width: 18px; height: 18px; cursor: pointer; }
        .bookmark-favicon { width: 20px; height: 20px; flex-shrink: 0; }
        .bookmark-info { flex: 1; min-width: 0; }
        .bookmark-title { font-size: 14px; color: #333; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .bookmark-title a { color: inherit; text-decoration: none; }
        .bookmark-title a:hover { color: #667eea; }
        .bookmark-url { font-size: 12px; color: #999; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .bookmark-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 4px; }
        .bookmark-tag { display: inline-block; padding: 2px 8px; background: #e0e7ff; color: #4f46e5; border-radius: 10px; font-size: 11px; }
        .bookmark-note { font-size: 11px; color: #666; margin-top: 4px; font-style: italic; background: #fef3c7; padding: 2px 6px; border-radius: 4px; display: inline-block; }
        .bookmark-actions { display: none; gap: 4px; }
        .bookmark-item:hover .bookmark-actions { display: flex; }
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”– ä¹¦ç­¾ç®¡ç†å™¨</h1>
            <div class="header-stats">
                <div class="stat-item" id="totalBookmarks">ä¹¦ç­¾: 0</div>
                <div class="stat-item" id="totalFolders">æ–‡ä»¶å¤¹: 0</div>
            </div>
        </div>

        <div class="toolbar">
            <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” æœç´¢ä¹¦ç­¾ï¼ˆæ”¯æŒæ‹¼éŸ³é¦–å­—æ¯ï¼‰...">
            <select id="timelineFilter" style="padding: 8px 12px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 13px; cursor: pointer;">
                <option value="">ğŸ“… å…¨éƒ¨æ—¶é—´</option>
                <option value="today">ä»Šå¤©æ·»åŠ </option>
                <option value="week">æœ¬å‘¨æ·»åŠ </option>
                <option value="month">æœ¬æœˆæ·»åŠ </option>
                <option value="year">ä»Šå¹´æ·»åŠ </option>
            </select>
            <button class="btn btn-primary" id="btnNewFolder">ğŸ“ æ–°å»ºæ–‡ä»¶å¤¹</button>
            <button class="btn btn-secondary" id="btnFindDuplicates">ğŸ” æŸ¥æ‰¾é‡å¤</button>
            <button class="btn btn-secondary" id="btnCheckLinks">ğŸ”— æ£€æµ‹æ— æ•ˆé“¾æ¥</button>
            <button class="btn btn-secondary" id="btnAnalyzeUsage">ğŸ“Š ä½¿ç”¨åˆ†æ</button>
            <button class="btn btn-secondary" id="btnFindUnused">ğŸ“¦ é•¿æœŸæœªä½¿ç”¨</button>
            <button class="btn btn-secondary" id="btnStatistics">ğŸ“ˆ ç»Ÿè®¡é¢æ¿</button>
            <button class="btn btn-secondary" id="btnAutoTag">ğŸ·ï¸ è‡ªåŠ¨æ ‡ç­¾</button>
            <button class="btn btn-secondary" id="btnMergeFolders">ğŸ“‚ åˆå¹¶æ–‡ä»¶å¤¹</button>
            <button class="btn btn-secondary" id="btnFindEmptyFolders">ğŸ“­ ç©ºæ–‡ä»¶å¤¹</button>
            <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer; margin-left: auto;">
                <input type="checkbox" id="autoSortEnabled">
                <span>è‡ªåŠ¨æ’åº</span>
            </label>
            <button class="btn btn-primary" id="btnNavSettings" title="å¯¼èˆªé¡µè®¾ç½®">ğŸš€ å¯¼èˆªé¡µè®¾ç½®</button>
            <button class="btn btn-secondary" id="btnShowShortcuts" title="æŸ¥çœ‹å¿«æ·é”®">âŒ¨ï¸</button>
        </div>
        
        <!-- æ ‡ç­¾äº‘ -->
        <div id="tagCloud" style="background: white; padding: 12px 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="font-size: 14px; font-weight: 600; color: #333;">ğŸ·ï¸ æ ‡ç­¾</span>
                <button class="btn btn-small btn-secondary" id="btnClearTagFilter">æ¸…é™¤ç­›é€‰</button>
            </div>
            <div id="tagCloudContent" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
        </div>

        <!-- æ£€æµ‹é€‰é¡¹ -->
        <div class="check-options" id="checkOptions" style="display: none;">
            <div style="background: white; padding: 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <div style="font-weight: 500; margin-bottom: 12px; color: #333;">ğŸ”§ æ£€æµ‹é€‰é¡¹</div>
                <div style="display: flex; flex-wrap: wrap; gap: 16px; align-items: center;">
                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                        <input type="checkbox" id="ignorePrivateIp" checked>
                        <span style="font-size: 14px;">å¿½ç•¥å†…ç½‘/æœ¬åœ°åœ°å€</span>
                    </label>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 14px;">æ‰«æèŒƒå›´:</span>
                        <select id="scanFolderId" style="padding: 6px 12px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 14px;">
                            <option value="">å…¨éƒ¨ä¹¦ç­¾</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="btnStartCheck">å¼€å§‹æ£€æµ‹</button>
                    <button class="btn btn-secondary" id="btnCancelOptions">å–æ¶ˆ</button>
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-layout">
            <!-- å·¦ä¾§æ–‡ä»¶å¤¹æ ‘ -->
            <div class="folder-panel">
                <div class="folder-panel-header">
                    <span>ğŸ“ æ–‡ä»¶å¤¹</span>
                    <button class="btn btn-small btn-secondary" id="btnAddFolder">+</button>
                </div>
                <div class="folder-tree" id="folderTree"></div>
            </div>

            <!-- å³ä¾§ä¹¦ç­¾åˆ—è¡¨ -->
            <div class="bookmark-panel">
                <div class="bookmark-panel-header">
                    <div class="bookmark-panel-title" id="currentFolderName">å…¨éƒ¨ä¹¦ç­¾</div>
                    <div class="bookmark-panel-actions">
                        <select id="sortOrder" style="padding: 4px 8px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 12px;">
                            <option value="frequency">æŒ‰ä½¿ç”¨é¢‘ç‡</option>
                            <option value="name">æŒ‰åç§°</option>
                            <option value="date">æŒ‰æ·»åŠ æ—¶é—´</option>
                        </select>
                        <label style="display: flex; align-items: center; gap: 4px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" id="selectAllBookmarks">
                            <span>å…¨é€‰</span>
                        </label>
                        <button class="btn btn-small btn-secondary" id="btnBatchMove" style="display: none;">ç§»åŠ¨</button>
                        <button class="btn btn-small btn-secondary" id="btnBatchRename" style="display: none;">é‡å‘½å</button>
                        <button class="btn btn-small btn-primary" id="btnQuickAddToNav" style="display: none;" title="å¿«é€Ÿæ·»åŠ åˆ°ä¸Šæ¬¡é€‰æ‹©çš„åˆ†ç±»">âš¡ å¿«é€Ÿæ·»åŠ </button>
                        <button class="btn btn-small btn-secondary" id="btnAddToNav" style="display: none;" title="é€‰æ‹©åˆ†ç±»åæ·»åŠ ">ğŸš€ æ·»åŠ åˆ°å¯¼èˆªé¡µ</button>
                        <button class="btn btn-small btn-danger" id="btnDeleteSelected" style="display: none;">åˆ é™¤</button>
                        <button class="btn btn-small btn-secondary" id="btnAddBookmark">+ æ·»åŠ </button>
                    </div>
                </div>
                <div class="bookmark-list" id="bookmarkList"></div>
            </div>
        </div>
    </div>

    <script src="bookmarks.js"></script>
</body>
</html>
<style
>
        /* å¼¹çª— */
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 12px; width: 90%; max-width: 500px; max-height: 80vh; overflow: hidden; display: flex; flex-direction: column; }
        .modal-large { max-width: 800px; }
        .modal-header { padding: 16px 20px; border-bottom: 1px solid #e0e0e0; display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { font-size: 18px; color: #333; }
        .modal-close { background: none; border: none; font-size: 24px; cursor: pointer; color: #999; }
        .modal-close:hover { color: #333; }
        .modal-body { padding: 20px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 16px 20px; border-top: 1px solid #e0e0e0; display: flex; justify-content: space-between; align-items: center; gap: 12px; }
        .modal-footer-left { display: flex; gap: 8px; align-items: center; }
        .modal-footer-right { display: flex; gap: 8px; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 500; color: #333; }
        .form-group input, .form-group select { width: 100%; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 14px; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #667eea; }
        
        /* ç»“æœåˆ—è¡¨ */
        .result-list { max-height: 400px; overflow-y: auto; }
        .result-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-bottom: 1px solid #f0f0f0; }
        .result-item:last-child { border-bottom: none; }
        .result-checkbox { width: 18px; height: 18px; cursor: pointer; }
        .result-info { flex: 1; min-width: 0; }
        .result-title { font-weight: 500; color: #333; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .result-url { font-size: 12px; color: #999; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .result-status { font-size: 12px; padding: 4px 8px; border-radius: 4px; white-space: nowrap; }
        .status-error { background: #fee2e2; color: #dc2626; }
        .status-duplicate { background: #fef3c7; color: #d97706; }
        .status-ok { background: #d1fae5; color: #059669; }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state { text-align: center; padding: 60px 20px; color: #999; }
        .empty-state-icon { font-size: 48px; margin-bottom: 16px; }
        .loading { text-align: center; padding: 40px; color: #666; }
        
        /* æ‹–æ‹½æç¤º */
        .drag-hint { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 12px 24px; border-radius: 8px; font-size: 14px; display: none; z-index: 100; }
        .drag-hint.active { display: block; }
        
        /* å³é”®èœå• */
        .context-menu { position: fixed; background: white; border-radius: 8px; box-shadow: 0 4px 16px rgba(0,0,0,0.15); padding: 4px 0; min-width: 180px; z-index: 1001; display: none; }
        .context-menu.active { display: block; }
        .context-menu-item { padding: 10px 16px; cursor: pointer; font-size: 14px; color: #333; display: flex; align-items: center; gap: 8px; transition: background 0.2s; }
        .context-menu-item:hover { background: #f5f5f5; }
        .context-menu-item.danger { color: #dc2626; }
        .context-menu-item.danger:hover { background: #fee2e2; }
        .context-menu-divider { height: 1px; background: #e0e0e0; margin: 4px 0; }
    </style>

    <!-- ç¼–è¾‘å¼¹çª— -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ç¼–è¾‘ä¹¦ç­¾</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>åç§°</label>
                    <input type="text" id="editName" placeholder="è¾“å…¥åç§°">
                </div>
                <div class="form-group" id="urlGroup">
                    <label>ç½‘å€</label>
                    <input type="text" id="editUrl" placeholder="è¾“å…¥ç½‘å€">
                </div>
            </div>
            <div class="modal-footer">
                <div></div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelEdit">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnSaveEdit">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç»“æœå¼¹çª— -->
    <div class="modal" id="resultModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="resultTitle">ç»“æœ</h3>
                <button class="modal-close" id="resultClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="result-list" id="resultList"></div>
            </div>
            <div class="modal-footer">
                <div class="modal-footer-left">
                    <label style="display: flex; align-items: center; gap: 4px; font-size: 13px; cursor: pointer;">
                        <input type="checkbox" id="resultSelectAll">
                        <span>å…¨é€‰</span>
                    </label>
                    <span id="resultSelectedCount" style="font-size: 13px; color: #666;"></span>
                </div>
                <div class="modal-footer-right">
                    <button class="btn btn-danger" id="btnDeleteSelectedResults" style="display: none;">åˆ é™¤é€‰ä¸­</button>
                    <button class="btn btn-secondary" id="btnCloseResult">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ‰¹é‡ç§»åŠ¨å¼¹çª— -->
    <div class="modal" id="batchMoveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ‰¹é‡ç§»åŠ¨ä¹¦ç­¾</h3>
                <button class="modal-close" id="batchMoveClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>é€‰æ‹©ç›®æ ‡æ–‡ä»¶å¤¹</label>
                    <select id="batchMoveTarget" style="width: 100%; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 14px;"></select>
                </div>
                <p style="font-size: 13px; color: #666;" id="batchMoveCount">å°†ç§»åŠ¨ 0 ä¸ªä¹¦ç­¾</p>
            </div>
            <div class="modal-footer">
                <div></div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelBatchMove">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnConfirmBatchMove">ç¡®è®¤ç§»åŠ¨</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ‰¹é‡é‡å‘½åå¼¹çª— -->
    <div class="modal" id="batchRenameModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ‰¹é‡é‡å‘½å</h3>
                <button class="modal-close" id="batchRenameClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>é‡å‘½åè§„åˆ™</label>
                    <select id="renameRule" style="width: 100%; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 14px; margin-bottom: 12px;">
                        <option value="prefix">æ·»åŠ å‰ç¼€</option>
                        <option value="suffix">æ·»åŠ åç¼€</option>
                        <option value="replace">æŸ¥æ‰¾æ›¿æ¢</option>
                        <option value="remove">ç§»é™¤æ–‡å­—</option>
                    </select>
                </div>
                <div class="form-group" id="renameInput1Group">
                    <label id="renameInput1Label">å‰ç¼€å†…å®¹</label>
                    <input type="text" id="renameInput1" placeholder="è¾“å…¥å†…å®¹">
                </div>
                <div class="form-group" id="renameInput2Group" style="display: none;">
                    <label>æ›¿æ¢ä¸º</label>
                    <input type="text" id="renameInput2" placeholder="æ›¿æ¢å†…å®¹">
                </div>
                <p style="font-size: 13px; color: #666;" id="batchRenameCount">å°†é‡å‘½å 0 ä¸ªä¹¦ç­¾</p>
            </div>
            <div class="modal-footer">
                <div></div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelBatchRename">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnConfirmBatchRename">ç¡®è®¤é‡å‘½å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ‹–æ‹½æç¤º -->
    <div class="drag-hint" id="dragHint">æ‹–æ‹½åˆ°å·¦ä¾§æ–‡ä»¶å¤¹ä»¥ç§»åŠ¨ä¹¦ç­¾</div>

    <!-- æ·»åŠ åˆ°å¯¼èˆªé¡µå¼¹çª— -->
    <div class="modal" id="addToNavModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>ğŸš€ æ·»åŠ åˆ°å¯¼èˆªé¡µ</h3>
                <button class="modal-close" id="addToNavClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>å¯¼èˆªç«™åœ°å€</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="navServerUrl" placeholder="ä¾‹å¦‚: http://localhost:3000" style="flex: 1;">
                        <button class="btn btn-secondary" id="btnLoadMenus">åŠ è½½åˆ†ç±»</button>
                    </div>
                    <div style="font-size: 12px; color: #999; margin-top: 4px;">è¯·è¾“å…¥æ‚¨çš„å¯¼èˆªç«™æœåŠ¡å™¨åœ°å€</div>
                </div>
                <div class="form-group">
                    <label>é€‰æ‹©åˆ†ç±»ï¼ˆèœå•ï¼‰</label>
                    <div style="display: flex; gap: 8px;">
                        <select id="navMenuSelect" style="flex: 1; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                            <option value="">-- è¯·å…ˆåŠ è½½åˆ†ç±» --</option>
                        </select>
                        <button class="btn btn-secondary" id="btnAddMenu">+ æ–°å»º</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>é€‰æ‹©å­åˆ†ç±»ï¼ˆå¯é€‰ï¼‰</label>
                    <div style="display: flex; gap: 8px;">
                        <select id="navSubMenuSelect" style="flex: 1; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                            <option value="">-- ä¸ä½¿ç”¨å­åˆ†ç±» --</option>
                        </select>
                        <button class="btn btn-secondary" id="btnAddSubMenu">+ æ–°å»º</button>
                    </div>
                </div>
                <div style="margin-top: 16px;">
                    <label style="font-weight: 500; margin-bottom: 8px; display: block;">å¾…æ·»åŠ çš„ä¹¦ç­¾ (<span id="navBookmarkCount">0</span> ä¸ª)</label>
                    <div id="navBookmarkList" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px; padding: 8px;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-footer-left">
                    <span id="navAddStatus" style="font-size: 13px; color: #666;"></span>
                </div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelAddToNav">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnConfirmAddToNav">ç¡®è®¤æ·»åŠ </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªé¡µè®¾ç½®å¼¹çª— -->
    <div class="modal" id="navSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸš€ å¯¼èˆªé¡µè®¾ç½®</h3>
                <button class="modal-close" id="navSettingsClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>å¯¼èˆªç«™åœ°å€</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="navSettingsUrl" placeholder="ä¾‹å¦‚: http://localhost:3000" style="flex: 1;">
                        <button class="btn btn-secondary" id="btnTestConnection">æµ‹è¯•è¿æ¥</button>
                    </div>
                    <div id="connectionStatus" style="font-size: 12px; margin-top: 4px; color: #666;"></div>
                </div>
                <div class="form-group">
                    <label>é»˜è®¤å¿«é€Ÿæ·»åŠ åˆ†ç±»</label>
                    <div style="display: flex; gap: 8px;">
                        <select id="defaultMenuSelect" style="flex: 1; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                            <option value="">-- è¯·å…ˆæµ‹è¯•è¿æ¥ --</option>
                        </select>
                        <button class="btn btn-secondary" id="btnNewMenuFromSettings">+ æ–°å»º</button>
                        <button class="btn btn-danger btn-small" id="btnDeleteMenuFromSettings" title="åˆ é™¤åˆ†ç±»" style="padding: 8px 12px;">ğŸ—‘ï¸</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>é»˜è®¤å­åˆ†ç±»ï¼ˆå¯é€‰ï¼‰</label>
                    <div style="display: flex; gap: 8px;">
                        <select id="defaultSubMenuSelect" style="flex: 1; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                            <option value="">-- ä¸ä½¿ç”¨å­åˆ†ç±» --</option>
                        </select>
                        <button class="btn btn-secondary" id="btnNewSubMenuFromSettings">+ æ–°å»º</button>
                        <button class="btn btn-danger btn-small" id="btnDeleteSubMenuFromSettings" title="åˆ é™¤å­åˆ†ç±»" style="padding: 8px 12px;">ğŸ—‘ï¸</button>
                    </div>
                </div>
                <div style="background: #f0f7ff; border-radius: 8px; padding: 12px; margin-top: 16px;">
                    <div style="font-size: 13px; font-weight: 500; color: #1e40af; margin-bottom: 8px;">ğŸ’¡ ä½¿ç”¨è¯´æ˜</div>
                    <div style="font-size: 12px; color: #3b82f6; line-height: 1.6;">
                        â€¢ å³é”®ç‚¹å‡»ç½‘é¡µ â†’ å¿«é€Ÿæ·»åŠ åˆ°é»˜è®¤åˆ†ç±»<br>
                        â€¢ ç½‘é¡µå³ä¸‹è§’æµ®åŠ¨æŒ‰é’® â†’ ç‚¹å‡»å¿«é€Ÿæ·»åŠ <br>
                        â€¢ é€‰æ‹©ä¹¦ç­¾åç‚¹å‡»å·¥å…·æ æŒ‰é’®æ‰¹é‡æ·»åŠ 
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-footer-left">
                    <span id="navSettingsStatus" style="font-size: 13px; color: #666;"></span>
                </div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelNavSettings">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnSaveNavSettings">ä¿å­˜è®¾ç½®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ–°å»ºåˆ†ç±»å¼¹çª— -->
    <div class="modal" id="newMenuModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="newMenuTitle">æ–°å»ºåˆ†ç±»</h3>
                <button class="modal-close" id="newMenuClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>åˆ†ç±»åç§°</label>
                    <input type="text" id="newMenuName" placeholder="è¾“å…¥åˆ†ç±»åç§°">
                </div>
            </div>
            <div class="modal-footer">
                <div></div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelNewMenu">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnConfirmNewMenu">åˆ›å»º</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¹¦ç­¾å³é”®èœå• -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" id="ctxBatchMove">
            <span>ğŸ“</span>
            <span>æ‰¹é‡ç§»åŠ¨</span>
        </div>
        <div class="context-menu-item" id="ctxBatchRename">
            <span>âœï¸</span>
            <span>æ‰¹é‡é‡å‘½å</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" id="ctxBatchDelete">
            <span>ğŸ—‘ï¸</span>
            <span>æ‰¹é‡åˆ é™¤</span>
        </div>
    </div>

    <!-- æ–‡ä»¶å¤¹å³é”®èœå• -->
    <div class="context-menu" id="folderContextMenu">
        <div class="context-menu-item" id="ctxFolderToNav">
            <span>ğŸš€</span>
            <span>å¯¼å…¥åˆ°å¯¼èˆªé¡µ</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" id="ctxFolderEdit">
            <span>âœï¸</span>
            <span>é‡å‘½å</span>
        </div>
        <div class="context-menu-item danger" id="ctxFolderDelete">
            <span>ğŸ—‘ï¸</span>
            <span>åˆ é™¤æ–‡ä»¶å¤¹</span>
        </div>
    </div>

    <!-- å¯¼å…¥æ–‡ä»¶å¤¹åˆ°å¯¼èˆªé¡µå¼¹çª— -->
    <div class="modal" id="importFolderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸš€ å¯¼å…¥æ–‡ä»¶å¤¹åˆ°å¯¼èˆªé¡µ</h3>
                <button class="modal-close" id="importFolderClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>æ–‡ä»¶å¤¹åç§°</label>
                    <input type="text" id="importFolderName" readonly style="background: #f3f4f6;">
                </div>
                <div class="form-group">
                    <label>åŒ…å«ä¹¦ç­¾æ•°é‡</label>
                    <input type="text" id="importFolderCount" readonly style="background: #f3f4f6;">
                </div>
                <div class="form-group">
                    <label>å¯¼å…¥æ–¹å¼</label>
                    <select id="importFolderType" style="width: 100%; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                        <option value="menu">ä½œä¸ºæ–°çš„ä¸»åˆ†ç±»</option>
                        <option value="submenu">ä½œä¸ºå­åˆ†ç±»ï¼ˆéœ€é€‰æ‹©çˆ¶åˆ†ç±»ï¼‰</option>
                    </select>
                </div>
                <div class="form-group" id="parentMenuGroup" style="display: none;">
                    <label>é€‰æ‹©çˆ¶åˆ†ç±»</label>
                    <select id="importParentMenu" style="width: 100%; padding: 10px 12px; border: 1px solid #e0e0e0; border-radius: 8px;">
                        <option value="">-- è¯·é€‰æ‹© --</option>
                    </select>
                </div>
                <div style="background: #fef3c7; border-radius: 8px; padding: 12px; margin-top: 12px;">
                    <div style="font-size: 12px; color: #92400e;">
                        âš ï¸ å°†åˆ›å»ºåä¸º"<span id="importMenuName"></span>"çš„åˆ†ç±»ï¼Œå¹¶å¯¼å…¥è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¹¦ç­¾ä½œä¸ºå¡ç‰‡
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-footer-left">
                    <span id="importFolderStatus" style="font-size: 13px; color: #666;"></span>
                </div>
                <div class="modal-footer-right">
                    <button class="btn btn-secondary" id="btnCancelImportFolder">å–æ¶ˆ</button>
                    <button class="btn btn-primary" id="btnConfirmImportFolder">ç¡®è®¤å¯¼å…¥</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>