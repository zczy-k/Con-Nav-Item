var Ue=Object.defineProperty,Ae=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var _e=(H,n,v)=>n in H?Ue(H,n,{enumerable:!0,configurable:!0,writable:!0,value:v}):H[n]=v,pe=(H,n)=>{for(var v in n||(n={}))Ie.call(n,v)&&_e(H,v,n[v]);if(ye)for(var v of ye(n))Te.call(n,v)&&_e(H,v,n[v]);return H},be=(H,n)=>Ae(H,De(n));var x=(H,n,v)=>new Promise(($,M)=>{var T=o=>{try{V(v.next(o))}catch(p){M(p)}},S=o=>{try{V(v.throw(o))}catch(p){M(p)}},V=o=>o.done?$(o.value):Promise.resolve(o.value).then(T,S);V((v=v.apply(H,n)).next())});import{_ as Z,c as u,o as d,b as e,t as h,z as ne,r as b,g as se,d as P,w as _,v as D,l as he,F as J,a as G,j as oe,e as me,A as $e,B as we,q as F,x as ke,n as O,C as le,y as ge,p as ae,D as Se,i as Le,k as We,T as Ne,E as ze,G as Pe,H as He}from"./index-eGUwUZa2.js";import{g as xe,q as Fe,r as Oe,s as Ee,t as Re,w as je,x as qe,c as Ve,i as Je,u as Ce,n as Me,e as Ge,y as Ke,z as Qe,A as fe,B as Xe,C as Ye,D as Ze,E as et,a as tt,F as st,G as lt,H as at,b as ot,I as nt,J as it,K as dt,L as rt,M as ut,N as ct,O as vt}from"./urlNormalizer-Bsb4-Inz.js";const pt={class:"welcome-page"},mt={class:"welcome-title"},bt={class:"welcome-cards"},gt={class:"welcome-card"},ft={class:"welcome-value"},ht={class:"welcome-card"},wt={class:"welcome-value"},kt={__name:"WelcomePage",props:{lastLoginTime:String,lastLoginIp:String,currentUsername:String},setup(H){return(n,v)=>(d(),u("div",pt,[e("h2",mt,"æ¬¢è¿æ‚¨ï¼Œ"+h(H.currentUsername||"admin")+"ï¼",1),e("div",bt,[e("div",gt,[v[0]||(v[0]=ne('<div class="welcome-icon time-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-5cc4f846></path></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",ft,h(H.lastLoginTime||"--"),1)]),e("div",ht,[v[1]||(v[1]=ne('<div class="welcome-icon ip-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-5cc4f846></circle></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",wt,h(H.lastLoginIp||"--"),1)])])]))}},yt=Z(kt,[["__scopeId","data-v-5cc4f846"]]),_t={class:"menu-manage"},$t={key:0,class:"loading-overlay"},Ct={class:"menu-header"},Mt={class:"menu-add"},xt=["disabled"],Vt={class:"menu-content"},Bt={key:0,class:"empty-state"},Ut={class:"menu-card-header"},At={class:"menu-title"},Dt={class:"menu-name"},It={class:"menu-order"},Tt={class:"menu-actions"},St=["onClick"],Lt=["onClick"],Wt=["onClick"],Nt={key:0,class:"sub-menu-list"},zt={class:"sub-menu-name"},Pt={class:"sub-menu-order"},Ht={class:"sub-menu-actions"},Ft=["onClick"],Ot=["onClick"],Et={key:1,class:"no-sub-menu"},Rt={class:"modal"},jt={class:"modal-header"},qt={class:"modal-body"},Jt={class:"form-group"},Gt={class:"form-group"},Kt={class:"modal-footer"},Qt=["disabled"],Xt={class:"modal"},Yt={class:"modal-header"},Zt={class:"modal-body"},es={class:"form-group"},ts={class:"form-group"},ss={class:"modal-footer"},ls=["disabled"],as={class:"modal"},os={class:"modal-body"},ns={class:"form-group"},is={class:"form-group"},ds={class:"modal-footer"},rs=["disabled"],us={__name:"MenuManage",setup(H){const n=b([]),v=b(!1),$=b("åŠ è½½ä¸­..."),M=b(""),T=b(!1),S=b(null),V=b({name:"",order:0}),o=b(!1),p=b(null),a=b(""),s=b({name:"",order:0}),l=b(!1),i=b(null),c=b({name:"",order:0});se(()=>{k()});function k(){return x(this,null,function*(){var W,m;v.value=!0,$.value="åŠ è½½ä¸­...";try{const C=yield xe(!0);n.value=C.data||[]}catch(C){alert("åŠ è½½å¤±è´¥: "+(((m=(W=C.response)==null?void 0:W.data)==null?void 0:m.error)||C.message))}finally{v.value=!1}})}function B(){return x(this,null,function*(){var W,m;if(M.value.trim()){v.value=!0,$.value="æ·»åŠ ä¸­...";try{const C=n.value.length?Math.max(...n.value.map(z=>z.order||0)):0;yield Fe({name:M.value.trim(),order:C+1}),M.value="",yield k()}catch(C){alert("æ·»åŠ å¤±è´¥: "+(((m=(W=C.response)==null?void 0:W.data)==null?void 0:m.error)||C.message)),v.value=!1}}})}function L(W){S.value=W,V.value={name:W.name,order:W.order},T.value=!0}function w(){return x(this,null,function*(){var z,K;if(!V.value.name.trim()||!S.value)return;const W=S.value.id,m=V.value.name.trim(),C=V.value.order;q(),v.value=!0,$.value="ä¿å­˜ä¸­...";try{yield Re(W,{name:m,order:C}),yield k()}catch(A){alert("ä¿å­˜å¤±è´¥: "+(((K=(z=A.response)==null?void 0:z.data)==null?void 0:K.error)||A.message)),v.value=!1}})}function y(W){return x(this,null,function*(){var m,C;if(confirm(`ç¡®å®šåˆ é™¤ä¸»èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ï¼`)){v.value=!0,$.value="åˆ é™¤ä¸­...";try{yield Oe(W.id),yield k()}catch(z){alert("åˆ é™¤å¤±è´¥: "+(((C=(m=z.response)==null?void 0:m.data)==null?void 0:C.error)||z.message)),v.value=!1}}})}function X(W){p.value=W.id,a.value=W.name;const m=W.subMenus||[],C=m.length?Math.max(...m.map(z=>z.order||0)):0;s.value={name:"",order:C+1},o.value=!0}function R(){return x(this,null,function*(){var z,K;if(!s.value.name.trim()||!p.value)return;const W=p.value,m=s.value.name.trim(),C=s.value.order;q(),v.value=!0,$.value="æ·»åŠ ä¸­...";try{yield je(W,{name:m,order:C}),yield k()}catch(A){alert("æ·»åŠ å¤±è´¥: "+(((K=(z=A.response)==null?void 0:z.data)==null?void 0:K.error)||A.message)),v.value=!1}})}function j(W,m){i.value=m,c.value={name:m.name,order:m.order},l.value=!0}function U(){return x(this,null,function*(){var z,K;if(!c.value.name.trim()||!i.value)return;const W=i.value.id,m=c.value.name.trim(),C=c.value.order;q(),v.value=!0,$.value="ä¿å­˜ä¸­...";try{yield qe(W,{name:m,order:C}),yield k()}catch(A){alert("ä¿å­˜å¤±è´¥: "+(((K=(z=A.response)==null?void 0:z.data)==null?void 0:K.error)||A.message)),v.value=!1}})}function N(W){return x(this,null,function*(){var m,C;if(confirm(`ç¡®å®šåˆ é™¤å­èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å¡ç‰‡ï¼`)){v.value=!0,$.value="åˆ é™¤ä¸­...";try{yield Ee(W.id),yield k()}catch(z){alert("åˆ é™¤å¤±è´¥: "+(((C=(m=z.response)==null?void 0:m.data)==null?void 0:C.error)||z.message)),v.value=!1}}})}function q(){T.value=!1,o.value=!1,l.value=!1,S.value=null,i.value=null}return(W,m)=>(d(),u("div",_t,[v.value?(d(),u("div",$t,[m[7]||(m[7]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,h($.value),1)])):P("",!0),e("div",Ct,[m[8]||(m[8]=e("h2",{class:"page-title"},"æ ç›®ç®¡ç†",-1)),e("div",Mt,[_(e("input",{"onUpdate:modelValue":m[0]||(m[0]=C=>M.value=C),placeholder:"è¾“å…¥ä¸»èœå•åç§°",class:"input",onKeyup:he(B,["enter"])},null,544),[[D,M.value]]),e("button",{class:"btn btn-primary",onClick:B,disabled:v.value||!M.value.trim()}," + æ·»åŠ ä¸»èœå• ",8,xt)])]),e("div",Vt,[n.value.length===0?(d(),u("div",Bt,[...m[9]||(m[9]=[e("p",null,"æš‚æ— èœå•ï¼Œè¯·æ·»åŠ ç¬¬ä¸€ä¸ªä¸»èœå•",-1)])])):P("",!0),(d(!0),u(J,null,G(n.value,C=>(d(),u("div",{key:C.id,class:"menu-card"},[e("div",Ut,[e("div",At,[e("span",Dt,h(C.name),1),e("span",It,"æ’åº: "+h(C.order),1)]),e("div",Tt,[e("button",{class:"btn-icon btn-edit",onClick:z=>L(C),title:"ç¼–è¾‘"},[...m[10]||(m[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,St),e("button",{class:"btn-icon btn-add",onClick:z=>X(C),title:"æ·»åŠ å­èœå•"},[...m[11]||(m[11]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1)])],8,Lt),e("button",{class:"btn-icon btn-delete",onClick:z=>y(C),title:"åˆ é™¤"},[...m[12]||(m[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Wt)])]),C.subMenus&&C.subMenus.length>0?(d(),u("div",Nt,[(d(!0),u(J,null,G(C.subMenus,z=>(d(),u("div",{key:z.id,class:"sub-menu-item"},[e("span",zt,h(z.name),1),e("span",Pt,"æ’åº: "+h(z.order),1),e("div",Ht,[e("button",{class:"btn-icon-sm btn-edit",onClick:K=>j(C,z),title:"ç¼–è¾‘"},[...m[13]||(m[13]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Ft),e("button",{class:"btn-icon-sm btn-delete",onClick:K=>N(z),title:"åˆ é™¤"},[...m[14]||(m[14]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Ot)])]))),128))])):(d(),u("div",Et,[...m[15]||(m[15]=[e("span",null,"æš‚æ— å­èœå•",-1)])]))]))),128))]),T.value?(d(),u("div",{key:1,class:"modal-overlay",onClick:oe(q,["self"])},[e("div",Rt,[e("div",jt,[e("h3",null,h(S.value?"ç¼–è¾‘ä¸»èœå•":"æ·»åŠ å­èœå•"),1),e("button",{class:"modal-close",onClick:q},"Ã—")]),e("div",qt,[e("div",Jt,[m[16]||(m[16]=e("label",null,"åç§°",-1)),_(e("input",{"onUpdate:modelValue":m[1]||(m[1]=C=>V.value.name=C),type:"text",class:"input",placeholder:"è¯·è¾“å…¥åç§°"},null,512),[[D,V.value.name]])]),e("div",Gt,[m[17]||(m[17]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":m[2]||(m[2]=C=>V.value.order=C),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,V.value.order,void 0,{number:!0}]])])]),e("div",Kt,[e("button",{class:"btn btn-cancel",onClick:q},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:w,disabled:!V.value.name.trim()},"ä¿å­˜",8,Qt)])])])):P("",!0),o.value?(d(),u("div",{key:2,class:"modal-overlay",onClick:oe(q,["self"])},[e("div",Xt,[e("div",Yt,[e("h3",null,"æ·»åŠ å­èœå•åˆ°ã€Œ"+h(a.value)+"ã€",1),e("button",{class:"modal-close",onClick:q},"Ã—")]),e("div",Zt,[e("div",es,[m[18]||(m[18]=e("label",null,"å­èœå•åç§°",-1)),_(e("input",{"onUpdate:modelValue":m[3]||(m[3]=C=>s.value.name=C),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[D,s.value.name]])]),e("div",ts,[m[19]||(m[19]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":m[4]||(m[4]=C=>s.value.order=C),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,s.value.order,void 0,{number:!0}]])])]),e("div",ss,[e("button",{class:"btn btn-cancel",onClick:q},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:R,disabled:!s.value.name.trim()},"æ·»åŠ ",8,ls)])])])):P("",!0),l.value?(d(),u("div",{key:3,class:"modal-overlay",onClick:oe(q,["self"])},[e("div",as,[e("div",{class:"modal-header"},[m[20]||(m[20]=e("h3",null,"ç¼–è¾‘å­èœå•",-1)),e("button",{class:"modal-close",onClick:q},"Ã—")]),e("div",os,[e("div",ns,[m[21]||(m[21]=e("label",null,"å­èœå•åç§°",-1)),_(e("input",{"onUpdate:modelValue":m[5]||(m[5]=C=>c.value.name=C),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[D,c.value.name]])]),e("div",is,[m[22]||(m[22]=e("label",null,"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":m[6]||(m[6]=C=>c.value.order=C),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[D,c.value.order,void 0,{number:!0}]])])]),e("div",ds,[e("button",{class:"btn btn-cancel",onClick:q},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:U,disabled:!c.value.name.trim()},"ä¿å­˜",8,rs)])])])):P("",!0)]))}},cs=Z(us,[["__scopeId","data-v-b7f69d22"]]),vs={class:"card-manage"},ps={class:"card-header"},ms={class:"card-add"},bs=["value"],gs=["value"],fs={class:"card-card"},hs={class:"card-table"},ws=["onUpdate:modelValue","onBlur"],ks=["onUpdate:modelValue","onBlur"],ys=["onUpdate:modelValue","onBlur"],_s=["onUpdate:modelValue","onBlur"],$s=["onClick"],Cs={key:0,class:"selected-tags"},Ms={key:1,class:"tag-placeholder"},xs=["onUpdate:modelValue","onBlur"],Vs=["onClick"],Bs={class:"modal-body"},Us={key:0,class:"empty-tags"},As={key:1,class:"tag-options"},Ds=["checked","onChange"],Is={class:"modal-body"},Ts={class:"duplicate-comparison"},Ss={class:"card-info-box existing"},Ls={class:"card-details"},Ws={class:"detail-row"},Ns={class:"detail-value"},zs={class:"detail-row"},Ps={class:"detail-value url"},Hs={key:0,class:"detail-row"},Fs={class:"detail-value url"},Os={class:"card-info-box pending"},Es={class:"card-details"},Rs={class:"detail-row"},js={class:"detail-value"},qs={class:"detail-row"},Js={class:"detail-value url"},Gs={key:0,class:"detail-row"},Ks={class:"detail-value url"},Qs={__name:"CardManage",setup(H){const n=b([]),v=b([]),$=b(),M=b(""),T=b(""),S=b(""),V=b(""),o=b([]),p=b(!1),a=b(null),s=b([]),l=b(!1),i=b(null),c=b(null),k=me(()=>{if(!$.value)return[];const A=n.value.find(g=>g.id===$.value);return(A==null?void 0:A.subMenus)||[]});se(()=>x(null,null,function*(){const A=yield xe();n.value=A.data,n.value.length&&($.value=n.value[0].id,M.value="");const g=yield Ve();o.value=g.data})),$e($,()=>{M.value="",w()}),$e(M,w);function B(){M.value=""}function L(){w()}function w(){return x(this,null,function*(){if(!$.value)return;const A=yield Ge($.value,M.value||null);v.value=A.data})}function y(){return x(this,null,function*(){if(!T.value||!S.value)return;const A=v.value.find(g=>Je({title:T.value,url:S.value},g));A?(i.value=A,c.value={menu_id:$.value,sub_menu_id:M.value||null,title:T.value,url:S.value,logo_url:V.value},l.value=!0):yield W({menu_id:$.value,sub_menu_id:M.value||null,title:T.value,url:S.value,logo_url:V.value})})}function X(A){return x(this,null,function*(){yield Ce(A.id,{menu_id:$.value,sub_menu_id:M.value||null,title:A.title,url:A.url,logo_url:A.logo_url,desc:A.desc,order:A.order,tagIds:A.tags?A.tags.map(g=>g.id):[]}),w()})}function R(A){return x(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))return;const g=v.value.findIndex(te=>te.id===A);g>-1&&v.value.splice(g,1);try{yield Me(A)}catch(te){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",te),yield w()}})}function j(A){a.value=A,s.value=A.tags?A.tags.map(g=>g.id):[],p.value=!0}function U(){p.value=!1,a.value=null,s.value=[]}function N(A){const g=s.value.indexOf(A);g>-1?s.value.splice(g,1):s.value.push(A)}function q(){return x(this,null,function*(){a.value&&(yield Ce(a.value.id,{menu_id:a.value.menu_id,sub_menu_id:a.value.sub_menu_id,title:a.value.title,url:a.value.url,logo_url:a.value.logo_url,desc:a.value.desc,order:a.value.order,tagIds:s.value}),U(),w())})}function W(A){return x(this,null,function*(){yield Ke(A),T.value="",S.value="",V.value="",w()})}function m(){l.value=!1,i.value=null,c.value=null}function C(){m(),T.value="",S.value="",V.value=""}function z(){return x(this,null,function*(){!c.value||!i.value||(yield Me(i.value.id),yield W(c.value),m())})}function K(){c.value&&(T.value=c.value.title,S.value=c.value.url,V.value=c.value.logo_url||"",m(),alert("è¯·ä¿®æ”¹å¡ç‰‡ä¿¡æ¯åå†æ¬¡ç‚¹å‡»â€œæ·»åŠ å¡ç‰‡â€æŒ‰é’®"))}return(A,g)=>{var te,ie,de,Y,re,ue,ee,ce;return d(),u("div",vs,[e("div",ps,[g[9]||(g[9]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",ms,[_(e("select",{"onUpdate:modelValue":g[0]||(g[0]=I=>$.value=I),class:"input narrow",onChange:B},[(d(!0),u(J,null,G(n.value,I=>(d(),u("option",{value:I.id,key:I.id},h(I.name),9,bs))),128))],544),[[we,$.value]]),_(e("select",{"onUpdate:modelValue":g[1]||(g[1]=I=>M.value=I),class:"input narrow",onChange:L},[g[7]||(g[7]=e("option",{value:""},"ä¸»èœå•",-1)),(d(!0),u(J,null,G(k.value,I=>(d(),u("option",{value:I.id,key:I.id},h(I.name),9,gs))),128))],544),[[we,M.value]]),_(e("input",{"onUpdate:modelValue":g[2]||(g[2]=I=>T.value=I),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[D,T.value]]),_(e("input",{"onUpdate:modelValue":g[3]||(g[3]=I=>S.value=I),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[D,S.value]]),_(e("input",{"onUpdate:modelValue":g[4]||(g[4]=I=>V.value=I),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[D,V.value]]),e("button",{class:"btn",onClick:y},[...g[8]||(g[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),F(" æ·»åŠ å¡ç‰‡ ",-1)])])])]),e("div",fs,[e("table",hs,[g[11]||(g[11]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),u(J,null,G(v.value,I=>(d(),u("tr",{key:I.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.title=r,onBlur:r=>X(I),class:"table-input"},null,40,ws),[[D,I.title]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.url=r,onBlur:r=>X(I),class:"table-input"},null,40,ks),[[D,I.url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.logo_url=r,onBlur:r=>X(I),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ys),[[D,I.logo_url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.desc=r,onBlur:r=>X(I),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,_s),[[D,I.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:r=>j(I)},[I.tags&&I.tags.length>0?(d(),u("div",Cs,[(d(!0),u(J,null,G(I.tags,r=>(d(),u("span",{key:r.id,class:"mini-tag",style:ke({backgroundColor:r.color})},h(r.name),5))),128))])):(d(),u("span",Ms,"é€‰æ‹©æ ‡ç­¾"))],8,$s)]),e("td",null,[_(e("input",{"onUpdate:modelValue":r=>I.order=r,type:"number",onBlur:r=>X(I),class:"table-input order-input"},null,40,xs),[[D,I.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:r=>R(I.id),title:"åˆ é™¤"},[...g[10]||(g[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Vs)])]))),128))])])]),p.value?(d(),u("div",{key:0,class:"modal-overlay",onClick:U},[e("div",{class:"modal-content",onClick:g[5]||(g[5]=oe(()=>{},["stop"]))},[e("div",{class:"modal-header"},[g[12]||(g[12]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:U},"Ã—")]),e("div",Bs,[o.value.length===0?(d(),u("div",Us,[...g[13]||(g[13]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)])])):(d(),u("div",As,[(d(!0),u(J,null,G(o.value,I=>(d(),u("label",{key:I.id,class:"tag-option"},[e("input",{type:"checkbox",checked:s.value.includes(I.id),onChange:r=>N(I.id)},null,40,Ds),e("span",{class:"tag-label",style:ke({backgroundColor:I.color})},h(I.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:U},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:q},"ç¡®å®š")])])])):P("",!0),l.value?(d(),u("div",{key:1,class:"modal-overlay",onClick:m},[e("div",{class:"modal-content duplicate-modal",onClick:g[6]||(g[6]=oe(()=>{},["stop"]))},[e("div",{class:"modal-header"},[g[14]||(g[14]=ne('<div class="header-with-icon" data-v-edd548d5><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" data-v-edd548d5><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-edd548d5></path><line x1="12" y1="9" x2="12" y2="13" data-v-edd548d5></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-edd548d5></line></svg><h3 data-v-edd548d5>æ£€æµ‹åˆ°é‡å¤å¡ç‰‡</h3></div>',1)),e("button",{class:"close-btn",onClick:m},"Ã—")]),e("div",Is,[g[24]||(g[24]=e("div",{class:"duplicate-warning"},[e("p",{class:"warning-text"},"æ‚¨è¦æ·»åŠ çš„å¡ç‰‡ä¸ä»¥ä¸‹ç°æœ‰å¡ç‰‡é‡å¤ï¼š")],-1)),e("div",Ts,[e("div",Ss,[g[18]||(g[18]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"ç°æœ‰å¡ç‰‡")],-1)),e("div",Ls,[e("div",Ws,[g[15]||(g[15]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",Ns,h((te=i.value)==null?void 0:te.title),1)]),e("div",zs,[g[16]||(g[16]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Ps,h((ie=i.value)==null?void 0:ie.url),1)]),(de=i.value)!=null&&de.logo_url?(d(),u("div",Hs,[g[17]||(g[17]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Fs,h((Y=i.value)==null?void 0:Y.logo_url),1)])):P("",!0)])]),g[23]||(g[23]=e("div",{class:"arrow-divider"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1)),e("div",Os,[g[22]||(g[22]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"å¾…æ·»åŠ å¡ç‰‡")],-1)),e("div",Es,[e("div",Rs,[g[19]||(g[19]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",js,h((re=c.value)==null?void 0:re.title),1)]),e("div",qs,[g[20]||(g[20]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Js,h((ue=c.value)==null?void 0:ue.url),1)]),(ee=c.value)!=null&&ee.logo_url?(d(),u("div",Gs,[g[21]||(g[21]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Ks,h((ce=c.value)==null?void 0:ce.logo_url),1)])):P("",!0)])])]),g[25]||(g[25]=e("div",{class:"duplicate-actions-info"},[e("p",null,"è¯·é€‰æ‹©å¦‚ä½•å¤„ç†ï¼š")],-1))]),e("div",{class:"modal-footer duplicate-footer"},[e("button",{class:"btn btn-secondary",onClick:C},[...g[26]||(g[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),F(" è·³è¿‡ ",-1)])]),e("button",{class:"btn btn-warning",onClick:z},[...g[27]||(g[27]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1),F(" æ›¿æ¢ ",-1)])]),e("button",{class:"btn btn-primary",onClick:K},[...g[28]||(g[28]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),F(" ç¼–è¾‘åæ·»åŠ  ",-1)])])])])])):P("",!0)])}}},Xs=Z(Qs,[["__scopeId","data-v-edd548d5"]]),Ys={class:"duplicate-manage"},Zs={class:"section-header"},el=["disabled"],tl={key:0,class:"duplicate-results"},sl={class:"result-summary"},ll={class:"summary-card"},al={class:"summary-value"},ol={class:"summary-card warning"},nl={class:"summary-value"},il={class:"summary-card danger"},dl={class:"summary-value"},rl={class:"duplicate-groups"},ul={class:"group-header"},cl={class:"group-count"},vl={class:"card-item original"},pl={class:"card-info"},ml={class:"card-title"},bl={class:"card-url"},gl={key:0,class:"card-desc"},fl={class:"card-id"},hl={class:"duplicates-list"},wl={class:"card-info"},kl={class:"card-title"},yl={class:"card-url"},_l={key:0,class:"card-desc"},$l={class:"card-actions"},Cl={class:"card-id"},Ml=["onClick","disabled"],xl={class:"group-actions"},Vl=["onClick","disabled"],Bl={class:"global-actions"},Ul=["disabled"],Al={key:1,class:"no-duplicates"},Dl={key:2,class:"initial-hint"},Il={key:3,class:"error"},Tl={__name:"DuplicateManage",setup(H){const n=b(!1),v=b(!1),$=b(!1),M=b([]),T=b(0),S=b(0),V=b("");function o(){return x(this,null,function*(){var l,i;n.value=!0,V.value="";try{const c=yield Qe();T.value=c.data.total,M.value=c.data.duplicateGroups,S.value=c.data.duplicateCount,$.value=!0}catch(c){V.value=((i=(l=c.response)==null?void 0:l.data)==null?void 0:i.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",c)}finally{n.value=!1}})}function p(l){return x(this,null,function*(){var i,c,k;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){v.value=!0,V.value="";try{console.log("[å»é‡ç®¡ç†] åˆ é™¤å•ä¸ªå¡ç‰‡:",l);const B=yield fe([l]);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",B.data),B.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(B.data.message||"æœªçŸ¥é”™è¯¯")}catch(B){console.error("[å»é‡ç®¡ç†] åˆ é™¤å¡ç‰‡å¤±è´¥:",B),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(i=B.response)==null?void 0:i.data),V.value=((k=(c=B.response)==null?void 0:c.data)==null?void 0:k.error)||B.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}function a(l){return x(this,null,function*(){var c,k,B;const i=l.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${i} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${l.original.title}`)){v.value=!0,V.value="";try{const L=l.duplicates.map(y=>y.id);console.log("[å»é‡ç®¡ç†] åˆ é™¤ä¸€ç»„é‡å¤å¡ç‰‡:",L);const w=yield fe(L);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",w.data),w.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(w.data.message||"æœªçŸ¥é”™è¯¯")}catch(L){console.error("[å»é‡ç®¡ç†] åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",L),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(c=L.response)==null?void 0:c.data),V.value=((B=(k=L.response)==null?void 0:k.data)==null?void 0:B.error)||L.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}function s(){return x(this,null,function*(){var i,c,k;const l=S.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${l} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){v.value=!0,V.value="";try{const B=M.value.flatMap(w=>w.duplicates.map(y=>y.id));console.log("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡:",B);const L=yield fe(B);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",L.data),L.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(L.data.message||"æœªçŸ¥é”™è¯¯")}catch(B){console.error("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",B),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(i=B.response)==null?void 0:i.data),V.value=((k=(c=B.response)==null?void 0:c.data)==null?void 0:k.error)||B.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}return(l,i)=>(d(),u("div",Ys,[e("div",Zs,[i[0]||(i[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:o,class:"btn btn-primary",disabled:n.value},h(n.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,el)]),M.value.length>0?(d(),u("div",tl,[e("div",sl,[e("div",ll,[i[1]||(i[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",al,h(T.value),1)]),e("div",ol,[i[2]||(i[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",nl,h(M.value.length),1)]),e("div",il,[i[3]||(i[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",dl,h(S.value),1)])]),e("div",rl,[(d(!0),u(J,null,G(M.value,(c,k)=>(d(),u("div",{key:k,class:"duplicate-group"},[e("div",ul,[e("h4",null,"é‡å¤ç»„ "+h(k+1),1),e("span",cl,h(c.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",vl,[i[4]||(i[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",pl,[e("div",ml,h(c.original.title),1),e("div",bl,h(c.original.url),1),c.original.desc?(d(),u("div",gl,h(c.original.desc),1)):P("",!0)]),e("div",fl,"ID: "+h(c.original.id),1)]),e("div",hl,[(d(!0),u(J,null,G(c.duplicates,B=>(d(),u("div",{key:B.id,class:"card-item duplicate"},[i[5]||(i[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",wl,[e("div",kl,h(B.title),1),e("div",yl,h(B.url),1),B.desc?(d(),u("div",_l,h(B.desc),1)):P("",!0)]),e("div",$l,[e("span",Cl,"ID: "+h(B.id),1),e("button",{onClick:L=>p(B.id),class:"btn-remove",disabled:v.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,Ml)])]))),128))]),e("div",xl,[e("button",{onClick:B=>a(c),class:"btn btn-danger",disabled:v.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+h(c.duplicates.length)+" å¼ ) ",9,Vl)])]))),128))]),e("div",Bl,[e("button",{onClick:s,class:"btn btn-danger btn-large",disabled:v.value},h(v.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${S.value} å¼ )`),9,Ul)])])):$.value&&M.value.length===0?(d(),u("div",Al,[...i[6]||(i[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)])])):$.value?P("",!0):(d(),u("div",Dl,[...i[7]||(i[7]=[ne('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-62bbc778><circle cx="12" cy="12" r="10" data-v-62bbc778></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-62bbc778></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-62bbc778></line></svg><h3 data-v-62bbc778>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-62bbc778>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-62bbc778><li data-v-62bbc778>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-62bbc778>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)])])),V.value?(d(),u("p",Il,h(V.value),1)):P("",!0)]))}},Sl=Z(Tl,[["__scopeId","data-v-62bbc778"]]),Ll={class:"tag-manage"},Wl={class:"tag-header"},Nl={class:"tag-add"},zl={class:"tag-content"},Pl={key:0,class:"empty-state"},Hl={key:1,class:"tag-list"},Fl={class:"tag-info"},Ol=["onUpdate:modelValue","onBlur"],El={class:"tag-stats"},Rl={class:"card-count"},jl={class:"tag-controls"},ql=["onUpdate:modelValue","onChange"],Jl={class:"tag-order"},Gl=["onUpdate:modelValue","onBlur"],Kl={class:"tag-actions"},Ql=["onClick"],Xl={__name:"TagManage",setup(H){const n=b([]),v=b(""),$=b("#2566d8");se(M);function M(){return x(this,null,function*(){const o=yield Ve();n.value=o.data;for(const p of n.value)try{const a=yield Xe(p.id);p.cardCount=a.data.count}catch(a){p.cardCount=0}})}function T(){return x(this,null,function*(){var l,i;if(!v.value.trim())return;const o=n.value.length?Math.max(...n.value.map(c=>c.order||0)):0,p=v.value.trim(),a=$.value,s={id:Date.now(),name:p,color:a,order:o+1,cardCount:0,_temp:!0};n.value.push(s),v.value="",$.value="#2566d8";try{const c=yield Ye({name:p,color:a,order:o+1}),k=n.value.findIndex(B=>B.id===s.id);k>-1&&(n.value[k]=be(pe({},c.data),{cardCount:0}))}catch(c){const k=n.value.findIndex(B=>B.id===s.id);k>-1&&n.value.splice(k,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((i=(l=c.response)==null?void 0:l.data)==null?void 0:i.error)||c.message))}})}function S(o){return x(this,null,function*(){var p,a;if(!o._temp)try{yield Ze(o.id,{name:o.name,color:o.color,order:o.order})}catch(s){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((a=(p=s.response)==null?void 0:p.data)==null?void 0:a.error)||s.message)),M()}})}function V(o){return x(this,null,function*(){var l,i;const p=n.value.find(c=>c.id===o);if(!p)return;const a=p.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${p.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${p.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${p.name}"å—ï¼Ÿ`;if(!confirm(a))return;const s=n.value.findIndex(c=>c.id===o);s>-1&&n.value.splice(s,1);try{yield et(o)}catch(c){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((i=(l=c.response)==null?void 0:l.data)==null?void 0:i.error)||c.message)),M()}})}return(o,p)=>(d(),u("div",Ll,[e("div",Wl,[p[3]||(p[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",Nl,[_(e("input",{"onUpdate:modelValue":p[0]||(p[0]=a=>v.value=a),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[D,v.value]]),_(e("input",{"onUpdate:modelValue":p[1]||(p[1]=a=>$.value=a),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[D,$.value]]),e("button",{class:"btn btn-primary",onClick:T},[...p[2]||(p[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),F(" æ·»åŠ æ ‡ç­¾ ",-1)])])])]),e("div",zl,[n.value.length===0?(d(),u("div",Pl,[...p[4]||(p[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)])])):(d(),u("div",Hl,[(d(!0),u(J,null,G(n.value,a=>(d(),u("div",{key:a.id,class:"tag-item"},[e("div",{class:"tag-preview",style:ke({backgroundColor:a.color})},[...p[5]||(p[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)])],4),e("div",Fl,[_(e("input",{"onUpdate:modelValue":s=>a.name=s,onBlur:s=>S(a),class:"tag-name-input",maxlength:"20"},null,40,Ol),[[D,a.name]]),e("div",El,[e("span",Rl,h(a.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",jl,[_(e("input",{"onUpdate:modelValue":s=>a.color=s,type:"color",onChange:s=>S(a),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,ql),[[D,a.color]]),e("div",Jl,[p[6]||(p[6]=e("span",{class:"order-label"},"æ’åº",-1)),_(e("input",{"onUpdate:modelValue":s=>a.order=s,type:"number",onBlur:s=>S(a),class:"order-input"},null,40,Gl),[[D,a.order,void 0,{number:!0}]])])]),e("div",Kl,[e("button",{class:"btn btn-danger btn-icon",onClick:s=>V(a.id),title:"åˆ é™¤æ ‡ç­¾"},[...p[7]||(p[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Ql)])]))),128))]))])]))}},Yl=Z(Xl,[["__scopeId","data-v-56efcb56"]]),Zl={class:"ad-manage"},ea={class:"ad-header"},ta={class:"ad-section"},sa={class:"ad-card"},la={class:"ad-table"},aa=["onUpdate:modelValue","onBlur"],oa=["onUpdate:modelValue","onBlur"],na=["onClick"],ia={class:"ad-section"},da={class:"ad-card"},ra={class:"ad-table"},ua=["onUpdate:modelValue","onBlur"],ca=["onUpdate:modelValue","onBlur"],va=["onClick"],pa={__name:"AdManage",setup(H){const n=b([]),v=b([]),$=b(""),M=b(""),T=b("left");se(S);function S(){return x(this,null,function*(){try{const a=yield tt();let s=[];Array.isArray(a.data)?s=a.data:a.data&&Array.isArray(a.data.data)&&(s=a.data.data),n.value=s.filter(l=>l.position==="left"),v.value=s.filter(l=>l.position==="right")}catch(a){console.error("åŠ è½½å¹¿å‘Šå¤±è´¥:",a),n.value=[],v.value=[]}})}function V(){return x(this,null,function*(){var a,s;if(!$.value||!M.value){alert("è¯·å¡«å†™å¹¿å‘Šå›¾ç‰‡é“¾æ¥å’Œè·³è½¬é“¾æ¥");return}try{yield st({position:T.value,img:$.value,url:M.value}),$.value="",M.value="",T.value="left",yield S()}catch(l){alert("æ·»åŠ å¹¿å‘Šå¤±è´¥ï¼š"+(((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.error)||l.message))}})}function o(a){return x(this,null,function*(){var s,l;try{yield lt(a.id,{img:a.img,url:a.url})}catch(i){alert("æ›´æ–°å¹¿å‘Šå¤±è´¥ï¼š"+(((l=(s=i.response)==null?void 0:s.data)==null?void 0:l.error)||i.message)),yield S()}})}function p(a){return x(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¹¿å‘Šå—ï¼Ÿ"))return;const s=n.value.findIndex(i=>i.id===a),l=v.value.findIndex(i=>i.id===a);s>-1&&n.value.splice(s,1),l>-1&&v.value.splice(l,1);try{yield at(a)}catch(i){console.error("åˆ é™¤å¹¿å‘Šå¤±è´¥:",i),yield S()}})}return(a,s)=>(d(),u("div",Zl,[e("div",ea,[e("form",{class:"ad-add-row",onSubmit:oe(V,["prevent"])},[_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>$.value=l),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[D,$.value]]),_(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>M.value=l),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[D,M.value]]),_(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>T.value=l),class:"input select-input"},[...s[3]||(s[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)])],512),[[we,T.value]]),s[4]||(s[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",ta,[s[6]||(s[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",sa,[e("table",la,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),u(J,null,G(n.value,l=>(d(),u("tr",{key:l.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":i=>l.img=i,onBlur:i=>o(l),class:"input"},null,40,aa),[[D,l.img]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":i=>l.url=i,onBlur:i=>o(l),class:"input"},null,40,oa),[[D,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:i=>p(l.id)},"åˆ é™¤å¹¿å‘Š",8,na)])]))),128))])])])]),e("div",ia,[s[8]||(s[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",da,[e("table",ra,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),u(J,null,G(v.value,l=>(d(),u("tr",{key:l.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":i=>l.img=i,onBlur:i=>o(l),class:"input"},null,40,ua),[[D,l.img]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":i=>l.url=i,onBlur:i=>o(l),class:"input"},null,40,ca),[[D,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:i=>p(l.id)},"åˆ é™¤å¹¿å‘Š",8,va)])]))),128))])])])])]))}},ma=Z(pa,[["__scopeId","data-v-9c35605d"]]),ba={class:"friend-manage"},ga={class:"friend-add"},fa={class:"friend-card"},ha={class:"friend-table"},wa=["onUpdate:modelValue","onBlur"],ka=["onUpdate:modelValue","onBlur"],ya=["onUpdate:modelValue","onBlur"],_a=["onClick"],$a={__name:"FriendLinkManage",setup(H){const n=b([]),v=b(""),$=b(""),M=b("");se(T);function T(){return x(this,null,function*(){const p=yield ot();n.value=p.data})}function S(){return x(this,null,function*(){!v.value||!$.value||(yield nt({title:v.value,url:$.value,logo:M.value}),v.value="",$.value="",M.value="",T())})}function V(p){return x(this,null,function*(){yield it(p.id,{title:p.title,url:p.url,logo:p.logo}),T()})}function o(p){return x(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‹é“¾å—ï¼Ÿ"))return;const a=n.value.findIndex(s=>s.id===p);a>-1&&n.value.splice(a,1);try{yield dt(p)}catch(s){console.error("åˆ é™¤å‹é“¾å¤±è´¥:",s),yield T()}})}return(p,a)=>(d(),u("div",ba,[a[4]||(a[4]=e("div",{class:"friend-header"},null,-1)),e("div",ga,[_(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[D,v.value]]),_(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>$.value=s),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[D,$.value]]),_(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>M.value=s),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[D,M.value]]),e("button",{class:"btn",onClick:S},"æ·»åŠ å‹é“¾")]),e("div",fa,[e("table",ha,[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),u(J,null,G(n.value,s=>(d(),u("tr",{key:s.id},[e("td",null,[_(e("input",{"onUpdate:modelValue":l=>s.title=l,onBlur:l=>V(s),class:"input"},null,40,wa),[[D,s.title]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":l=>s.url=l,onBlur:l=>V(s),class:"input"},null,40,ka),[[D,s.url]])]),e("td",null,[_(e("input",{"onUpdate:modelValue":l=>s.logo=l,onBlur:l=>V(s),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ya),[[D,s.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:l=>o(s.id)},"åˆ é™¤",8,_a)])]))),128))])])])]))}},Ca=Z($a,[["__scopeId","data-v-c25e838c"]]),Ma={class:"user-manage"},xa={class:"user-card"},Va={class:"username-section"},Ba={class:"username-form"},Ua={class:"current-username"},Aa={class:"username-display"},Da={class:"form-group"},Ia={class:"form-actions"},Ta=["disabled"],Sa={class:"password-section"},La={class:"password-form"},Wa={class:"form-group"},Na={class:"form-group"},za={class:"form-group"},Pa={class:"form-actions"},Ha=["disabled"],Fa={__name:"UserManage",setup(H){const n=b(""),v=b(""),$=b(""),M=b(!1),T=b(""),S=b("success"),V=b({}),o=b(""),p=b(!1),a=b(""),s=b("success");se(()=>x(null,null,function*(){yield l()}));function l(){return x(this,null,function*(){try{const L=yield rt();V.value=L.data.data||L.data}catch(L){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",L)}})}function i(){return x(this,null,function*(){var L,w;if(!o.value){c("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(o.value.length<3||o.value.length>20){c("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(o.value===V.value.username){c("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}p.value=!0,a.value="";try{yield ut(o.value),c("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),o.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(y){c(((w=(L=y.response)==null?void 0:L.data)==null?void 0:w.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{p.value=!1}})}function c(L,w){a.value=L,s.value=w,setTimeout(()=>{a.value=""},3e3)}function k(){return x(this,null,function*(){var L,w;if(!n.value||!v.value||!$.value){B("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(v.value!==$.value){B("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(v.value.length<6){B("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}M.value=!0,T.value="";try{yield ct(n.value,v.value),B("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),n.value="",v.value="",$.value=""}catch(y){B(((w=(L=y.response)==null?void 0:L.data)==null?void 0:w.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{M.value=!1}})}function B(L,w){T.value=L,S.value=w,L==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&w==="success"?setTimeout(()=>{T.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{T.value=""},3e3)}return(L,w)=>(d(),u("div",Ma,[w[11]||(w[11]=e("div",{class:"user-header"},null,-1)),e("div",xa,[e("div",Va,[w[6]||(w[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",Ba,[e("div",Ua,[w[4]||(w[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",Aa,h(V.value.username||"admin"),1)]),e("div",Da,[w[5]||(w[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),_(e("input",{"onUpdate:modelValue":w[0]||(w[0]=y=>o.value=y),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[D,o.value]])]),e("div",Ia,[e("button",{onClick:i,class:"btn",disabled:p.value},h(p.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,Ta)]),a.value?(d(),u("p",{key:0,class:O(["message",s.value])},h(a.value),3)):P("",!0)])]),e("div",Sa,[w[10]||(w[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",La,[e("div",Wa,[w[7]||(w[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":w[1]||(w[1]=y=>n.value=y),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[D,n.value]])]),e("div",Na,[w[8]||(w[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":w[2]||(w[2]=y=>v.value=y),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[D,v.value]])]),e("div",za,[w[9]||(w[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),_(e("input",{"onUpdate:modelValue":w[3]||(w[3]=y=>$.value=y),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[D,$.value]])]),e("div",Pa,[e("button",{onClick:k,class:"btn",disabled:M.value},h(M.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,Ha)]),T.value?(d(),u("p",{key:0,class:O(["message",S.value])},h(T.value),3)):P("",!0)])])])]))}},Oa=Z(Fa,[["__scopeId","data-v-40392133"]]),Ea={class:"backup-manage"},Ra={class:"tabs"},ja={class:"tab-content"},qa={class:"toolbar"},Ja=["disabled"],Ga=["disabled"],Ka=["disabled"],Qa={class:"backup-list"},Xa={key:0,class:"empty-state"},Ya={key:1,class:"backup-grid"},Za={class:"backup-info"},eo={class:"backup-name"},to={class:"backup-meta"},so={class:"backup-size"},lo={class:"backup-date"},ao={key:0,class:"backup-signed",title:"å·²ç­¾åéªŒè¯"},oo={key:1,class:"backup-unsigned",title:"æœªç­¾åï¼ˆå¤–éƒ¨ä¸Šä¼ ï¼‰"},no={class:"backup-actions"},io=["onClick"],ro=["onClick"],uo=["onClick"],co=["onClick"],vo={class:"tab-content"},po={class:"toolbar"},mo=["disabled"],bo=["disabled"],go={key:1,class:"info-box"},fo={class:"backup-list"},ho={key:0,class:"empty-state"},wo={key:1,class:"backup-grid"},ko={class:"backup-info"},yo={class:"backup-name"},_o={class:"backup-meta"},$o={class:"backup-size"},Co={class:"backup-date"},Mo={class:"backup-actions"},xo=["onClick"],Vo=["onClick"],Bo={class:"tab-content"},Uo={class:"config-section"},Ao={class:"config-card"},Do={class:"config-header"},Io={class:"switch"},To={key:0,class:"config-fields"},So={class:"field-row"},Lo={class:"field-row"},Wo={class:"config-card"},No={class:"config-header"},zo={class:"switch"},Po={key:0,class:"config-fields"},Ho={class:"field-row"},Fo={class:"time-input"},Oo={class:"field-row"},Eo={class:"field-row checkbox-row"},Ro={class:"checkbox-label"},jo={class:"config-card"},qo={class:"config-header"},Jo={class:"switch"},Go={class:"config-info"},Ko={key:0,class:"warning-text"},Qo={key:0,class:"config-fields"},Xo={class:"field-row checkbox-row"},Yo={class:"checkbox-label"},Zo={class:"field-row checkbox-row"},en={class:"checkbox-label"},tn={class:"config-card"},sn={class:"config-header"},ln={class:"switch"},an={key:0,class:"stats-card"},on={class:"stats-grid"},nn={class:"stat-item"},dn={class:"stat-value"},rn={class:"stat-item"},un={class:"stat-value"},cn={class:"stat-item"},vn={class:"stat-value"},pn={class:"stat-item"},mn={class:"stat-value"},bn={class:"config-actions"},gn=["disabled"],fn={key:0,class:"modal-overlay"},hn={class:"modal-content config-modal"},wn={class:"form-group"},kn={class:"form-group"},yn={class:"form-group"},_n=["placeholder"],$n={key:0},Cn={key:1},Mn={class:"modal-actions"},xn=["disabled"],Vn={key:1,class:"modal-overlay"},Bn={class:"modal-content"},Un={style:{"white-space":"pre-line"}},An={class:"modal-actions"},Dn=["disabled"],In=["disabled"],Tn={key:2,class:"modal-overlay"},Sn={class:"modal-content config-modal"},Ln={class:"form-group"},Wn={class:"form-group"},Nn={class:"modal-actions"},zn=["disabled"],Pn={key:3,class:"modal-overlay"},Hn={class:"modal-content config-modal"},Fn={class:"form-group"},On={class:"modal-actions"},En=["disabled"],Rn={__name:"BackupManage",setup(H){const n=b("local"),v=b([]),$=b([]),M=b(!1),T=b(!1),S=b(!1),V=b(null),o=le({create:!1,list:!1,delete:!1,restore:!1,upload:!1,rename:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),p=le({name:"",description:""}),a=le({oldName:"",newName:""}),s=b({text:"",type:""}),l=le({show:!1,filename:"",action:null,title:"",message:"",confirmClass:"",signed:!0,processing:!1}),i=le({configured:!1,url:"",username:""}),c=le({url:"",username:"",password:""}),k=le({debounce:{enabled:!0,delay:30,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!0},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!0},autoClean:!0}),B=b(null),L=localStorage.getItem("token");function w(E){return x(this,arguments,function*(r,t={}){return(yield fetch(r,be(pe({},t),{headers:pe({Authorization:`Bearer ${L}`,"Content-Type":"application/json"},t.headers)}))).json()})}const y=(r,t="success",E=4e3)=>{s.value={text:r,type:t},setTimeout(()=>{s.value={text:"",type:""}},t==="error"?6e3:E)},X=()=>{p.name="",p.description="",T.value=!0},R=()=>x(null,null,function*(){o.create=!0;const r=yield w("/api/backup/create",{method:"POST",body:JSON.stringify({name:p.name||null,description:p.description||null})});r.success?(y("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),T.value=!1,yield N()):y(r.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),o.create=!1}),j=r=>{a.oldName=r,a.newName=r.replace(".zip",""),S.value=!0},U=()=>x(null,null,function*(){if(!a.newName.trim()){y("è¯·è¾“å…¥æ–°åç§°","error");return}o.rename=!0;const r=yield w(`/api/backup/rename/${a.oldName}`,{method:"PUT",body:JSON.stringify({newName:a.newName})});r.success?(y("é‡å‘½åæˆåŠŸï¼"),S.value=!1,yield N()):y(r.message||"é‡å‘½åå¤±è´¥","error"),o.rename=!1}),N=()=>x(null,null,function*(){o.list=!0;const r=yield w("/api/backup/list");r.success?v.value=r.backups:y("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),o.list=!1}),q=r=>{window.open(`/api/backup/download/${r}?token=${L}`,"_blank")},W=(r,t)=>{const E=typeof t=="object"?t:{name:t},f=E.name;l.show=!0,l.filename=f,l.action=r,l.signed=E.signed,l.processing=!1,r==="delete"?(l.title="åˆ é™¤",l.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${f} å—ï¼Ÿ`,l.confirmClass="btn-danger"):r==="restore"?(l.title="æ¢å¤",E.signed?l.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${f} å—ï¼Ÿ`:l.message=`âš ï¸ è­¦å‘Šï¼šæ­¤å¤‡ä»½æ–‡ä»¶æœªç­¾åï¼ˆå¯èƒ½æ˜¯å¤–éƒ¨ä¸Šä¼ çš„ï¼‰ï¼Œæ— æ³•éªŒè¯å…¶å®Œæ•´æ€§ã€‚

ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${f} å—ï¼Ÿ`,l.confirmClass="btn-restore"):r==="webdav-restore"?(l.title="ä»WebDAVæ¢å¤",l.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${f} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,l.confirmClass="btn-restore"):r==="webdav-delete"&&(l.title="åˆ é™¤WebDAVå¤‡ä»½",l.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${f} å—ï¼Ÿ`,l.confirmClass="btn-danger")},m=()=>x(null,null,function*(){const{action:r,filename:t,signed:E}=l;l.show=!1,l.processing=!1;try{if(r==="delete"){y("æ­£åœ¨åˆ é™¤å¤‡ä»½...");const f=yield w(`/api/backup/delete/${t}`,{method:"DELETE"});f.success?(y("âœ“ åˆ é™¤æˆåŠŸ"),yield N()):y("âœ— "+(f.message||"åˆ é™¤å¤±è´¥"),"error")}else if(r==="restore"){y("æ­£åœ¨æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™...");const f=E?{}:{forceRestore:!0},Q=yield w(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify(f)});if(Q.success)y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(ve=>setTimeout(ve,2e3)),yield Promise.all([N(),A(),Y(),ee()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3);else if(Q.requireConfirm&&Q.code==="NO_SIGNATURE"){if(confirm(Q.message+`

ç‚¹å‡»"ç¡®å®š"ç»§ç»­æ¢å¤ï¼Œç‚¹å‡»"å–æ¶ˆ"æ”¾å¼ƒæ“ä½œã€‚`)){const ve=yield w(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify({forceRestore:!0})});ve.success?(y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(Be=>setTimeout(Be,2e3)),yield Promise.all([N(),A(),Y(),ee()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):y("âœ— "+(ve.message||"æ¢å¤å¤±è´¥"),"error")}}else y("âœ— "+(Q.message||"æ¢å¤å¤±è´¥"),"error")}else r==="webdav-restore"?yield re(t):r==="webdav-delete"&&(yield ue(t))}catch(f){y("âœ— æ“ä½œå¤±è´¥: "+f.message,"error")}}),C=r=>r?new Date(r).toLocaleString("zh-CN",{hour12:!1}):"--",z=()=>{V.value.click()},K=r=>x(null,null,function*(){const t=r.target.files[0];if(t){if(!t.name.endsWith(".zip")){y("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),r.target.value="";return}if(t.size>500*1024*1024){y("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),r.target.value="";return}o.upload=!0;try{const E=new FormData;E.append("backup",t);const Q=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${L}`},body:E})).json();Q.success?(y("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield N()):y(Q.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(E){console.error("ä¸Šä¼ å¤±è´¥:",E),y("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{o.upload=!1,r.target.value=""}}}),A=()=>x(null,null,function*(){const r=yield w("/api/backup/webdav/config");r.success&&r.config&&(i.configured=r.config.configured,i.url=r.config.url||"",i.username=r.config.username||"")}),g=()=>x(null,null,function*(){yield A(),c.url=i.url,c.username=i.username,c.password="",M.value=!0}),te=()=>x(null,null,function*(){if(!c.url||!c.username){y("è¯·å¡«å†™URLå’Œç”¨æˆ·å","error");return}if(!i.configured&&!c.password){y("é¦–æ¬¡é…ç½®æ—¶å¯†ç ä¸èƒ½ä¸ºç©º","error");return}o.webdavConfig=!0;const r=yield w("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(c)});r.success?(y("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),M.value=!1,yield A(),i.configured&&(yield Y())):y(r.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),o.webdavConfig=!1}),ie=()=>x(null,null,function*(){o.webdavBackup=!0;const r=yield w("/api/backup/webdav/backup",{method:"POST"});r.success?(y("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield Y()):y(r.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),o.webdavBackup=!1}),de=r=>{r.target.checked&&!i.configured&&(k.webdav.enabled=!1,y('è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®WebDAVè¿æ¥',"error"),n.value="webdav")},Y=()=>x(null,null,function*(){o.webdavList=!0;const r=yield w("/api/backup/webdav/list");r.success?$.value=r.backups||[]:y("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),o.webdavList=!1}),re=r=>x(null,null,function*(){y("æ­£åœ¨ä» WebDAV æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™..."),o.webdavRestore=!0;try{const t=yield w("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:r})});t.success?(y("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(E=>setTimeout(E,2e3)),yield Promise.all([N(),A(),Y(),ee()]),y("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):y("âœ— "+(t.message||"ä» WebDAV æ¢å¤å¤±è´¥"),"error")}catch(t){y("âœ— æ¢å¤å¤±è´¥: "+t.message,"error")}finally{o.webdavRestore=!1}}),ue=r=>x(null,null,function*(){y("æ­£åœ¨åˆ é™¤ WebDAV å¤‡ä»½..."),o.webdavDelete=!0;try{const t=yield w(`/api/backup/webdav/delete/${r}`,{method:"DELETE"});t.success?(y("âœ“ åˆ é™¤æˆåŠŸ"),yield Y()):y("âœ— "+(t.message||"åˆ é™¤å¤±è´¥"),"error")}catch(t){y("âœ— åˆ é™¤å¤±è´¥: "+t.message,"error")}finally{o.webdavDelete=!1}}),ee=()=>x(null,null,function*(){const r=yield w("/api/backup/auto/config");r.success&&r.config?(Object.assign(k,r.config),B.value=r.stats||null):y("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),ce=()=>x(null,null,function*(){o.autoBackupConfig=!0;const r=yield w("/api/backup/auto/config",{method:"POST",body:JSON.stringify(k)});r.success?(y("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield ee()):y(r.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),o.autoBackupConfig=!1}),I=()=>{if(!k.scheduled.enabled)return"æœªå¯ç”¨";const r=String(k.scheduled.hour).padStart(2,"0"),t=String(k.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${r}:${t}`};return se(()=>x(null,null,function*(){yield N(),yield A(),i.configured&&(yield Y()),yield ee()})),(r,t)=>{var E;return d(),u("div",Ea,[e("div",Ra,[e("button",{class:O(["tab",{active:n.value==="local"}]),onClick:t[0]||(t[0]=f=>n.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:O(["tab",{active:n.value==="webdav"}]),onClick:t[1]||(t[1]=f=>n.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:O(["tab",{active:n.value==="auto"}]),onClick:t[2]||(t[2]=f=>n.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),_(e("div",ja,[e("div",qa,[e("button",{class:"btn btn-primary",onClick:X,disabled:o.create},[t[25]||(t[25]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),F(" "+h(o.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,Ja),e("button",{class:"btn btn-success",onClick:z,disabled:o.upload},[t[26]||(t[26]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),F(" "+h(o.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,Ga),e("button",{class:"btn btn-secondary",onClick:N,disabled:o.list},[t[27]||(t[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),F(" "+h(o.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Ka),e("input",{ref_key:"fileInput",ref:V,type:"file",accept:".zip",onChange:K,style:{display:"none"}},null,544)]),s.value.text?(d(),u("div",{key:0,class:O(["message",s.value.type])},h(s.value.text),3)):P("",!0),e("div",Qa,[v.value.length===0&&!o.list?(d(),u("div",Xa,[...t[28]||(t[28]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)])])):(d(),u("div",Ya,[(d(!0),u(J,null,G(v.value,f=>(d(),u("div",{key:f.name,class:"backup-card"},[t[33]||(t[33]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",Za,[e("div",eo,h(f.name),1),e("div",to,[e("span",so,h(f.size),1),e("span",lo,h(C(f.created)),1),f.signed?(d(),u("span",ao,"ğŸ”’")):(d(),u("span",oo,"âš ï¸"))])]),e("div",no,[e("button",{class:"btn-icon btn-restore",onClick:Q=>W("restore",f),title:"æ¢å¤å¤‡ä»½"},[...t[29]||(t[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,io),e("button",{class:"btn-icon btn-rename",onClick:Q=>j(f.name),title:"é‡å‘½å"},[...t[30]||(t[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,ro),e("button",{class:"btn-icon",onClick:Q=>q(f.name),title:"ä¸‹è½½å¤‡ä»½"},[...t[31]||(t[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)])],8,uo),e("button",{class:"btn-icon btn-danger",onClick:Q=>W("delete",f.name),title:"åˆ é™¤å¤‡ä»½"},[...t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,co)])]))),128))]))])],512),[[ge,n.value==="local"]]),_(e("div",vo,[e("div",po,[e("button",{class:"btn btn-primary",onClick:g},[...t[34]||(t[34]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),F(" WebDAVé…ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:ie,disabled:o.webdavBackup||!i.configured},[t[35]||(t[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),F(" "+h(o.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,mo),e("button",{class:"btn btn-secondary",onClick:Y,disabled:o.webdavList||!i.configured},[t[36]||(t[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),F(" "+h(o.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,bo)]),s.value.text?(d(),u("div",{key:0,class:O(["message",s.value.type])},h(s.value.text),3)):P("",!0),i.configured?P("",!0):(d(),u("div",go,[...t[37]||(t[37]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)])])),e("div",fo,[$.value.length===0&&!o.webdavList?(d(),u("div",ho,[...t[38]||(t[38]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)])])):(d(),u("div",wo,[(d(!0),u(J,null,G($.value,f=>(d(),u("div",{key:f.name,class:"backup-card"},[t[41]||(t[41]=ne('<div class="backup-icon" data-v-b8ebf567><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-b8ebf567><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-b8ebf567></path><polyline points="14 2 14 8 20 8" data-v-b8ebf567></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-b8ebf567></path></svg></div>',1)),e("div",ko,[e("div",yo,h(f.name),1),e("div",_o,[e("span",$o,h(f.size),1),e("span",Co,h(C(f.created)),1)])]),e("div",Mo,[e("button",{class:"btn-icon btn-restore",onClick:Q=>W("webdav-restore",f.name),title:"ä»WebDAVæ¢å¤"},[...t[39]||(t[39]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,xo),e("button",{class:"btn-icon btn-danger",onClick:Q=>W("webdav-delete",f.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},[...t[40]||(t[40]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Vo)])]))),128))]))])],512),[[ge,n.value==="webdav"]]),_(e("div",Bo,[s.value.text?(d(),u("div",{key:0,class:O(["message",s.value.type])},h(s.value.text),3)):P("",!0),e("div",Uo,[t[76]||(t[76]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[77]||(t[77]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",Ao,[e("div",Do,[t[43]||(t[43]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",Io,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=f=>k.debounce.enabled=f)},null,512),[[ae,k.debounce.enabled]]),t[42]||(t[42]=e("span",{class:"slider"},null,-1))])]),t[48]||(t[48]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),k.debounce.enabled?(d(),u("div",To,[e("div",So,[t[44]||(t[44]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=f=>k.debounce.delay=f),min:"5",max:"1440",class:"form-input"},null,512),[[D,k.debounce.delay,void 0,{number:!0}]]),t[45]||(t[45]=e("small",null,"æ•°æ®ä¿®æ”¹åå»¶è¿Ÿå¤šä¹…è§¦å‘å¤‡ä»½ï¼ŒèŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",Lo,[t[46]||(t[46]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=f=>k.debounce.keep=f),min:"1",max:"30",class:"form-input"},null,512),[[D,k.debounce.keep,void 0,{number:!0}]]),t[47]||(t[47]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))])])):P("",!0)]),e("div",Wo,[e("div",No,[t[50]||(t[50]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",zo,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=f=>k.scheduled.enabled=f)},null,512),[[ae,k.scheduled.enabled]]),t[49]||(t[49]=e("span",{class:"slider"},null,-1))])]),t[58]||(t[58]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),k.scheduled.enabled?(d(),u("div",Po,[e("div",Ho,[t[52]||(t[52]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",Fo,[_(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=f=>k.scheduled.hour=f),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[D,k.scheduled.hour,void 0,{number:!0}]]),t[51]||(t[51]=e("span",null,":",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=f=>k.scheduled.minute=f),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[D,k.scheduled.minute,void 0,{number:!0}]])]),t[53]||(t[53]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",Oo,[t[54]||(t[54]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),_(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=f=>k.scheduled.keep=f),min:"1",max:"30",class:"form-input"},null,512),[[D,k.scheduled.keep,void 0,{number:!0}]]),t[55]||(t[55]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))]),e("div",Eo,[e("label",Ro,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=f=>k.scheduled.onlyIfModified=f)},null,512),[[ae,k.scheduled.onlyIfModified]]),t[56]||(t[56]=e("span",null,"ä»…åœ¨æœ‰ä¿®æ”¹æ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"å¦‚æœ24å°æ—¶å†…å·²æœ‰å¢é‡å¤‡ä»½ï¼Œè·³è¿‡å®šæ—¶å¤‡ä»½ï¼ˆé¿å…é‡å¤ï¼‰",-1))])])):P("",!0)]),e("div",jo,[e("div",qo,[t[60]||(t[60]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",Jo,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=f=>k.webdav.enabled=f),onChange:de},null,544),[[ae,k.webdav.enabled]]),t[59]||(t[59]=e("span",{class:"slider"},null,-1))])]),e("p",Go,[t[61]||(t[61]=F(" è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚ ",-1)),i.configured?P("",!0):(d(),u("span",Ko,'âš ï¸ è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®è¿æ¥'))]),k.webdav.enabled?(d(),u("div",Qo,[e("div",Xo,[e("label",Yo,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=f=>k.webdav.syncDaily=f)},null,512),[[ae,k.webdav.syncDaily]]),t[62]||(t[62]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[63]||(t[63]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",Zo,[e("label",en,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=f=>k.webdav.syncIncremental=f)},null,512),[[ae,k.webdav.syncIncremental]]),t[64]||(t[64]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[65]||(t[65]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))])])):P("",!0)]),e("div",tn,[e("div",sn,[t[67]||(t[67]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",ln,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=f=>k.autoClean=f)},null,512),[[ae,k.autoClean]]),t[66]||(t[66]=e("span",{class:"slider"},null,-1))])]),t[68]||(t[68]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡çš„æ—§å¤‡ä»½æ–‡ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼Œä¿ç•™æœ€æ–°çš„ï¼‰ã€‚",-1))]),B.value?(d(),u("div",an,[t[73]||(t[73]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",on,[e("div",nn,[t[69]||(t[69]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½æ•°é‡",-1)),e("span",dn,h(((E=B.value.incremental)==null?void 0:E.count)||0)+" ä¸ª",1)]),e("div",rn,[t[70]||(t[70]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",un,h(C(B.value.lastDebounce)||"æ— "),1)]),e("div",cn,[t[71]||(t[71]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",vn,h(C(B.value.lastScheduled)||"æ— "),1)]),e("div",pn,[t[72]||(t[72]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",mn,h(I()),1)])])])):P("",!0),e("div",bn,[e("button",{class:"btn btn-secondary",onClick:ee},[...t[74]||(t[74]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),F(" é‡ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:ce,disabled:o.autoBackupConfig},[t[75]||(t[75]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),F(" "+h(o.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,gn)])])],512),[[ge,n.value==="auto"]]),M.value?(d(),u("div",fn,[e("div",hn,[t[82]||(t[82]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",wn,[t[78]||(t[78]=e("label",null,[F("WebDAV URL "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=f=>c.url=f),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[D,c.url]]),t[79]||(t[79]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",kn,[t[80]||(t[80]=e("label",null,[F("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=f=>c.username=f),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[D,c.username]])]),e("div",yn,[t[81]||(t[81]=e("label",null,[F("å¯†ç  "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"password","onUpdate:modelValue":t[17]||(t[17]=f=>c.password=f),placeholder:i.configured?"ç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜":"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,8,_n),[[D,c.password]]),i.configured?(d(),u("small",Cn,"å¦‚éœ€ä¿®æ”¹å¯†ç è¯·è¾“å…¥æ–°å¯†ç ï¼Œç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜")):(d(),u("small",$n,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç "))]),e("div",Mn,[e("button",{class:"btn btn-secondary",onClick:t[18]||(t[18]=f=>M.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:te,disabled:o.webdavConfig},h(o.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,xn)])])])):P("",!0),l.show?(d(),u("div",Vn,[e("div",Bn,[e("h3",null,"ç¡®è®¤"+h(l.title),1),e("p",Un,h(l.message),1),e("div",An,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=f=>l.show=!1),disabled:l.processing},"å–æ¶ˆ",8,Dn),e("button",{class:O(["btn",l.confirmClass]),onClick:m,disabled:l.processing},h(l.processing?"å¤„ç†ä¸­...":"ç¡®è®¤"),11,In)])])])):P("",!0),T.value?(d(),u("div",Tn,[e("div",Sn,[t[86]||(t[86]=e("h3",null,"åˆ›å»ºå¤‡ä»½",-1)),e("div",Ln,[t[83]||(t[83]=e("label",null,"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰",-1)),_(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=f=>p.name=f),placeholder:"ä¾‹å¦‚ï¼šæ·»åŠ ä¹¦ç­¾åçš„å¤‡ä»½",class:"form-input",maxlength:"50"},null,512),[[D,p.name]]),t[84]||(t[84]=e("small",null,"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤åç§°ï¼ˆbackup-æ—¶é—´æˆ³ï¼‰",-1))]),e("div",Wn,[t[85]||(t[85]=e("label",null,"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",-1)),_(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=f=>p.description=f),placeholder:"æè¿°è¿™æ¬¡å¤‡ä»½çš„å†…å®¹æˆ–ç›®çš„...",class:"form-input",rows:"3"},null,512),[[D,p.description]])]),e("div",Nn,[e("button",{class:"btn btn-secondary",onClick:t[22]||(t[22]=f=>T.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:R,disabled:o.create},h(o.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),9,zn)])])])):P("",!0),S.value?(d(),u("div",Pn,[e("div",Hn,[t[88]||(t[88]=e("h3",null,"é‡å‘½åå¤‡ä»½",-1)),e("div",Fn,[t[87]||(t[87]=e("label",null,[F("æ–°åç§° "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=f=>a.newName=f),placeholder:"è¾“å…¥æ–°çš„å¤‡ä»½åç§°",class:"form-input",maxlength:"50"},null,512),[[D,a.newName]]),e("small",null,"åŸåç§°ï¼š"+h(a.oldName),1)]),e("div",On,[e("button",{class:"btn btn-secondary",onClick:t[24]||(t[24]=f=>S.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:U,disabled:o.rename||!a.newName.trim()},h(o.rename?"é‡å‘½åä¸­...":"ç¡®è®¤é‡å‘½å"),9,En)])])])):P("",!0)])}}},jn=Z(Rn,[["__scopeId","data-v-b8ebf567"]]),qn={key:0,class:"login-container"},Jn={class:"login-card"},Gn={class:"login-form"},Kn={class:"password-input-wrapper"},Qn=["type"],Xn={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Yn={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Zn={class:"login-buttons"},ei=["disabled"],ti={key:0,class:"login-error"},si={key:1,class:"admin-layout"},li={class:"menu-list"},ai={class:"admin-main"},oi={class:"admin-header"},ni={class:"header-title"},ii={class:"admin-content"},di={__name:"Admin",setup(H){const n=b("welcome"),v={welcome:yt,menu:cs,card:Xs,duplicate:Sl,tag:Yl,ad:ma,friend:Ca,user:Oa,backup:jn},$=me(()=>v[n.value]),M=me(()=>n.value==="welcome"?{lastLoginTime:T.value,lastLoginIp:S.value,currentUsername:V.value}:{}),T=b(""),S=b(""),V=b("admin"),o=b(!1),p=b(""),a=b(""),s=b(!1),l=b(""),i=b(!1),c=b(!1),k=me(()=>{switch(n.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});se(()=>{const j=localStorage.getItem("token");o.value=!!j,o.value&&B()});function B(){return x(this,null,function*(){try{const j=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(j.ok){const U=yield j.json();T.value=U.last_login_time||"",S.value=U.last_login_ip||"",V.value=U.username||"admin"}}catch(j){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",j)}})}function L(){return x(this,null,function*(){var j,U;if(!p.value||!a.value){l.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}s.value=!0,l.value="";try{const N=yield vt(p.value,a.value);N.data.token&&(localStorage.setItem("token",N.data.token),o.value=!0,T.value=N.data.lastLoginTime||"",S.value=N.data.lastLoginIp||"",yield B())}catch(N){l.value=((U=(j=N.response)==null?void 0:j.data)==null?void 0:U.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{s.value=!1}})}function w(){localStorage.removeItem("token"),o.value=!1,p.value="",a.value="",l.value=""}function y(){window.open("/","_blank")}function X(){c.value=!c.value}function R(){c.value=!1}return(j,U)=>o.value?(d(),u("div",si,[e("aside",{class:O(["admin-sider",{open:c.value}]),onClick:oe(R,["self"])},[e("div",{class:"logo clickable",onClick:U[3]||(U[3]=N=>{n.value="welcome",R()})},"Admin"),e("ul",li,[e("li",{class:O({active:n.value==="menu"}),onClick:U[4]||(U[4]=N=>{n.value="menu",R()})},"æ ç›®ç®¡ç†",2),e("li",{class:O({active:n.value==="card"}),onClick:U[5]||(U[5]=N=>{n.value="card",R()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:O({active:n.value==="duplicate"}),onClick:U[6]||(U[6]=N=>{n.value="duplicate",R()})},"å»é‡ç®¡ç†",2),e("li",{class:O({active:n.value==="tag"}),onClick:U[7]||(U[7]=N=>{n.value="tag",R()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:O({active:n.value==="ad"}),onClick:U[8]||(U[8]=N=>{n.value="ad",R()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:O({active:n.value==="friend"}),onClick:U[9]||(U[9]=N=>{n.value="friend",R()})},"å‹é“¾ç®¡ç†",2),e("li",{class:O({active:n.value==="user"}),onClick:U[10]||(U[10]=N=>{n.value="user",R()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:O({active:n.value==="backup"}),onClick:U[11]||(U[11]=N=>{n.value="backup",R()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",ai,[e("div",oi,[e("button",{class:"menu-toggle",onClick:X}," â˜° "),e("div",ni,h(k.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:y,title:"è¿›å…¥ä¸»é¡µ"},[...U[16]||(U[16]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("button",{class:"btn logout-btn",onClick:w},"é€€å‡ºç™»å½•")])]),e("div",ii,[Le(Ne,{name:"fade",mode:"out-in"},{default:We(()=>[(d(),ze(Pe($.value),He({key:n.value},M.value),null,16))]),_:1})]),U[17]||(U[17]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[F("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(d(),u("div",qn,[e("div",Jn,[U[15]||(U[15]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",Gn,[_(e("input",{"onUpdate:modelValue":U[0]||(U[0]=N=>p.value=N),type:"text",placeholder:"ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šadminï¼‰",class:"login-input",onKeyup:he(L,["enter"])},null,544),[[D,p.value]]),e("div",Kn,[_(e("input",{"onUpdate:modelValue":U[1]||(U[1]=N=>a.value=N),type:i.value?"text":"password",placeholder:"å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰",class:"login-input password-input",onKeyup:he(L,["enter"])},null,40,Qn),[[Se,a.value]]),e("span",{class:"toggle-password",onClick:U[2]||(U[2]=N=>i.value=!i.value)},[i.value?(d(),u("svg",Xn,[...U[12]||(U[12]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(d(),u("svg",Yn,[...U[13]||(U[13]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])]))])]),e("div",Zn,[e("button",{onClick:y,class:"back-btn"},[...U[14]||(U[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),F(" è¿”å›é¦–é¡µ ",-1)])]),e("button",{onClick:L,class:"login-btn",disabled:s.value},h(s.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,ei)]),l.value?(d(),u("p",ti,h(l.value),1)):P("",!0)])])]))}},vi=Z(di,[["__scopeId","data-v-2762ba0b"]]);export{vi as default};
