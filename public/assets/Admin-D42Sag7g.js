var Ae=Object.defineProperty,Te=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var Ce=(E,i,v)=>i in E?Ae(E,i,{enumerable:!0,configurable:!0,writable:!0,value:v}):E[i]=v,pe=(E,i)=>{for(var v in i||(i={}))Ie.call(i,v)&&Ce(E,v,i[v]);if($e)for(var v of $e(i))Le.call(i,v)&&Ce(E,v,i[v]);return E},ge=(E,i)=>Te(E,Se(i));var V=(E,i,v)=>new Promise((B,M)=>{var L=a=>{try{x(v.next(a))}catch(m){M(m)}},U=a=>{try{x(v.throw(a))}catch(m){M(m)}},x=a=>a.done?B(a.value):Promise.resolve(a.value).then(L,U);x((v=v.apply(E,i)).next())});import{_ as Y,c as d,o as n,b as e,t as k,z as ne,r as f,g as te,d as P,w as C,v as S,l as we,F as J,a as G,e as ae,A as Me,B as ke,q as H,x as ye,j as _e,n as F,C as se,y as fe,p as le,D as We,i as Ne,k as ze,T as Pe,E as Ee,G as He,H as Fe}from"./index-aUri8AWJ.js";import{g as Be,q as Oe,r as Re,s as je,t as qe,w as Je,x as Ge,c as Ue,i as Ke,u as xe,n as Ve,e as Qe,y as Xe,z as Ye,A as he,B as Ze,C as et,D as tt,E as st,F as me,b as lt,G as at,H as ot,I as nt,J as it,K as dt,L as rt,M as ut}from"./urlNormalizer-QnvKMJhB.js";const ct={class:"welcome-page"},vt={class:"welcome-title"},pt={class:"welcome-cards"},mt={class:"welcome-card"},bt={class:"welcome-value"},gt={class:"welcome-card"},ft={class:"welcome-value"},ht={__name:"WelcomePage",props:{lastLoginTime:String,lastLoginIp:String,currentUsername:String},setup(E){return(i,v)=>(n(),d("div",ct,[e("h2",vt,"æ¬¢è¿æ‚¨ï¼Œ"+k(E.currentUsername||"admin")+"ï¼",1),e("div",pt,[e("div",mt,[v[0]||(v[0]=ne('<div class="welcome-icon time-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-5cc4f846></path></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",bt,k(E.lastLoginTime||"--"),1)]),e("div",gt,[v[1]||(v[1]=ne('<div class="welcome-icon ip-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-5cc4f846></circle></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",ft,k(E.lastLoginIp||"--"),1)])])]))}},wt=Y(ht,[["__scopeId","data-v-5cc4f846"]]),kt={class:"menu-manage"},yt={key:0,class:"loading-overlay"},_t={class:"menu-header"},$t={class:"menu-add"},Ct=["disabled"],Mt={class:"menu-content"},xt={key:0,class:"empty-state"},Vt={class:"menu-card-header"},Bt={class:"menu-title"},Ut={class:"menu-name"},Dt={class:"menu-order"},At={class:"menu-actions"},Tt=["onClick"],St=["onClick"],It=["onClick"],Lt={key:0,class:"sub-menu-list"},Wt={class:"sub-menu-name"},Nt={class:"sub-menu-order"},zt={class:"sub-menu-actions"},Pt=["onClick"],Et=["onClick"],Ht={key:1,class:"no-sub-menu"},Ft={key:1,class:"modal-overlay"},Ot={class:"modal"},Rt={class:"modal-header"},jt={class:"modal-body"},qt={class:"form-group"},Jt={class:"form-group"},Gt={class:"modal-footer"},Kt=["disabled"],Qt={key:2,class:"modal-overlay"},Xt={class:"modal"},Yt={class:"modal-header"},Zt={class:"modal-body"},es={class:"form-group"},ts={class:"form-group"},ss={class:"modal-footer"},ls=["disabled"],as={key:3,class:"modal-overlay"},os={class:"modal"},ns={class:"modal-body"},is={class:"form-group"},ds={class:"form-group"},rs={class:"modal-footer"},us=["disabled"],cs={__name:"MenuManage",setup(E){const i=f([]),v=f(!1),B=f("åŠ è½½ä¸­..."),M=f(""),L=f(!1),U=f(null),x=f({name:"",order:0}),a=f(!1),m=f(null),p=f(""),u=f({name:"",order:0}),b=f(!1),w=f(null),s=f({name:"",order:0});te(()=>{l()});function o(){try{window.dispatchEvent(new CustomEvent("nav-menus-updated")),console.log("[æ ç›®ç®¡ç†] å·²é€šçŸ¥æ‰©å±•åˆ·æ–°å³é”®èœå•")}catch(W){console.warn("[æ ç›®ç®¡ç†] é€šçŸ¥æ‰©å±•å¤±è´¥:",W)}}function l(W=!1){return V(this,null,function*(){var g,A;v.value=!0,B.value="åŠ è½½ä¸­...";try{const N=yield Be(!0);i.value=N.data||[],W&&o()}catch(N){alert("åŠ è½½å¤±è´¥: "+(((A=(g=N.response)==null?void 0:g.data)==null?void 0:A.error)||N.message))}finally{v.value=!1}})}function _(){return V(this,null,function*(){var W,g;if(M.value.trim()){v.value=!0,B.value="æ·»åŠ ä¸­...";try{const A=i.value.length?Math.max(...i.value.map(N=>N.order||0)):0;yield Oe({name:M.value.trim(),order:A+1}),M.value="",yield l(!0)}catch(A){alert("æ·»åŠ å¤±è´¥: "+(((g=(W=A.response)==null?void 0:W.data)==null?void 0:g.error)||A.message)),v.value=!1}}})}function y(W){U.value=W,x.value={name:W.name,order:W.order},L.value=!0}function $(){return V(this,null,function*(){var N,T;if(!x.value.name.trim()||!U.value)return;const W=U.value.id,g=x.value.name.trim(),A=x.value.order;O(),v.value=!0,B.value="ä¿å­˜ä¸­...";try{yield qe(W,{name:g,order:A}),yield l(!0)}catch(c){alert("ä¿å­˜å¤±è´¥: "+(((T=(N=c.response)==null?void 0:N.data)==null?void 0:T.error)||c.message)),v.value=!1}})}function Q(W){return V(this,null,function*(){var g,A;if(confirm(`ç¡®å®šåˆ é™¤ä¸»èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ï¼`)){v.value=!0,B.value="åˆ é™¤ä¸­...";try{yield Re(W.id),yield l(!0)}catch(N){alert("åˆ é™¤å¤±è´¥: "+(((A=(g=N.response)==null?void 0:g.data)==null?void 0:A.error)||N.message)),v.value=!1}}})}function j(W){m.value=W.id,p.value=W.name;const g=W.subMenus||[],A=g.length?Math.max(...g.map(N=>N.order||0)):0;u.value={name:"",order:A+1},a.value=!0}function q(){return V(this,null,function*(){var N,T;if(!u.value.name.trim()||!m.value)return;const W=m.value,g=u.value.name.trim(),A=u.value.order;O(),v.value=!0,B.value="æ·»åŠ ä¸­...";try{yield Je(W,{name:g,order:A}),yield l(!0)}catch(c){alert("æ·»åŠ å¤±è´¥: "+(((T=(N=c.response)==null?void 0:N.data)==null?void 0:T.error)||c.message)),v.value=!1}})}function D(W,g){w.value=g,s.value={name:g.name,order:g.order},b.value=!0}function z(){return V(this,null,function*(){var N,T;if(!s.value.name.trim()||!w.value)return;const W=w.value.id,g=s.value.name.trim(),A=s.value.order;O(),v.value=!0,B.value="ä¿å­˜ä¸­...";try{yield Ge(W,{name:g,order:A}),yield l(!0)}catch(c){alert("ä¿å­˜å¤±è´¥: "+(((T=(N=c.response)==null?void 0:N.data)==null?void 0:T.error)||c.message)),v.value=!1}})}function oe(W){return V(this,null,function*(){var g,A;if(confirm(`ç¡®å®šåˆ é™¤å­èœå•ã€Œ${W.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å¡ç‰‡ï¼`)){v.value=!0,B.value="åˆ é™¤ä¸­...";try{yield je(W.id),yield l(!0)}catch(N){alert("åˆ é™¤å¤±è´¥: "+(((A=(g=N.response)==null?void 0:g.data)==null?void 0:A.error)||N.message)),v.value=!1}}})}function O(){L.value=!1,a.value=!1,b.value=!1,U.value=null,w.value=null}return(W,g)=>(n(),d("div",kt,[v.value?(n(),d("div",yt,[g[7]||(g[7]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,k(B.value),1)])):P("",!0),e("div",_t,[g[8]||(g[8]=e("h2",{class:"page-title"},"æ ç›®ç®¡ç†",-1)),e("div",$t,[C(e("input",{"onUpdate:modelValue":g[0]||(g[0]=A=>M.value=A),placeholder:"è¾“å…¥ä¸»èœå•åç§°",class:"input",onKeyup:we(_,["enter"])},null,544),[[S,M.value]]),e("button",{class:"btn btn-primary",onClick:_,disabled:v.value||!M.value.trim()}," + æ·»åŠ ä¸»èœå• ",8,Ct)])]),e("div",Mt,[i.value.length===0?(n(),d("div",xt,[...g[9]||(g[9]=[e("p",null,"æš‚æ— èœå•ï¼Œè¯·æ·»åŠ ç¬¬ä¸€ä¸ªä¸»èœå•",-1)])])):P("",!0),(n(!0),d(J,null,G(i.value,A=>(n(),d("div",{key:A.id,class:"menu-card"},[e("div",Vt,[e("div",Bt,[e("span",Ut,k(A.name),1),e("span",Dt,"æ’åº: "+k(A.order),1)]),e("div",At,[e("button",{class:"btn-icon btn-edit",onClick:N=>y(A),title:"ç¼–è¾‘"},[...g[10]||(g[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Tt),e("button",{class:"btn-icon btn-add",onClick:N=>j(A),title:"æ·»åŠ å­èœå•"},[...g[11]||(g[11]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1)])],8,St),e("button",{class:"btn-icon btn-delete",onClick:N=>Q(A),title:"åˆ é™¤"},[...g[12]||(g[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,It)])]),A.subMenus&&A.subMenus.length>0?(n(),d("div",Lt,[(n(!0),d(J,null,G(A.subMenus,N=>(n(),d("div",{key:N.id,class:"sub-menu-item"},[e("span",Wt,k(N.name),1),e("span",Nt,"æ’åº: "+k(N.order),1),e("div",zt,[e("button",{class:"btn-icon-sm btn-edit",onClick:T=>D(A,N),title:"ç¼–è¾‘"},[...g[13]||(g[13]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Pt),e("button",{class:"btn-icon-sm btn-delete",onClick:T=>oe(N),title:"åˆ é™¤"},[...g[14]||(g[14]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Et)])]))),128))])):(n(),d("div",Ht,[...g[15]||(g[15]=[e("span",null,"æš‚æ— å­èœå•",-1)])]))]))),128))]),L.value?(n(),d("div",Ft,[e("div",Ot,[e("div",Rt,[e("h3",null,k(U.value?"ç¼–è¾‘ä¸»èœå•":"æ·»åŠ å­èœå•"),1),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",jt,[e("div",qt,[g[16]||(g[16]=e("label",null,"åç§°",-1)),C(e("input",{"onUpdate:modelValue":g[1]||(g[1]=A=>x.value.name=A),type:"text",class:"input",placeholder:"è¯·è¾“å…¥åç§°"},null,512),[[S,x.value.name]])]),e("div",Jt,[g[17]||(g[17]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":g[2]||(g[2]=A=>x.value.order=A),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[S,x.value.order,void 0,{number:!0}]])])]),e("div",Gt,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:$,disabled:!x.value.name.trim()},"ä¿å­˜",8,Kt)])])])):P("",!0),a.value?(n(),d("div",Qt,[e("div",Xt,[e("div",Yt,[e("h3",null,"æ·»åŠ å­èœå•åˆ°ã€Œ"+k(p.value)+"ã€",1),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",Zt,[e("div",es,[g[18]||(g[18]=e("label",null,"å­èœå•åç§°",-1)),C(e("input",{"onUpdate:modelValue":g[3]||(g[3]=A=>u.value.name=A),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[S,u.value.name]])]),e("div",ts,[g[19]||(g[19]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":g[4]||(g[4]=A=>u.value.order=A),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[S,u.value.order,void 0,{number:!0}]])])]),e("div",ss,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:q,disabled:!u.value.name.trim()},"æ·»åŠ ",8,ls)])])])):P("",!0),b.value?(n(),d("div",as,[e("div",os,[e("div",{class:"modal-header"},[g[20]||(g[20]=e("h3",null,"ç¼–è¾‘å­èœå•",-1)),e("button",{class:"modal-close",onClick:O},"Ã—")]),e("div",ns,[e("div",is,[g[21]||(g[21]=e("label",null,"å­èœå•åç§°",-1)),C(e("input",{"onUpdate:modelValue":g[5]||(g[5]=A=>s.value.name=A),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[S,s.value.name]])]),e("div",ds,[g[22]||(g[22]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":g[6]||(g[6]=A=>s.value.order=A),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[S,s.value.order,void 0,{number:!0}]])])]),e("div",rs,[e("button",{class:"btn btn-cancel",onClick:O},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:z,disabled:!s.value.name.trim()},"ä¿å­˜",8,us)])])])):P("",!0)]))}},vs=Y(cs,[["__scopeId","data-v-7671c3a1"]]),ps={class:"card-manage"},ms={class:"card-header"},bs={class:"card-add"},gs=["value"],fs=["value"],hs={class:"card-card"},ws={class:"card-table"},ks=["onUpdate:modelValue","onBlur"],ys=["onUpdate:modelValue","onBlur"],_s=["onUpdate:modelValue","onBlur"],$s=["onUpdate:modelValue","onBlur"],Cs=["onClick"],Ms={key:0,class:"selected-tags"},xs={key:1,class:"tag-placeholder"},Vs=["onUpdate:modelValue","onBlur"],Bs=["onClick"],Us={class:"modal-body"},Ds={key:0,class:"empty-tags"},As={key:1,class:"tag-options"},Ts=["checked","onChange"],Ss={class:"modal-body"},Is={class:"duplicate-comparison"},Ls={class:"card-info-box existing"},Ws={class:"card-details"},Ns={class:"detail-row"},zs={class:"detail-value"},Ps={class:"detail-row"},Es={class:"detail-value url"},Hs={key:0,class:"detail-row"},Fs={class:"detail-value url"},Os={class:"card-info-box pending"},Rs={class:"card-details"},js={class:"detail-row"},qs={class:"detail-value"},Js={class:"detail-row"},Gs={class:"detail-value url"},Ks={key:0,class:"detail-row"},Qs={class:"detail-value url"},Xs={__name:"CardManage",setup(E){const i=f([]),v=f([]),B=f(),M=f(""),L=f(""),U=f(""),x=f(""),a=f([]),m=f(!1),p=f(null),u=f([]),b=f(!1),w=f(null),s=f(null),o=ae(()=>{if(!B.value)return[];const T=i.value.find(c=>c.id===B.value);return(T==null?void 0:T.subMenus)||[]});te(()=>V(null,null,function*(){const T=yield Be();i.value=T.data,i.value.length&&(B.value=i.value[0].id,M.value="");const c=yield Ue();a.value=c.data})),Me(B,()=>{M.value="",y()}),Me(M,y);function l(){M.value=""}function _(){y()}function y(){return V(this,null,function*(){if(!B.value)return;const T=yield Qe(B.value,M.value||null);v.value=T.data})}function $(){return V(this,null,function*(){if(!L.value||!U.value)return;const T=v.value.find(c=>Ke({title:L.value,url:U.value},c));T?(w.value=T,s.value={menu_id:B.value,sub_menu_id:M.value||null,title:L.value,url:U.value,logo_url:x.value},b.value=!0):yield O({menu_id:B.value,sub_menu_id:M.value||null,title:L.value,url:U.value,logo_url:x.value})})}function Q(T){return V(this,null,function*(){yield xe(T.id,{menu_id:B.value,sub_menu_id:M.value||null,title:T.title,url:T.url,logo_url:T.logo_url,desc:T.desc,order:T.order,tagIds:T.tags?T.tags.map(c=>c.id):[]}),y()})}function j(T){return V(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))return;const c=v.value.findIndex(ee=>ee.id===T);c>-1&&v.value.splice(c,1);try{yield Ve(T)}catch(ee){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",ee),yield y()}})}function q(T){p.value=T,u.value=T.tags?T.tags.map(c=>c.id):[],m.value=!0}function D(){m.value=!1,p.value=null,u.value=[]}function z(T){const c=u.value.indexOf(T);c>-1?u.value.splice(c,1):u.value.push(T)}function oe(){return V(this,null,function*(){p.value&&(yield xe(p.value.id,{menu_id:p.value.menu_id,sub_menu_id:p.value.sub_menu_id,title:p.value.title,url:p.value.url,logo_url:p.value.logo_url,desc:p.value.desc,order:p.value.order,tagIds:u.value}),D(),y())})}function O(T){return V(this,null,function*(){yield Xe(T),L.value="",U.value="",x.value="",y()})}function W(){b.value=!1,w.value=null,s.value=null}function g(){W(),L.value="",U.value="",x.value=""}function A(){return V(this,null,function*(){!s.value||!w.value||(yield Ve(w.value.id),yield O(s.value),W())})}function N(){s.value&&(L.value=s.value.title,U.value=s.value.url,x.value=s.value.logo_url||"",W(),alert("è¯·ä¿®æ”¹å¡ç‰‡ä¿¡æ¯åå†æ¬¡ç‚¹å‡»â€œæ·»åŠ å¡ç‰‡â€æŒ‰é’®"))}return(T,c)=>{var ee,ie,de,X,re,ue,Z,ce;return n(),d("div",ps,[e("div",ms,[c[9]||(c[9]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",bs,[C(e("select",{"onUpdate:modelValue":c[0]||(c[0]=I=>B.value=I),class:"input narrow",onChange:l},[(n(!0),d(J,null,G(i.value,I=>(n(),d("option",{value:I.id,key:I.id},k(I.name),9,gs))),128))],544),[[ke,B.value]]),C(e("select",{"onUpdate:modelValue":c[1]||(c[1]=I=>M.value=I),class:"input narrow",onChange:_},[c[7]||(c[7]=e("option",{value:""},"ä¸»èœå•",-1)),(n(!0),d(J,null,G(o.value,I=>(n(),d("option",{value:I.id,key:I.id},k(I.name),9,fs))),128))],544),[[ke,M.value]]),C(e("input",{"onUpdate:modelValue":c[2]||(c[2]=I=>L.value=I),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[S,L.value]]),C(e("input",{"onUpdate:modelValue":c[3]||(c[3]=I=>U.value=I),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[S,U.value]]),C(e("input",{"onUpdate:modelValue":c[4]||(c[4]=I=>x.value=I),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[S,x.value]]),e("button",{class:"btn",onClick:$},[...c[8]||(c[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ å¡ç‰‡ ",-1)])])])]),e("div",hs,[e("table",ws,[c[11]||(c[11]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(n(!0),d(J,null,G(v.value,I=>(n(),d("tr",{key:I.id},[e("td",null,[C(e("input",{"onUpdate:modelValue":r=>I.title=r,onBlur:r=>Q(I),class:"table-input"},null,40,ks),[[S,I.title]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":r=>I.url=r,onBlur:r=>Q(I),class:"table-input"},null,40,ys),[[S,I.url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":r=>I.logo_url=r,onBlur:r=>Q(I),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,_s),[[S,I.logo_url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":r=>I.desc=r,onBlur:r=>Q(I),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,$s),[[S,I.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:r=>q(I)},[I.tags&&I.tags.length>0?(n(),d("div",Ms,[(n(!0),d(J,null,G(I.tags,r=>(n(),d("span",{key:r.id,class:"mini-tag",style:ye({backgroundColor:r.color})},k(r.name),5))),128))])):(n(),d("span",xs,"é€‰æ‹©æ ‡ç­¾"))],8,Cs)]),e("td",null,[C(e("input",{"onUpdate:modelValue":r=>I.order=r,type:"number",onBlur:r=>Q(I),class:"table-input order-input"},null,40,Vs),[[S,I.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:r=>j(I.id),title:"åˆ é™¤"},[...c[10]||(c[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Bs)])]))),128))])])]),m.value?(n(),d("div",{key:0,class:"modal-overlay",onClick:D},[e("div",{class:"modal-content",onClick:c[5]||(c[5]=_e(()=>{},["stop"]))},[e("div",{class:"modal-header"},[c[12]||(c[12]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:D},"Ã—")]),e("div",Us,[a.value.length===0?(n(),d("div",Ds,[...c[13]||(c[13]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)])])):(n(),d("div",As,[(n(!0),d(J,null,G(a.value,I=>(n(),d("label",{key:I.id,class:"tag-option"},[e("input",{type:"checkbox",checked:u.value.includes(I.id),onChange:r=>z(I.id)},null,40,Ts),e("span",{class:"tag-label",style:ye({backgroundColor:I.color})},k(I.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:D},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:oe},"ç¡®å®š")])])])):P("",!0),b.value?(n(),d("div",{key:1,class:"modal-overlay",onClick:W},[e("div",{class:"modal-content duplicate-modal",onClick:c[6]||(c[6]=_e(()=>{},["stop"]))},[e("div",{class:"modal-header"},[c[14]||(c[14]=ne('<div class="header-with-icon" data-v-edd548d5><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" data-v-edd548d5><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-edd548d5></path><line x1="12" y1="9" x2="12" y2="13" data-v-edd548d5></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-edd548d5></line></svg><h3 data-v-edd548d5>æ£€æµ‹åˆ°é‡å¤å¡ç‰‡</h3></div>',1)),e("button",{class:"close-btn",onClick:W},"Ã—")]),e("div",Ss,[c[24]||(c[24]=e("div",{class:"duplicate-warning"},[e("p",{class:"warning-text"},"æ‚¨è¦æ·»åŠ çš„å¡ç‰‡ä¸ä»¥ä¸‹ç°æœ‰å¡ç‰‡é‡å¤ï¼š")],-1)),e("div",Is,[e("div",Ls,[c[18]||(c[18]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"ç°æœ‰å¡ç‰‡")],-1)),e("div",Ws,[e("div",Ns,[c[15]||(c[15]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",zs,k((ee=w.value)==null?void 0:ee.title),1)]),e("div",Ps,[c[16]||(c[16]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Es,k((ie=w.value)==null?void 0:ie.url),1)]),(de=w.value)!=null&&de.logo_url?(n(),d("div",Hs,[c[17]||(c[17]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Fs,k((X=w.value)==null?void 0:X.logo_url),1)])):P("",!0)])]),c[23]||(c[23]=e("div",{class:"arrow-divider"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1)),e("div",Os,[c[22]||(c[22]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"å¾…æ·»åŠ å¡ç‰‡")],-1)),e("div",Rs,[e("div",js,[c[19]||(c[19]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",qs,k((re=s.value)==null?void 0:re.title),1)]),e("div",Js,[c[20]||(c[20]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Gs,k((ue=s.value)==null?void 0:ue.url),1)]),(Z=s.value)!=null&&Z.logo_url?(n(),d("div",Ks,[c[21]||(c[21]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Qs,k((ce=s.value)==null?void 0:ce.logo_url),1)])):P("",!0)])])]),c[25]||(c[25]=e("div",{class:"duplicate-actions-info"},[e("p",null,"è¯·é€‰æ‹©å¦‚ä½•å¤„ç†ï¼š")],-1))]),e("div",{class:"modal-footer duplicate-footer"},[e("button",{class:"btn btn-secondary",onClick:g},[...c[26]||(c[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),H(" è·³è¿‡ ",-1)])]),e("button",{class:"btn btn-warning",onClick:A},[...c[27]||(c[27]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1),H(" æ›¿æ¢ ",-1)])]),e("button",{class:"btn btn-primary",onClick:N},[...c[28]||(c[28]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),H(" ç¼–è¾‘åæ·»åŠ  ",-1)])])])])])):P("",!0)])}}},Ys=Y(Xs,[["__scopeId","data-v-edd548d5"]]),Zs={class:"duplicate-manage"},el={class:"section-header"},tl=["disabled"],sl={key:0,class:"duplicate-results"},ll={class:"result-summary"},al={class:"summary-card"},ol={class:"summary-value"},nl={class:"summary-card warning"},il={class:"summary-value"},dl={class:"summary-card danger"},rl={class:"summary-value"},ul={class:"duplicate-groups"},cl={class:"group-header"},vl={class:"group-count"},pl={class:"card-item original"},ml={class:"card-info"},bl={class:"card-title"},gl={class:"card-url"},fl={key:0,class:"card-desc"},hl={class:"card-id"},wl={class:"duplicates-list"},kl={class:"card-info"},yl={class:"card-title"},_l={class:"card-url"},$l={key:0,class:"card-desc"},Cl={class:"card-actions"},Ml={class:"card-id"},xl=["onClick","disabled"],Vl={class:"group-actions"},Bl=["onClick","disabled"],Ul={class:"global-actions"},Dl=["disabled"],Al={key:1,class:"no-duplicates"},Tl={key:2,class:"initial-hint"},Sl={key:3,class:"error"},Il={__name:"DuplicateManage",setup(E){const i=f(!1),v=f(!1),B=f(!1),M=f([]),L=f(0),U=f(0),x=f("");function a(){return V(this,null,function*(){var b,w;i.value=!0,x.value="";try{const s=yield Ye();L.value=s.data.total,M.value=s.data.duplicateGroups,U.value=s.data.duplicateCount,B.value=!0}catch(s){x.value=((w=(b=s.response)==null?void 0:b.data)==null?void 0:w.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",s)}finally{i.value=!1}})}function m(b){return V(this,null,function*(){var w,s,o;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){v.value=!0,x.value="";try{console.log("[å»é‡ç®¡ç†] åˆ é™¤å•ä¸ªå¡ç‰‡:",b);const l=yield he([b]);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",l.data),l.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):x.value="åˆ é™¤å¤±è´¥ï¼š"+(l.data.message||"æœªçŸ¥é”™è¯¯")}catch(l){console.error("[å»é‡ç®¡ç†] åˆ é™¤å¡ç‰‡å¤±è´¥:",l),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(w=l.response)==null?void 0:w.data),x.value=((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}function p(b){return V(this,null,function*(){var s,o,l;const w=b.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${w} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${b.original.title}`)){v.value=!0,x.value="";try{const _=b.duplicates.map($=>$.id);console.log("[å»é‡ç®¡ç†] åˆ é™¤ä¸€ç»„é‡å¤å¡ç‰‡:",_);const y=yield he(_);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",y.data),y.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):x.value="åˆ é™¤å¤±è´¥ï¼š"+(y.data.message||"æœªçŸ¥é”™è¯¯")}catch(_){console.error("[å»é‡ç®¡ç†] åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",_),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(s=_.response)==null?void 0:s.data),x.value=((l=(o=_.response)==null?void 0:o.data)==null?void 0:l.error)||_.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}function u(){return V(this,null,function*(){var w,s,o;const b=U.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${b} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){v.value=!0,x.value="";try{const l=M.value.flatMap(y=>y.duplicates.map($=>$.id));console.log("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡:",l);const _=yield he(l);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",_.data),_.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield a()):x.value="åˆ é™¤å¤±è´¥ï¼š"+(_.data.message||"æœªçŸ¥é”™è¯¯")}catch(l){console.error("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",l),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(w=l.response)==null?void 0:w.data),x.value=((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message||"åˆ é™¤å¤±è´¥"}finally{v.value=!1}}})}return(b,w)=>(n(),d("div",Zs,[e("div",el,[w[0]||(w[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:a,class:"btn btn-primary",disabled:i.value},k(i.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,tl)]),M.value.length>0?(n(),d("div",sl,[e("div",ll,[e("div",al,[w[1]||(w[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",ol,k(L.value),1)]),e("div",nl,[w[2]||(w[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",il,k(M.value.length),1)]),e("div",dl,[w[3]||(w[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",rl,k(U.value),1)])]),e("div",ul,[(n(!0),d(J,null,G(M.value,(s,o)=>(n(),d("div",{key:o,class:"duplicate-group"},[e("div",cl,[e("h4",null,"é‡å¤ç»„ "+k(o+1),1),e("span",vl,k(s.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",pl,[w[4]||(w[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",ml,[e("div",bl,k(s.original.title),1),e("div",gl,k(s.original.url),1),s.original.desc?(n(),d("div",fl,k(s.original.desc),1)):P("",!0)]),e("div",hl,"ID: "+k(s.original.id),1)]),e("div",wl,[(n(!0),d(J,null,G(s.duplicates,l=>(n(),d("div",{key:l.id,class:"card-item duplicate"},[w[5]||(w[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",kl,[e("div",yl,k(l.title),1),e("div",_l,k(l.url),1),l.desc?(n(),d("div",$l,k(l.desc),1)):P("",!0)]),e("div",Cl,[e("span",Ml,"ID: "+k(l.id),1),e("button",{onClick:_=>m(l.id),class:"btn-remove",disabled:v.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,xl)])]))),128))]),e("div",Vl,[e("button",{onClick:l=>p(s),class:"btn btn-danger",disabled:v.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+k(s.duplicates.length)+" å¼ ) ",9,Bl)])]))),128))]),e("div",Ul,[e("button",{onClick:u,class:"btn btn-danger btn-large",disabled:v.value},k(v.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${U.value} å¼ )`),9,Dl)])])):B.value&&M.value.length===0?(n(),d("div",Al,[...w[6]||(w[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)])])):B.value?P("",!0):(n(),d("div",Tl,[...w[7]||(w[7]=[ne('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-62bbc778><circle cx="12" cy="12" r="10" data-v-62bbc778></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-62bbc778></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-62bbc778></line></svg><h3 data-v-62bbc778>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-62bbc778>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-62bbc778><li data-v-62bbc778>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-62bbc778>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)])])),x.value?(n(),d("p",Sl,k(x.value),1)):P("",!0)]))}},Ll=Y(Il,[["__scopeId","data-v-62bbc778"]]),Wl={class:"tag-manage"},Nl={class:"tag-header"},zl={class:"tag-add"},Pl={class:"tag-content"},El={key:0,class:"empty-state"},Hl={key:1,class:"tag-list"},Fl={class:"tag-info"},Ol=["onUpdate:modelValue","onBlur"],Rl={class:"tag-stats"},jl={class:"card-count"},ql={class:"tag-controls"},Jl=["onUpdate:modelValue","onChange"],Gl={class:"tag-order"},Kl=["onUpdate:modelValue","onBlur"],Ql={class:"tag-actions"},Xl=["onClick"],Yl={__name:"TagManage",setup(E){const i=f([]),v=f(""),B=f("#2566d8");te(M);function M(){return V(this,null,function*(){const a=yield Ue();i.value=a.data;for(const m of i.value)try{const p=yield Ze(m.id);m.cardCount=p.data.count}catch(p){m.cardCount=0}})}function L(){return V(this,null,function*(){var b,w;if(!v.value.trim())return;const a=i.value.length?Math.max(...i.value.map(s=>s.order||0)):0,m=v.value.trim(),p=B.value,u={id:Date.now(),name:m,color:p,order:a+1,cardCount:0,_temp:!0};i.value.push(u),v.value="",B.value="#2566d8";try{const s=yield et({name:m,color:p,order:a+1}),o=i.value.findIndex(l=>l.id===u.id);o>-1&&(i.value[o]=ge(pe({},s.data),{cardCount:0}))}catch(s){const o=i.value.findIndex(l=>l.id===u.id);o>-1&&i.value.splice(o,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((w=(b=s.response)==null?void 0:b.data)==null?void 0:w.error)||s.message))}})}function U(a){return V(this,null,function*(){var m,p;if(!a._temp)try{yield tt(a.id,{name:a.name,color:a.color,order:a.order})}catch(u){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((p=(m=u.response)==null?void 0:m.data)==null?void 0:p.error)||u.message)),M()}})}function x(a){return V(this,null,function*(){var b,w;const m=i.value.find(s=>s.id===a);if(!m)return;const p=m.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${m.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${m.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${m.name}"å—ï¼Ÿ`;if(!confirm(p))return;const u=i.value.findIndex(s=>s.id===a);u>-1&&i.value.splice(u,1);try{yield st(a)}catch(s){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((w=(b=s.response)==null?void 0:b.data)==null?void 0:w.error)||s.message)),M()}})}return(a,m)=>(n(),d("div",Wl,[e("div",Nl,[m[3]||(m[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",zl,[C(e("input",{"onUpdate:modelValue":m[0]||(m[0]=p=>v.value=p),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[S,v.value]]),C(e("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>B.value=p),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[S,B.value]]),e("button",{class:"btn btn-primary",onClick:L},[...m[2]||(m[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ æ ‡ç­¾ ",-1)])])])]),e("div",Pl,[i.value.length===0?(n(),d("div",El,[...m[4]||(m[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)])])):(n(),d("div",Hl,[(n(!0),d(J,null,G(i.value,p=>(n(),d("div",{key:p.id,class:"tag-item"},[e("div",{class:"tag-preview",style:ye({backgroundColor:p.color})},[...m[5]||(m[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)])],4),e("div",Fl,[C(e("input",{"onUpdate:modelValue":u=>p.name=u,onBlur:u=>U(p),class:"tag-name-input",maxlength:"20"},null,40,Ol),[[S,p.name]]),e("div",Rl,[e("span",jl,k(p.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",ql,[C(e("input",{"onUpdate:modelValue":u=>p.color=u,type:"color",onChange:u=>U(p),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,Jl),[[S,p.color]]),e("div",Gl,[m[6]||(m[6]=e("span",{class:"order-label"},"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":u=>p.order=u,type:"number",onBlur:u=>U(p),class:"order-input"},null,40,Kl),[[S,p.order,void 0,{number:!0}]])])]),e("div",Ql,[e("button",{class:"btn btn-danger btn-icon",onClick:u=>x(p.id),title:"åˆ é™¤æ ‡ç­¾"},[...m[7]||(m[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Xl)])]))),128))]))])]))}},Zl=Y(Yl,[["__scopeId","data-v-56efcb56"]]),ea={class:"promo-manage"},ta={key:0,class:"loading-overlay"},sa={class:"promo-header"},la={class:"promo-form"},aa=["disabled"],oa={class:"promo-section"},na={class:"promo-list"},ia={key:0,class:"empty-state"},da={class:"promo-preview"},ra=["src"],ua={class:"promo-info"},ca={class:"promo-field"},va=["onUpdate:modelValue","onBlur"],pa={class:"promo-field"},ma=["onUpdate:modelValue","onBlur"],ba={class:"promo-actions"},ga=["onClick"],fa={class:"promo-section"},ha={class:"promo-list"},wa={key:0,class:"empty-state"},ka={class:"promo-preview"},ya=["src"],_a={class:"promo-info"},$a={class:"promo-field"},Ca=["onUpdate:modelValue","onBlur"],Ma={class:"promo-field"},xa=["onUpdate:modelValue","onBlur"],Va={class:"promo-actions"},Ba=["onClick"],be="/api",Ua={__name:"PromoManage",setup(E){const i=()=>localStorage.getItem("token")||"",v=()=>({Authorization:`Bearer ${i()}`}),B=f([]),M=f(!1),L=f("åŠ è½½ä¸­..."),U=f({img:"",url:"",position:"left"}),x=ae(()=>B.value.filter(s=>s.position==="left")),a=ae(()=>B.value.filter(s=>s.position==="right"));te(()=>{m()});function m(){return V(this,null,function*(){var s,o;M.value=!0,L.value="åŠ è½½ä¸­...";try{const l=yield me.get(`${be}/promos`);let _=[];Array.isArray(l.data)?_=l.data:l.data&&Array.isArray(l.data.data)&&(_=l.data.data),B.value=_}catch(l){console.error("åŠ è½½å®£ä¼ å¤±è´¥:",l),alert("åŠ è½½å®£ä¼ å¤±è´¥: "+(((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message))}finally{M.value=!1}})}function p(){return V(this,null,function*(){var s,o;if(!U.value.img||!U.value.url){alert("è¯·å¡«å†™å®£ä¼ å›¾ç‰‡é“¾æ¥å’Œè·³è½¬é“¾æ¥");return}M.value=!0,L.value="æ·»åŠ ä¸­...";try{yield me.post(`${be}/promos`,U.value,{headers:v()}),U.value={img:"",url:"",position:"left"},yield m()}catch(l){alert("æ·»åŠ å¤±è´¥: "+(((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message)),M.value=!1}})}function u(s){return V(this,null,function*(){var o,l;try{yield me.put(`${be}/promos/${s.id}`,{img:s.img,url:s.url},{headers:v()})}catch(_){alert("æ›´æ–°å¤±è´¥: "+(((l=(o=_.response)==null?void 0:o.data)==null?void 0:l.error)||_.message)),yield m()}})}function b(s){return V(this,null,function*(){var o,l;if(confirm("ç¡®å®šåˆ é™¤è¿™ä¸ªå®£ä¼ å—ï¼Ÿ")){M.value=!0,L.value="åˆ é™¤ä¸­...";try{yield me.delete(`${be}/promos/${s.id}`,{headers:v()}),yield m()}catch(_){alert("åˆ é™¤å¤±è´¥: "+(((l=(o=_.response)==null?void 0:o.data)==null?void 0:l.error)||_.message)),M.value=!1}}})}function w(s){s.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="60"><rect fill="%23f0f0f0" width="100" height="60"/><text x="50" y="35" text-anchor="middle" fill="%23999" font-size="12">å›¾ç‰‡åŠ è½½å¤±è´¥</text></svg>'}return(s,o)=>(n(),d("div",ea,[M.value?(n(),d("div",ta,[o[3]||(o[3]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,k(L.value),1)])):P("",!0),e("div",sa,[o[5]||(o[5]=e("h2",{class:"page-title"},"å®£ä¼ ç®¡ç†",-1)),e("div",la,[C(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>U.value.img=l),placeholder:"å®£ä¼ å›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[S,U.value.img]]),C(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>U.value.url=l),placeholder:"å®£ä¼ è·³è½¬é“¾æ¥",class:"input"},null,512),[[S,U.value.url]]),C(e("select",{"onUpdate:modelValue":o[2]||(o[2]=l=>U.value.position=l),class:"input select"},[...o[4]||(o[4]=[e("option",{value:"left"},"å·¦ä¾§å®£ä¼ ",-1),e("option",{value:"right"},"å³ä¾§å®£ä¼ ",-1)])],512),[[ke,U.value.position]]),e("button",{class:"btn btn-primary",onClick:p,disabled:!U.value.img||!U.value.url}," + æ·»åŠ å®£ä¼  ",8,aa)])]),e("div",oa,[o[8]||(o[8]=e("h3",{class:"section-title"},"ğŸ“ å·¦ä¾§å®£ä¼ ",-1)),e("div",na,[x.value.length===0?(n(),d("div",ia,"æš‚æ— å·¦ä¾§å®£ä¼ ")):P("",!0),(n(!0),d(J,null,G(x.value,l=>(n(),d("div",{key:l.id,class:"promo-card"},[e("div",da,[e("img",{src:l.img,alt:"å®£ä¼ å›¾ç‰‡",onError:w},null,40,ra)]),e("div",ua,[e("div",ca,[o[6]||(o[6]=e("label",null,"å›¾ç‰‡é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":_=>l.img=_,class:"input",onBlur:_=>u(l)},null,40,va),[[S,l.img]])]),e("div",pa,[o[7]||(o[7]=e("label",null,"è·³è½¬é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":_=>l.url=_,class:"input",onBlur:_=>u(l)},null,40,ma),[[S,l.url]])])]),e("div",ba,[e("button",{class:"btn btn-danger",onClick:_=>b(l)},"åˆ é™¤",8,ga)])]))),128))])]),e("div",fa,[o[11]||(o[11]=e("h3",{class:"section-title"},"ğŸ“ å³ä¾§å®£ä¼ ",-1)),e("div",ha,[a.value.length===0?(n(),d("div",wa,"æš‚æ— å³ä¾§å®£ä¼ ")):P("",!0),(n(!0),d(J,null,G(a.value,l=>(n(),d("div",{key:l.id,class:"promo-card"},[e("div",ka,[e("img",{src:l.img,alt:"å®£ä¼ å›¾ç‰‡",onError:w},null,40,ya)]),e("div",_a,[e("div",$a,[o[9]||(o[9]=e("label",null,"å›¾ç‰‡é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":_=>l.img=_,class:"input",onBlur:_=>u(l)},null,40,Ca),[[S,l.img]])]),e("div",Ma,[o[10]||(o[10]=e("label",null,"è·³è½¬é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":_=>l.url=_,class:"input",onBlur:_=>u(l)},null,40,xa),[[S,l.url]])])]),e("div",Va,[e("button",{class:"btn btn-danger",onClick:_=>b(l)},"åˆ é™¤",8,Ba)])]))),128))])])]))}},Da=Y(Ua,[["__scopeId","data-v-0221fbc3"]]),Aa={class:"friend-manage"},Ta={class:"friend-add"},Sa={class:"friend-card"},Ia={class:"friend-table"},La=["onUpdate:modelValue","onBlur"],Wa=["onUpdate:modelValue","onBlur"],Na=["onUpdate:modelValue","onBlur"],za=["onClick"],Pa={__name:"FriendLinkManage",setup(E){const i=f([]),v=f(""),B=f(""),M=f("");te(L);function L(){return V(this,null,function*(){const m=yield lt();i.value=m.data})}function U(){return V(this,null,function*(){!v.value||!B.value||(yield at({title:v.value,url:B.value,logo:M.value}),v.value="",B.value="",M.value="",L())})}function x(m){return V(this,null,function*(){yield ot(m.id,{title:m.title,url:m.url,logo:m.logo}),L()})}function a(m){return V(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‹é“¾å—ï¼Ÿ"))return;const p=i.value.findIndex(u=>u.id===m);p>-1&&i.value.splice(p,1);try{yield nt(m)}catch(u){console.error("åˆ é™¤å‹é“¾å¤±è´¥:",u),yield L()}})}return(m,p)=>(n(),d("div",Aa,[p[4]||(p[4]=e("div",{class:"friend-header"},null,-1)),e("div",Ta,[C(e("input",{"onUpdate:modelValue":p[0]||(p[0]=u=>v.value=u),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[S,v.value]]),C(e("input",{"onUpdate:modelValue":p[1]||(p[1]=u=>B.value=u),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[S,B.value]]),C(e("input",{"onUpdate:modelValue":p[2]||(p[2]=u=>M.value=u),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[S,M.value]]),e("button",{class:"btn",onClick:U},"æ·»åŠ å‹é“¾")]),e("div",Sa,[e("table",Ia,[p[3]||(p[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(n(!0),d(J,null,G(i.value,u=>(n(),d("tr",{key:u.id},[e("td",null,[C(e("input",{"onUpdate:modelValue":b=>u.title=b,onBlur:b=>x(u),class:"input"},null,40,La),[[S,u.title]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":b=>u.url=b,onBlur:b=>x(u),class:"input"},null,40,Wa),[[S,u.url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":b=>u.logo=b,onBlur:b=>x(u),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,Na),[[S,u.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:b=>a(u.id)},"åˆ é™¤",8,za)])]))),128))])])])]))}},Ea=Y(Pa,[["__scopeId","data-v-c25e838c"]]),Ha={class:"user-manage"},Fa={class:"user-card"},Oa={class:"username-section"},Ra={class:"username-form"},ja={class:"current-username"},qa={class:"username-display"},Ja={class:"form-group"},Ga={class:"form-actions"},Ka=["disabled"],Qa={class:"password-section"},Xa={class:"password-form"},Ya={class:"form-group"},Za={class:"form-group"},eo={class:"form-group"},to={class:"form-actions"},so=["disabled"],lo={__name:"UserManage",setup(E){const i=f(""),v=f(""),B=f(""),M=f(!1),L=f(""),U=f("success"),x=f({}),a=f(""),m=f(!1),p=f(""),u=f("success");te(()=>V(null,null,function*(){yield b()}));function b(){return V(this,null,function*(){try{const _=yield it();x.value=_.data.data||_.data}catch(_){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",_)}})}function w(){return V(this,null,function*(){var _,y;if(!a.value){s("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(a.value.length<3||a.value.length>20){s("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(a.value===x.value.username){s("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}m.value=!0,p.value="";try{yield dt(a.value),s("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),a.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch($){s(((y=(_=$.response)==null?void 0:_.data)==null?void 0:y.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{m.value=!1}})}function s(_,y){p.value=_,u.value=y,setTimeout(()=>{p.value=""},3e3)}function o(){return V(this,null,function*(){var _,y;if(!i.value||!v.value||!B.value){l("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(v.value!==B.value){l("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(v.value.length<6){l("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}M.value=!0,L.value="";try{yield rt(i.value,v.value),l("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),i.value="",v.value="",B.value=""}catch($){l(((y=(_=$.response)==null?void 0:_.data)==null?void 0:y.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{M.value=!1}})}function l(_,y){L.value=_,U.value=y,_==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&y==="success"?setTimeout(()=>{L.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{L.value=""},3e3)}return(_,y)=>(n(),d("div",Ha,[y[11]||(y[11]=e("div",{class:"user-header"},null,-1)),e("div",Fa,[e("div",Oa,[y[6]||(y[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",Ra,[e("div",ja,[y[4]||(y[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",qa,k(x.value.username||"admin"),1)]),e("div",Ja,[y[5]||(y[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),C(e("input",{"onUpdate:modelValue":y[0]||(y[0]=$=>a.value=$),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[S,a.value]])]),e("div",Ga,[e("button",{onClick:w,class:"btn",disabled:m.value},k(m.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,Ka)]),p.value?(n(),d("p",{key:0,class:F(["message",u.value])},k(p.value),3)):P("",!0)])]),e("div",Qa,[y[10]||(y[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",Xa,[e("div",Ya,[y[7]||(y[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":y[1]||(y[1]=$=>i.value=$),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[S,i.value]])]),e("div",Za,[y[8]||(y[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":y[2]||(y[2]=$=>v.value=$),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[S,v.value]])]),e("div",eo,[y[9]||(y[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":y[3]||(y[3]=$=>B.value=$),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[S,B.value]])]),e("div",to,[e("button",{onClick:o,class:"btn",disabled:M.value},k(M.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,so)]),L.value?(n(),d("p",{key:0,class:F(["message",U.value])},k(L.value),3)):P("",!0)])])])]))}},ao=Y(lo,[["__scopeId","data-v-40392133"]]),oo={class:"backup-manage"},no={class:"tabs"},io={class:"tab-content"},ro={class:"toolbar"},uo=["disabled"],co=["disabled"],vo=["disabled"],po={class:"backup-list"},mo={key:0,class:"empty-state"},bo={key:1,class:"backup-grid"},go={class:"backup-info"},fo={class:"backup-name"},ho={class:"backup-meta"},wo={class:"backup-size"},ko={class:"backup-date"},yo={key:0,class:"backup-signed",title:"å·²ç­¾åéªŒè¯"},_o={key:1,class:"backup-unsigned",title:"æœªç­¾åï¼ˆå¤–éƒ¨ä¸Šä¼ ï¼‰"},$o={class:"backup-actions"},Co=["onClick"],Mo=["onClick"],xo=["onClick"],Vo=["onClick"],Bo={class:"tab-content"},Uo={class:"toolbar"},Do=["disabled"],Ao=["disabled"],To={key:1,class:"info-box"},So={class:"backup-list"},Io={key:0,class:"empty-state"},Lo={key:1,class:"backup-grid"},Wo={class:"backup-info"},No={class:"backup-name"},zo={class:"backup-meta"},Po={class:"backup-size"},Eo={class:"backup-date"},Ho={class:"backup-actions"},Fo=["onClick"],Oo=["onClick"],Ro={class:"tab-content"},jo={class:"config-section"},qo={class:"config-card"},Jo={class:"config-header"},Go={class:"switch"},Ko={key:0,class:"config-fields"},Qo={class:"field-row"},Xo={class:"field-row"},Yo={class:"config-card"},Zo={class:"config-header"},en={class:"switch"},tn={key:0,class:"config-fields"},sn={class:"field-row"},ln={class:"time-input"},an={class:"field-row"},on={class:"field-row checkbox-row"},nn={class:"checkbox-label"},dn={class:"config-card"},rn={class:"config-header"},un={class:"switch"},cn={class:"config-info"},vn={key:0,class:"warning-text"},pn={key:0,class:"config-fields"},mn={class:"field-row checkbox-row"},bn={class:"checkbox-label"},gn={class:"field-row checkbox-row"},fn={class:"checkbox-label"},hn={class:"config-card"},wn={class:"config-header"},kn={class:"switch"},yn={key:0,class:"stats-card"},_n={class:"stats-grid"},$n={class:"stat-item"},Cn={class:"stat-value"},Mn={class:"stat-item"},xn={class:"stat-value"},Vn={class:"stat-item"},Bn={class:"stat-value"},Un={class:"stat-item"},Dn={class:"stat-value"},An={class:"config-actions"},Tn=["disabled"],Sn={key:0,class:"modal-overlay"},In={class:"modal-content config-modal"},Ln={class:"form-group"},Wn={class:"form-group"},Nn={class:"form-group"},zn=["placeholder"],Pn={key:0},En={key:1},Hn={class:"modal-actions"},Fn=["disabled"],On={key:1,class:"modal-overlay"},Rn={class:"modal-content"},jn={style:{"white-space":"pre-line"}},qn={class:"modal-actions"},Jn=["disabled"],Gn=["disabled"],Kn={key:2,class:"modal-overlay"},Qn={class:"modal-content config-modal"},Xn={class:"form-group"},Yn={class:"form-group"},Zn={class:"modal-actions"},ei=["disabled"],ti={key:3,class:"modal-overlay"},si={class:"modal-content config-modal"},li={class:"form-group"},ai={class:"modal-actions"},oi=["disabled"],ni={__name:"BackupManage",setup(E){const i=f("local"),v=f([]),B=f([]),M=f(!1),L=f(!1),U=f(!1),x=f(null),a=se({create:!1,list:!1,delete:!1,restore:!1,upload:!1,rename:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),m=se({name:"",description:""}),p=se({oldName:"",newName:""}),u=f({text:"",type:""}),b=se({show:!1,filename:"",action:null,title:"",message:"",confirmClass:"",signed:!0,processing:!1}),w=se({configured:!1,url:"",username:""}),s=se({url:"",username:"",password:""}),o=se({debounce:{enabled:!0,delay:30,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!0},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!0},autoClean:!0}),l=f(null),_=localStorage.getItem("token");function y(R){return V(this,arguments,function*(r,t={}){return(yield fetch(r,ge(pe({},t),{headers:pe({Authorization:`Bearer ${_}`,"Content-Type":"application/json"},t.headers)}))).json()})}const $=(r,t="success",R=4e3)=>{u.value={text:r,type:t},setTimeout(()=>{u.value={text:"",type:""}},t==="error"?6e3:R)},Q=()=>{m.name="",m.description="",L.value=!0},j=()=>V(null,null,function*(){a.create=!0;const r=yield y("/api/backup/create",{method:"POST",body:JSON.stringify({name:m.name||null,description:m.description||null})});r.success?($("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),L.value=!1,yield z()):$(r.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),a.create=!1}),q=r=>{p.oldName=r,p.newName=r.replace(".zip",""),U.value=!0},D=()=>V(null,null,function*(){if(!p.newName.trim()){$("è¯·è¾“å…¥æ–°åç§°","error");return}a.rename=!0;const r=yield y(`/api/backup/rename/${p.oldName}`,{method:"PUT",body:JSON.stringify({newName:p.newName})});r.success?($("é‡å‘½åæˆåŠŸï¼"),U.value=!1,yield z()):$(r.message||"é‡å‘½åå¤±è´¥","error"),a.rename=!1}),z=()=>V(null,null,function*(){a.list=!0;const r=yield y("/api/backup/list");r.success?v.value=r.backups:$("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.list=!1}),oe=r=>{window.open(`/api/backup/download/${r}?token=${_}`,"_blank")},O=(r,t)=>{const R=typeof t=="object"?t:{name:t},h=R.name;b.show=!0,b.filename=h,b.action=r,b.signed=R.signed,b.processing=!1,r==="delete"?(b.title="åˆ é™¤",b.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`,b.confirmClass="btn-danger"):r==="restore"?(b.title="æ¢å¤",R.signed?b.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`:b.message=`âš ï¸ è­¦å‘Šï¼šæ­¤å¤‡ä»½æ–‡ä»¶æœªç­¾åï¼ˆå¯èƒ½æ˜¯å¤–éƒ¨ä¸Šä¼ çš„ï¼‰ï¼Œæ— æ³•éªŒè¯å…¶å®Œæ•´æ€§ã€‚

ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${h} å—ï¼Ÿ`,b.confirmClass="btn-restore"):r==="webdav-restore"?(b.title="ä»WebDAVæ¢å¤",b.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${h} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,b.confirmClass="btn-restore"):r==="webdav-delete"&&(b.title="åˆ é™¤WebDAVå¤‡ä»½",b.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${h} å—ï¼Ÿ`,b.confirmClass="btn-danger")},W=()=>V(null,null,function*(){const{action:r,filename:t,signed:R}=b;b.show=!1,b.processing=!1;try{if(r==="delete"){$("æ­£åœ¨åˆ é™¤å¤‡ä»½...");const h=yield y(`/api/backup/delete/${t}`,{method:"DELETE"});h.success?($("âœ“ åˆ é™¤æˆåŠŸ"),yield z()):$("âœ— "+(h.message||"åˆ é™¤å¤±è´¥"),"error")}else if(r==="restore"){$("æ­£åœ¨æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™...");const h=R?{}:{forceRestore:!0},K=yield y(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify(h)});if(K.success)$("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(ve=>setTimeout(ve,2e3)),yield Promise.all([z(),T(),X(),Z()]),$("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3);else if(K.requireConfirm&&K.code==="NO_SIGNATURE"){if(confirm(K.message+`

ç‚¹å‡»"ç¡®å®š"ç»§ç»­æ¢å¤ï¼Œç‚¹å‡»"å–æ¶ˆ"æ”¾å¼ƒæ“ä½œã€‚`)){const ve=yield y(`/api/backup/restore/${t}`,{method:"POST",body:JSON.stringify({forceRestore:!0})});ve.success?($("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(De=>setTimeout(De,2e3)),yield Promise.all([z(),T(),X(),Z()]),$("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):$("âœ— "+(ve.message||"æ¢å¤å¤±è´¥"),"error")}}else $("âœ— "+(K.message||"æ¢å¤å¤±è´¥"),"error")}else r==="webdav-restore"?yield re(t):r==="webdav-delete"&&(yield ue(t))}catch(h){$("âœ— æ“ä½œå¤±è´¥: "+h.message,"error")}}),g=r=>r?new Date(r).toLocaleString("zh-CN",{hour12:!1}):"--",A=()=>{x.value.click()},N=r=>V(null,null,function*(){const t=r.target.files[0];if(t){if(!t.name.endsWith(".zip")){$("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),r.target.value="";return}if(t.size>500*1024*1024){$("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),r.target.value="";return}a.upload=!0;try{const R=new FormData;R.append("backup",t);const K=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${_}`},body:R})).json();K.success?($("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield z()):$(K.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(R){console.error("ä¸Šä¼ å¤±è´¥:",R),$("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{a.upload=!1,r.target.value=""}}}),T=()=>V(null,null,function*(){const r=yield y("/api/backup/webdav/config");r.success&&r.config&&(w.configured=r.config.configured,w.url=r.config.url||"",w.username=r.config.username||"")}),c=()=>V(null,null,function*(){yield T(),s.url=w.url,s.username=w.username,s.password="",M.value=!0}),ee=()=>V(null,null,function*(){if(!s.url||!s.username){$("è¯·å¡«å†™URLå’Œç”¨æˆ·å","error");return}if(!w.configured&&!s.password){$("é¦–æ¬¡é…ç½®æ—¶å¯†ç ä¸èƒ½ä¸ºç©º","error");return}a.webdavConfig=!0;const r=yield y("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(s)});r.success?($("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),M.value=!1,yield T(),w.configured&&(yield X())):$(r.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),a.webdavConfig=!1}),ie=()=>V(null,null,function*(){a.webdavBackup=!0;const r=yield y("/api/backup/webdav/backup",{method:"POST"});r.success?($("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield X()):$(r.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),a.webdavBackup=!1}),de=r=>{r.target.checked&&!w.configured&&(o.webdav.enabled=!1,$('è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®WebDAVè¿æ¥',"error"),i.value="webdav")},X=()=>V(null,null,function*(){a.webdavList=!0;const r=yield y("/api/backup/webdav/list");r.success?B.value=r.backups||[]:$("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),a.webdavList=!1}),re=r=>V(null,null,function*(){$("æ­£åœ¨ä» WebDAV æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™..."),a.webdavRestore=!0;try{const t=yield y("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:r})});t.success?($("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(R=>setTimeout(R,2e3)),yield Promise.all([z(),T(),X(),Z()]),$("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):$("âœ— "+(t.message||"ä» WebDAV æ¢å¤å¤±è´¥"),"error")}catch(t){$("âœ— æ¢å¤å¤±è´¥: "+t.message,"error")}finally{a.webdavRestore=!1}}),ue=r=>V(null,null,function*(){$("æ­£åœ¨åˆ é™¤ WebDAV å¤‡ä»½..."),a.webdavDelete=!0;try{const t=yield y(`/api/backup/webdav/delete/${r}`,{method:"DELETE"});t.success?($("âœ“ åˆ é™¤æˆåŠŸ"),yield X()):$("âœ— "+(t.message||"åˆ é™¤å¤±è´¥"),"error")}catch(t){$("âœ— åˆ é™¤å¤±è´¥: "+t.message,"error")}finally{a.webdavDelete=!1}}),Z=()=>V(null,null,function*(){const r=yield y("/api/backup/auto/config");r.success&&r.config?(Object.assign(o,r.config),l.value=r.stats||null):$("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),ce=()=>V(null,null,function*(){a.autoBackupConfig=!0;const r=yield y("/api/backup/auto/config",{method:"POST",body:JSON.stringify(o)});r.success?($("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield Z()):$(r.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),a.autoBackupConfig=!1}),I=()=>{if(!o.scheduled.enabled)return"æœªå¯ç”¨";const r=String(o.scheduled.hour).padStart(2,"0"),t=String(o.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${r}:${t}`};return te(()=>V(null,null,function*(){yield z(),yield T(),w.configured&&(yield X()),yield Z()})),(r,t)=>{var R;return n(),d("div",oo,[e("div",no,[e("button",{class:F(["tab",{active:i.value==="local"}]),onClick:t[0]||(t[0]=h=>i.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:F(["tab",{active:i.value==="webdav"}]),onClick:t[1]||(t[1]=h=>i.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:F(["tab",{active:i.value==="auto"}]),onClick:t[2]||(t[2]=h=>i.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),C(e("div",io,[e("div",ro,[e("button",{class:"btn btn-primary",onClick:Q,disabled:a.create},[t[25]||(t[25]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),H(" "+k(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,uo),e("button",{class:"btn btn-success",onClick:A,disabled:a.upload},[t[26]||(t[26]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),H(" "+k(a.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,co),e("button",{class:"btn btn-secondary",onClick:z,disabled:a.list},[t[27]||(t[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),H(" "+k(a.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,vo),e("input",{ref_key:"fileInput",ref:x,type:"file",accept:".zip",onChange:N,style:{display:"none"}},null,544)]),u.value.text?(n(),d("div",{key:0,class:F(["message",u.value.type])},k(u.value.text),3)):P("",!0),e("div",po,[v.value.length===0&&!a.list?(n(),d("div",mo,[...t[28]||(t[28]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)])])):(n(),d("div",bo,[(n(!0),d(J,null,G(v.value,h=>(n(),d("div",{key:h.name,class:"backup-card"},[t[33]||(t[33]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",go,[e("div",fo,k(h.name),1),e("div",ho,[e("span",wo,k(h.size),1),e("span",ko,k(g(h.created)),1),h.signed?(n(),d("span",yo,"ğŸ”’")):(n(),d("span",_o,"âš ï¸"))])]),e("div",$o,[e("button",{class:"btn-icon btn-restore",onClick:K=>O("restore",h),title:"æ¢å¤å¤‡ä»½"},[...t[29]||(t[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,Co),e("button",{class:"btn-icon btn-rename",onClick:K=>q(h.name),title:"é‡å‘½å"},[...t[30]||(t[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Mo),e("button",{class:"btn-icon",onClick:K=>oe(h.name),title:"ä¸‹è½½å¤‡ä»½"},[...t[31]||(t[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)])],8,xo),e("button",{class:"btn-icon btn-danger",onClick:K=>O("delete",h.name),title:"åˆ é™¤å¤‡ä»½"},[...t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Vo)])]))),128))]))])],512),[[fe,i.value==="local"]]),C(e("div",Bo,[e("div",Uo,[e("button",{class:"btn btn-primary",onClick:c},[...t[34]||(t[34]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),H(" WebDAVé…ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:ie,disabled:a.webdavBackup||!w.configured},[t[35]||(t[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),H(" "+k(a.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,Do),e("button",{class:"btn btn-secondary",onClick:X,disabled:a.webdavList||!w.configured},[t[36]||(t[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),H(" "+k(a.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Ao)]),u.value.text?(n(),d("div",{key:0,class:F(["message",u.value.type])},k(u.value.text),3)):P("",!0),w.configured?P("",!0):(n(),d("div",To,[...t[37]||(t[37]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)])])),e("div",So,[B.value.length===0&&!a.webdavList?(n(),d("div",Io,[...t[38]||(t[38]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)])])):(n(),d("div",Lo,[(n(!0),d(J,null,G(B.value,h=>(n(),d("div",{key:h.name,class:"backup-card"},[t[41]||(t[41]=ne('<div class="backup-icon" data-v-b8ebf567><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-b8ebf567><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-b8ebf567></path><polyline points="14 2 14 8 20 8" data-v-b8ebf567></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-b8ebf567></path></svg></div>',1)),e("div",Wo,[e("div",No,k(h.name),1),e("div",zo,[e("span",Po,k(h.size),1),e("span",Eo,k(g(h.created)),1)])]),e("div",Ho,[e("button",{class:"btn-icon btn-restore",onClick:K=>O("webdav-restore",h.name),title:"ä»WebDAVæ¢å¤"},[...t[39]||(t[39]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,Fo),e("button",{class:"btn-icon btn-danger",onClick:K=>O("webdav-delete",h.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},[...t[40]||(t[40]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Oo)])]))),128))]))])],512),[[fe,i.value==="webdav"]]),C(e("div",Ro,[u.value.text?(n(),d("div",{key:0,class:F(["message",u.value.type])},k(u.value.text),3)):P("",!0),e("div",jo,[t[76]||(t[76]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[77]||(t[77]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",qo,[e("div",Jo,[t[43]||(t[43]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",Go,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=h=>o.debounce.enabled=h)},null,512),[[le,o.debounce.enabled]]),t[42]||(t[42]=e("span",{class:"slider"},null,-1))])]),t[48]||(t[48]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),o.debounce.enabled?(n(),d("div",Ko,[e("div",Qo,[t[44]||(t[44]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),C(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=h=>o.debounce.delay=h),min:"5",max:"1440",class:"form-input"},null,512),[[S,o.debounce.delay,void 0,{number:!0}]]),t[45]||(t[45]=e("small",null,"æ•°æ®ä¿®æ”¹åå»¶è¿Ÿå¤šä¹…è§¦å‘å¤‡ä»½ï¼ŒèŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",Xo,[t[46]||(t[46]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),C(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=h=>o.debounce.keep=h),min:"1",max:"30",class:"form-input"},null,512),[[S,o.debounce.keep,void 0,{number:!0}]]),t[47]||(t[47]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))])])):P("",!0)]),e("div",Yo,[e("div",Zo,[t[50]||(t[50]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",en,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=h=>o.scheduled.enabled=h)},null,512),[[le,o.scheduled.enabled]]),t[49]||(t[49]=e("span",{class:"slider"},null,-1))])]),t[58]||(t[58]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),o.scheduled.enabled?(n(),d("div",tn,[e("div",sn,[t[52]||(t[52]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",ln,[C(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=h=>o.scheduled.hour=h),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[S,o.scheduled.hour,void 0,{number:!0}]]),t[51]||(t[51]=e("span",null,":",-1)),C(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=h=>o.scheduled.minute=h),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[S,o.scheduled.minute,void 0,{number:!0}]])]),t[53]||(t[53]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",an,[t[54]||(t[54]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),C(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=h=>o.scheduled.keep=h),min:"1",max:"30",class:"form-input"},null,512),[[S,o.scheduled.keep,void 0,{number:!0}]]),t[55]||(t[55]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))]),e("div",on,[e("label",nn,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=h=>o.scheduled.onlyIfModified=h)},null,512),[[le,o.scheduled.onlyIfModified]]),t[56]||(t[56]=e("span",null,"ä»…åœ¨æœ‰ä¿®æ”¹æ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"å¦‚æœ24å°æ—¶å†…å·²æœ‰å¢é‡å¤‡ä»½ï¼Œè·³è¿‡å®šæ—¶å¤‡ä»½ï¼ˆé¿å…é‡å¤ï¼‰",-1))])])):P("",!0)]),e("div",dn,[e("div",rn,[t[60]||(t[60]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",un,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=h=>o.webdav.enabled=h),onChange:de},null,544),[[le,o.webdav.enabled]]),t[59]||(t[59]=e("span",{class:"slider"},null,-1))])]),e("p",cn,[t[61]||(t[61]=H(" è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚ ",-1)),w.configured?P("",!0):(n(),d("span",vn,'âš ï¸ è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®è¿æ¥'))]),o.webdav.enabled?(n(),d("div",pn,[e("div",mn,[e("label",bn,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=h=>o.webdav.syncDaily=h)},null,512),[[le,o.webdav.syncDaily]]),t[62]||(t[62]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[63]||(t[63]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",gn,[e("label",fn,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=h=>o.webdav.syncIncremental=h)},null,512),[[le,o.webdav.syncIncremental]]),t[64]||(t[64]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[65]||(t[65]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))])])):P("",!0)]),e("div",hn,[e("div",wn,[t[67]||(t[67]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",kn,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=h=>o.autoClean=h)},null,512),[[le,o.autoClean]]),t[66]||(t[66]=e("span",{class:"slider"},null,-1))])]),t[68]||(t[68]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡çš„æ—§å¤‡ä»½æ–‡ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼Œä¿ç•™æœ€æ–°çš„ï¼‰ã€‚",-1))]),l.value?(n(),d("div",yn,[t[73]||(t[73]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",_n,[e("div",$n,[t[69]||(t[69]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½æ•°é‡",-1)),e("span",Cn,k(((R=l.value.incremental)==null?void 0:R.count)||0)+" ä¸ª",1)]),e("div",Mn,[t[70]||(t[70]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",xn,k(g(l.value.lastDebounce)||"æ— "),1)]),e("div",Vn,[t[71]||(t[71]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",Bn,k(g(l.value.lastScheduled)||"æ— "),1)]),e("div",Un,[t[72]||(t[72]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",Dn,k(I()),1)])])])):P("",!0),e("div",An,[e("button",{class:"btn btn-secondary",onClick:Z},[...t[74]||(t[74]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),H(" é‡ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:ce,disabled:a.autoBackupConfig},[t[75]||(t[75]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),H(" "+k(a.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,Tn)])])],512),[[fe,i.value==="auto"]]),M.value?(n(),d("div",Sn,[e("div",In,[t[82]||(t[82]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",Ln,[t[78]||(t[78]=e("label",null,[H("WebDAV URL "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=h=>s.url=h),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[S,s.url]]),t[79]||(t[79]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Wn,[t[80]||(t[80]=e("label",null,[H("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=h=>s.username=h),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[S,s.username]])]),e("div",Nn,[t[81]||(t[81]=e("label",null,[H("å¯†ç  "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"password","onUpdate:modelValue":t[17]||(t[17]=h=>s.password=h),placeholder:w.configured?"ç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜":"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,8,zn),[[S,s.password]]),w.configured?(n(),d("small",En,"å¦‚éœ€ä¿®æ”¹å¯†ç è¯·è¾“å…¥æ–°å¯†ç ï¼Œç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜")):(n(),d("small",Pn,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç "))]),e("div",Hn,[e("button",{class:"btn btn-secondary",onClick:t[18]||(t[18]=h=>M.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ee,disabled:a.webdavConfig},k(a.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,Fn)])])])):P("",!0),b.show?(n(),d("div",On,[e("div",Rn,[e("h3",null,"ç¡®è®¤"+k(b.title),1),e("p",jn,k(b.message),1),e("div",qn,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=h=>b.show=!1),disabled:b.processing},"å–æ¶ˆ",8,Jn),e("button",{class:F(["btn",b.confirmClass]),onClick:W,disabled:b.processing},k(b.processing?"å¤„ç†ä¸­...":"ç¡®è®¤"),11,Gn)])])])):P("",!0),L.value?(n(),d("div",Kn,[e("div",Qn,[t[86]||(t[86]=e("h3",null,"åˆ›å»ºå¤‡ä»½",-1)),e("div",Xn,[t[83]||(t[83]=e("label",null,"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=h=>m.name=h),placeholder:"ä¾‹å¦‚ï¼šæ·»åŠ ä¹¦ç­¾åçš„å¤‡ä»½",class:"form-input",maxlength:"50"},null,512),[[S,m.name]]),t[84]||(t[84]=e("small",null,"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤åç§°ï¼ˆbackup-æ—¶é—´æˆ³ï¼‰",-1))]),e("div",Yn,[t[85]||(t[85]=e("label",null,"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",-1)),C(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=h=>m.description=h),placeholder:"æè¿°è¿™æ¬¡å¤‡ä»½çš„å†…å®¹æˆ–ç›®çš„...",class:"form-input",rows:"3"},null,512),[[S,m.description]])]),e("div",Zn,[e("button",{class:"btn btn-secondary",onClick:t[22]||(t[22]=h=>L.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:j,disabled:a.create},k(a.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),9,ei)])])])):P("",!0),U.value?(n(),d("div",ti,[e("div",si,[t[88]||(t[88]=e("h3",null,"é‡å‘½åå¤‡ä»½",-1)),e("div",li,[t[87]||(t[87]=e("label",null,[H("æ–°åç§° "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=h=>p.newName=h),placeholder:"è¾“å…¥æ–°çš„å¤‡ä»½åç§°",class:"form-input",maxlength:"50"},null,512),[[S,p.newName]]),e("small",null,"åŸåç§°ï¼š"+k(p.oldName),1)]),e("div",ai,[e("button",{class:"btn btn-secondary",onClick:t[24]||(t[24]=h=>U.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:D,disabled:a.rename||!p.newName.trim()},k(a.rename?"é‡å‘½åä¸­...":"ç¡®è®¤é‡å‘½å"),9,oi)])])])):P("",!0)])}}},ii=Y(ni,[["__scopeId","data-v-b8ebf567"]]),di={key:0,class:"login-container"},ri={class:"login-card"},ui={class:"login-form"},ci={class:"password-input-wrapper"},vi=["type"],pi={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},mi={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},bi={class:"login-buttons"},gi=["disabled"],fi={key:0,class:"login-error"},hi={key:1,class:"admin-layout"},wi={class:"menu-list"},ki={class:"admin-main"},yi={class:"admin-header"},_i={class:"header-title"},$i={class:"admin-content"},Ci={__name:"Admin",setup(E){const i=f("welcome"),v={welcome:wt,menu:vs,card:Ys,duplicate:Ll,tag:Zl,promo:Da,friend:Ea,user:ao,backup:ii},B=ae(()=>v[i.value]),M=ae(()=>i.value==="welcome"?{lastLoginTime:L.value,lastLoginIp:U.value,currentUsername:x.value}:{}),L=f(""),U=f(""),x=f("admin"),a=f(!1),m=f(""),p=f(""),u=f(!1),b=f(""),w=f(!1),s=f(!1),o=ae(()=>{switch(i.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"promo":return"å®£ä¼ ç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});te(()=>{const q=localStorage.getItem("token");a.value=!!q,a.value&&l()});function l(){return V(this,null,function*(){try{const q=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(q.ok){const D=yield q.json();L.value=D.last_login_time||"",U.value=D.last_login_ip||"",x.value=D.username||"admin"}}catch(q){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",q)}})}function _(){return V(this,null,function*(){var q,D;if(!m.value||!p.value){b.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}u.value=!0,b.value="";try{const z=yield ut(m.value,p.value);z.data.token&&(localStorage.setItem("token",z.data.token),a.value=!0,L.value=z.data.lastLoginTime||"",U.value=z.data.lastLoginIp||"",yield l())}catch(z){b.value=((D=(q=z.response)==null?void 0:q.data)==null?void 0:D.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{u.value=!1}})}function y(){localStorage.removeItem("token"),a.value=!1,m.value="",p.value="",b.value=""}function $(){window.open("/","_blank")}function Q(){s.value=!s.value}function j(){s.value=!1}return(q,D)=>a.value?(n(),d("div",hi,[e("aside",{class:F(["admin-sider",{open:s.value}]),onClick:_e(j,["self"])},[e("div",{class:"logo clickable",onClick:D[3]||(D[3]=z=>{i.value="welcome",j()})},"Admin"),e("ul",wi,[e("li",{class:F({active:i.value==="menu"}),onClick:D[4]||(D[4]=z=>{i.value="menu",j()})},"æ ç›®ç®¡ç†",2),e("li",{class:F({active:i.value==="card"}),onClick:D[5]||(D[5]=z=>{i.value="card",j()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:F({active:i.value==="duplicate"}),onClick:D[6]||(D[6]=z=>{i.value="duplicate",j()})},"å»é‡ç®¡ç†",2),e("li",{class:F({active:i.value==="tag"}),onClick:D[7]||(D[7]=z=>{i.value="tag",j()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:F({active:i.value==="promo"}),onClick:D[8]||(D[8]=z=>{i.value="promo",j()})},"å®£ä¼ ç®¡ç†",2),e("li",{class:F({active:i.value==="friend"}),onClick:D[9]||(D[9]=z=>{i.value="friend",j()})},"å‹é“¾ç®¡ç†",2),e("li",{class:F({active:i.value==="user"}),onClick:D[10]||(D[10]=z=>{i.value="user",j()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:F({active:i.value==="backup"}),onClick:D[11]||(D[11]=z=>{i.value="backup",j()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",ki,[e("div",yi,[e("button",{class:"menu-toggle",onClick:Q}," â˜° "),e("div",_i,k(o.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:$,title:"è¿›å…¥ä¸»é¡µ"},[...D[16]||(D[16]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("button",{class:"btn logout-btn",onClick:y},"é€€å‡ºç™»å½•")])]),e("div",$i,[Ne(Pe,{name:"fade",mode:"out-in"},{default:ze(()=>[(n(),Ee(He(B.value),Fe({key:i.value},M.value),null,16))]),_:1})]),D[17]||(D[17]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[H("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(n(),d("div",di,[e("div",ri,[D[15]||(D[15]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",ui,[C(e("input",{"onUpdate:modelValue":D[0]||(D[0]=z=>m.value=z),type:"text",placeholder:"ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šadminï¼‰",class:"login-input",onKeyup:we(_,["enter"])},null,544),[[S,m.value]]),e("div",ci,[C(e("input",{"onUpdate:modelValue":D[1]||(D[1]=z=>p.value=z),type:w.value?"text":"password",placeholder:"å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰",class:"login-input password-input",onKeyup:we(_,["enter"])},null,40,vi),[[We,p.value]]),e("span",{class:"toggle-password",onClick:D[2]||(D[2]=z=>w.value=!w.value)},[w.value?(n(),d("svg",pi,[...D[12]||(D[12]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(n(),d("svg",mi,[...D[13]||(D[13]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])]))])]),e("div",bi,[e("button",{onClick:$,class:"back-btn"},[...D[14]||(D[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),H(" è¿”å›é¦–é¡µ ",-1)])]),e("button",{onClick:_,class:"login-btn",disabled:u.value},k(u.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,gi)]),b.value?(n(),d("p",fi,k(b.value),1)):P("",!0)])])]))}},Bi=Y(Ci,[["__scopeId","data-v-a1a1c9d0"]]);export{Bi as default};
