var fe=Object.defineProperty,we=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var ie=(W,n,b)=>n in W?fe(W,n,{enumerable:!0,configurable:!0,writable:!0,value:b}):W[n]=b,G=(W,n)=>{for(var b in n||(n={}))ye.call(n,b)&&ie(W,b,n[b]);if(oe)for(var b of oe(n))_e.call(n,b)&&ie(W,b,n[b]);return W},Q=(W,n)=>we(W,ke(n));var M=(W,n,b)=>new Promise((k,_)=>{var A=d=>{try{$(b.next(d))}catch(r){_(r)}},v=d=>{try{$(b.throw(d))}catch(r){_(r)}},$=d=>d.done?k(d.value):Promise.resolve(d.value).then(A,v);$((b=b.apply(W,n)).next())});import{_ as O,r as f,g as j,c,o as i,b as e,w,v as B,p as H,F as P,a as F,n as z,t as y,e as ce,A as de,d as I,B as se,q as le,k as ne,C as X,D as J,z as ee,x as R,m as ue,E as $e,j as N}from"./index-DGWAhcCq.js";import{g as ve,n as Ce,o as Me,q as xe,r as Ve,s as Be,t as Ue,c as pe,w as Ae,u as re,l as De,e as Se,x as Te,y as te,z as Ie,A as Le,B as We,C as ze,a as He,D as Pe,E as Fe,F as Oe,b as Ne,G as je,H as Ee,I as qe,J as Re,K as Ge,L as Je,M as Ke}from"./api-B-5vW9OF.js";const Qe={class:"menu-manage"},Xe={class:"menu-header"},Ye={class:"menu-add"},Ze={class:"menu-content"},et={class:"menu-list"},tt={class:"main-menu"},st={class:"menu-info"},lt=["onUpdate:modelValue","onBlur"],nt={class:"menu-order"},at=["onUpdate:modelValue","onBlur"],ot={class:"menu-actions"},it=["onClick","title"],dt=["onClick"],ut={class:"sub-menu-header"},rt={class:"sub-menu-title"},ct=["onClick"],vt={key:0,class:"sub-menu-list"},pt={class:"sub-menu-info"},mt=["onUpdate:modelValue","onBlur"],bt={class:"sub-menu-order"},gt=["onUpdate:modelValue","onBlur"],ht={class:"sub-menu-actions"},ft=["onClick"],wt={key:1,class:"empty-sub-menu"},kt=["onClick"],yt={__name:"MenuManage",setup(W){const n=f([]),b=f("");j(k);function k(){return M(this,null,function*(){const s=yield ve();n.value=s.data.map(l=>Q(G({},l),{showSubMenu:!1}))})}function _(){return M(this,null,function*(){if(!b.value.trim())return;const s=n.value.length?Math.max(...n.value.map(l=>l.order||0)):0;yield Ce({name:b.value.trim(),order:s+1}),b.value="",k()})}function A(s){return M(this,null,function*(){yield Me(s.id,{name:s.name,order:s.order}),k()})}function v(s){return M(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ã€‚")&&(yield xe(s),k())})}function $(s){return M(this,null,function*(){var u;const l=n.value.find(U=>U.id===s),o=prompt("è¯·è¾“å…¥å­èœå•åç§°ï¼š");if(!(o!=null&&o.trim()))return;const p=(u=l.subMenus)!=null&&u.length?Math.max(...l.subMenus.map(U=>U.order||0)):0;yield Ve(s,{name:o.trim(),order:p+1}),k()})}function d(s){return M(this,null,function*(){yield Be(s.id,{name:s.name,order:s.order}),k()})}function r(s){return M(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å¡ç‰‡ã€‚")&&(yield Ue(s),k())})}function a(s){const l=n.value.find(o=>o.id===s);l&&(l.showSubMenu=!l.showSubMenu)}return(s,l)=>(i(),c("div",Qe,[e("div",Xe,[l[2]||(l[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ä¸»èœå•å’Œå­èœå•")],-1)),e("div",Ye,[w(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o),placeholder:"è¯·è¾“å…¥ä¸»èœå•åç§°",class:"input"},null,512),[[B,b.value]]),e("button",{class:"btn btn-primary",onClick:_},l[1]||(l[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ ä¸»èœå• ")]))])]),e("div",Ze,[e("div",et,[(i(!0),c(P,null,F(n.value,o=>{var p;return i(),c("div",{key:o.id,class:"menu-item"},[e("div",tt,[e("div",st,[l[4]||(l[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),w(e("input",{"onUpdate:modelValue":u=>o.name=u,onBlur:u=>A(o),class:"menu-name-input"},null,40,lt),[[B,o.name]]),e("div",nt,[l[3]||(l[3]=e("span",{class:"order-label"},"æ’åº",-1)),w(e("input",{"onUpdate:modelValue":u=>o.order=u,type:"number",onBlur:u=>A(o),class:"order-input"},null,40,at),[[B,o.order,void 0,{number:!0}]])])]),e("div",ot,[e("button",{class:"btn btn-icon expand-btn",onClick:u=>a(o.id),title:o.showSubMenu?"æ”¶èµ·å­èœå•":"å±•å¼€å­èœå•"},l[5]||(l[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)]),8,it),e("button",{class:"btn btn-danger btn-icon",onClick:u=>v(o.id),title:"åˆ é™¤ä¸»èœå•"},l[6]||(l[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,dt)])]),e("div",{class:z(["sub-menu-section",{expanded:o.showSubMenu}])},[e("div",ut,[e("div",rt,[l[7]||(l[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),H(" å­èœå• ("+y(((p=o.subMenus)==null?void 0:p.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:u=>$(o.id)},l[8]||(l[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ å­èœå• ")]),8,ct)]),o.subMenus&&o.subMenus.length>0?(i(),c("div",vt,[(i(!0),c(P,null,F(o.subMenus,u=>(i(),c("div",{key:u.id,class:"sub-menu-item"},[e("div",pt,[l[9]||(l[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),w(e("input",{"onUpdate:modelValue":U=>u.name=U,onBlur:U=>d(u),class:"sub-menu-name-input"},null,40,mt),[[B,u.name]]),e("div",bt,[w(e("input",{"onUpdate:modelValue":U=>u.order=U,type:"number",onBlur:U=>d(u),class:"order-input"},null,40,gt),[[B,u.order,void 0,{number:!0}]])])]),e("div",ht,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:U=>r(u.id),title:"åˆ é™¤å­èœå•"},l[10]||(l[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,ft)])]))),128))])):(i(),c("div",wt,[l[11]||(l[11]=e("p",null,"æš‚æ— å­èœå•",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:u=>$(o.id)},"æ·»åŠ ç¬¬ä¸€ä¸ªå­èœå•",8,kt)]))],2)])}),128))])])]))}},_t=O(yt,[["__scopeId","data-v-5964fa59"]]),$t={class:"card-manage"},Ct={class:"card-header"},Mt={class:"card-add"},xt=["value"],Vt=["value"],Bt={class:"card-card"},Ut={class:"card-table"},At=["onUpdate:modelValue","onBlur"],Dt=["onUpdate:modelValue","onBlur"],St=["onUpdate:modelValue","onBlur"],Tt=["onUpdate:modelValue","onBlur"],It=["onClick"],Lt={key:0,class:"selected-tags"},Wt={key:1,class:"tag-placeholder"},zt=["onUpdate:modelValue","onBlur"],Ht=["onClick"],Pt={class:"modal-body"},Ft={key:0,class:"empty-tags"},Ot={key:1,class:"tag-options"},Nt=["checked","onChange"],jt={__name:"CardManage",setup(W){const n=f([]),b=f([]),k=f(),_=f(""),A=f(""),v=f(""),$=f(""),d=f([]),r=f(!1),a=f(null),s=f([]),l=ce(()=>{if(!k.value)return[];const S=n.value.find(D=>D.id===k.value);return(S==null?void 0:S.subMenus)||[]});j(()=>M(null,null,function*(){const S=yield ve();n.value=S.data,n.value.length&&(k.value=n.value[0].id,_.value="");const D=yield pe();d.value=D.data})),de(k,()=>{_.value="",u()}),de(_,u);function o(){_.value=""}function p(){u()}function u(){return M(this,null,function*(){if(!k.value)return;const S=yield Se(k.value,_.value||null);b.value=S.data})}function U(){return M(this,null,function*(){!A.value||!v.value||(yield Ae({menu_id:k.value,sub_menu_id:_.value||null,title:A.value,url:v.value,logo_url:$.value}),A.value="",v.value="",$.value="",u())})}function V(S){return M(this,null,function*(){yield re(S.id,{menu_id:k.value,sub_menu_id:_.value||null,title:S.title,url:S.url,logo_url:S.logo_url,desc:S.desc,order:S.order,tagIds:S.tags?S.tags.map(D=>D.id):[]}),u()})}function C(S){return M(this,null,function*(){yield De(S),u()})}function m(S){a.value=S,s.value=S.tags?S.tags.map(D=>D.id):[],r.value=!0}function T(){r.value=!1,a.value=null,s.value=[]}function E(S){const D=s.value.indexOf(S);D>-1?s.value.splice(D,1):s.value.push(S)}function Y(){return M(this,null,function*(){a.value&&(yield re(a.value.id,{menu_id:a.value.menu_id,sub_menu_id:a.value.sub_menu_id,title:a.value.title,url:a.value.url,logo_url:a.value.logo_url,desc:a.value.desc,order:a.value.order,tagIds:s.value}),T(),u())})}return(S,D)=>(i(),c("div",$t,[e("div",Ct,[D[8]||(D[8]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",Mt,[w(e("select",{"onUpdate:modelValue":D[0]||(D[0]=x=>k.value=x),class:"input narrow",onChange:o},[(i(!0),c(P,null,F(n.value,x=>(i(),c("option",{value:x.id,key:x.id},y(x.name),9,xt))),128))],544),[[se,k.value]]),w(e("select",{"onUpdate:modelValue":D[1]||(D[1]=x=>_.value=x),class:"input narrow",onChange:p},[D[6]||(D[6]=e("option",{value:""},"ä¸»èœå•",-1)),(i(!0),c(P,null,F(l.value,x=>(i(),c("option",{value:x.id,key:x.id},y(x.name),9,Vt))),128))],544),[[se,_.value]]),w(e("input",{"onUpdate:modelValue":D[2]||(D[2]=x=>A.value=x),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[B,A.value]]),w(e("input",{"onUpdate:modelValue":D[3]||(D[3]=x=>v.value=x),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[B,v.value]]),w(e("input",{"onUpdate:modelValue":D[4]||(D[4]=x=>$.value=x),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[B,$.value]]),e("button",{class:"btn",onClick:U},D[7]||(D[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ å¡ç‰‡ ")]))])]),e("div",Bt,[e("table",Ut,[D[10]||(D[10]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(i(!0),c(P,null,F(b.value,x=>(i(),c("tr",{key:x.id},[e("td",null,[w(e("input",{"onUpdate:modelValue":L=>x.title=L,onBlur:L=>V(x),class:"table-input"},null,40,At),[[B,x.title]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":L=>x.url=L,onBlur:L=>V(x),class:"table-input"},null,40,Dt),[[B,x.url]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":L=>x.logo_url=L,onBlur:L=>V(x),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,St),[[B,x.logo_url]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":L=>x.desc=L,onBlur:L=>V(x),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,Tt),[[B,x.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:L=>m(x)},[x.tags&&x.tags.length>0?(i(),c("div",Lt,[(i(!0),c(P,null,F(x.tags,L=>(i(),c("span",{key:L.id,class:"mini-tag",style:le({backgroundColor:L.color})},y(L.name),5))),128))])):(i(),c("span",Wt,"é€‰æ‹©æ ‡ç­¾"))],8,It)]),e("td",null,[w(e("input",{"onUpdate:modelValue":L=>x.order=L,type:"number",onBlur:L=>V(x),class:"table-input order-input"},null,40,zt),[[B,x.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:L=>C(x.id),title:"åˆ é™¤"},D[9]||(D[9]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Ht)])]))),128))])])]),r.value?(i(),c("div",{key:0,class:"modal-overlay",onClick:T},[e("div",{class:"modal-content",onClick:D[5]||(D[5]=ne(()=>{},["stop"]))},[e("div",{class:"modal-header"},[D[11]||(D[11]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:T},"Ã—")]),e("div",Pt,[d.value.length===0?(i(),c("div",Ft,D[12]||(D[12]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)]))):(i(),c("div",Ot,[(i(!0),c(P,null,F(d.value,x=>(i(),c("label",{key:x.id,class:"tag-option"},[e("input",{type:"checkbox",checked:s.value.includes(x.id),onChange:L=>E(x.id)},null,40,Nt),e("span",{class:"tag-label",style:le({backgroundColor:x.color})},y(x.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:T},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:Y},"ç¡®å®š")])])])):I("",!0)]))}},Et=O(jt,[["__scopeId","data-v-37e77d17"]]),qt={class:"duplicate-manage"},Rt={class:"section-header"},Gt=["disabled"],Jt={key:0,class:"duplicate-results"},Kt={class:"result-summary"},Qt={class:"summary-card"},Xt={class:"summary-value"},Yt={class:"summary-card warning"},Zt={class:"summary-value"},es={class:"summary-card danger"},ts={class:"summary-value"},ss={class:"duplicate-groups"},ls={class:"group-header"},ns={class:"group-count"},as={class:"card-item original"},os={class:"card-info"},is={class:"card-title"},ds={class:"card-url"},us={key:0,class:"card-desc"},rs={class:"card-id"},cs={class:"duplicates-list"},vs={class:"card-info"},ps={class:"card-title"},ms={class:"card-url"},bs={key:0,class:"card-desc"},gs={class:"card-actions"},hs={class:"card-id"},fs=["onClick","disabled"],ws={class:"group-actions"},ks=["onClick","disabled"],ys={class:"global-actions"},_s=["disabled"],$s={key:1,class:"no-duplicates"},Cs={key:2,class:"initial-hint"},Ms={key:3,class:"error"},xs={__name:"DuplicateManage",setup(W){const n=f(!1),b=f(!1),k=f(!1),_=f([]),A=f(0),v=f(0),$=f("");function d(){return M(this,null,function*(){var l,o;n.value=!0,$.value="";try{const p=yield Te();A.value=p.data.total,_.value=p.data.duplicateGroups,v.value=p.data.duplicateCount,k.value=!0}catch(p){$.value=((o=(l=p.response)==null?void 0:l.data)==null?void 0:o.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",p)}finally{n.value=!1}})}function r(l){return M(this,null,function*(){var o,p;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){b.value=!0,$.value="";try{yield te([l]),yield d()}catch(u){$.value=((p=(o=u.response)==null?void 0:o.data)==null?void 0:p.error)||"åˆ é™¤å¤±è´¥",console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",u)}finally{b.value=!1}}})}function a(l){return M(this,null,function*(){var p,u;const o=l.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${o} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${l.original.title}`)){b.value=!0,$.value="";try{const U=l.duplicates.map(V=>V.id);yield te(U),yield d()}catch(U){$.value=((u=(p=U.response)==null?void 0:p.data)==null?void 0:u.error)||"åˆ é™¤å¤±è´¥",console.error("åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",U)}finally{b.value=!1}}})}function s(){return M(this,null,function*(){var o,p;const l=v.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${l} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){b.value=!0,$.value="";try{const u=_.value.flatMap(U=>U.duplicates.map(V=>V.id));yield te(u),yield d()}catch(u){$.value=((p=(o=u.response)==null?void 0:o.data)==null?void 0:p.error)||"åˆ é™¤å¤±è´¥",console.error("åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",u)}finally{b.value=!1}}})}return(l,o)=>(i(),c("div",qt,[e("div",Rt,[o[0]||(o[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:d,class:"btn btn-primary",disabled:n.value},y(n.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,Gt)]),_.value.length>0?(i(),c("div",Jt,[e("div",Kt,[e("div",Qt,[o[1]||(o[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",Xt,y(A.value),1)]),e("div",Yt,[o[2]||(o[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",Zt,y(_.value.length),1)]),e("div",es,[o[3]||(o[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",ts,y(v.value),1)])]),e("div",ss,[(i(!0),c(P,null,F(_.value,(p,u)=>(i(),c("div",{key:u,class:"duplicate-group"},[e("div",ls,[e("h4",null,"é‡å¤ç»„ "+y(u+1),1),e("span",ns,y(p.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",as,[o[4]||(o[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",os,[e("div",is,y(p.original.title),1),e("div",ds,y(p.original.url),1),p.original.desc?(i(),c("div",us,y(p.original.desc),1)):I("",!0)]),e("div",rs,"ID: "+y(p.original.id),1)]),e("div",cs,[(i(!0),c(P,null,F(p.duplicates,U=>(i(),c("div",{key:U.id,class:"card-item duplicate"},[o[5]||(o[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",vs,[e("div",ps,y(U.title),1),e("div",ms,y(U.url),1),U.desc?(i(),c("div",bs,y(U.desc),1)):I("",!0)]),e("div",gs,[e("span",hs,"ID: "+y(U.id),1),e("button",{onClick:V=>r(U.id),class:"btn-remove",disabled:b.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,fs)])]))),128))]),e("div",ws,[e("button",{onClick:U=>a(p),class:"btn btn-danger",disabled:b.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+y(p.duplicates.length)+" å¼ ) ",9,ks)])]))),128))]),e("div",ys,[e("button",{onClick:s,class:"btn btn-danger btn-large",disabled:b.value},y(b.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${v.value} å¼ )`),9,_s)])])):k.value&&_.value.length===0?(i(),c("div",$s,o[6]||(o[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)]))):k.value?I("",!0):(i(),c("div",Cs,o[7]||(o[7]=[X('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-d33d825f><circle cx="12" cy="12" r="10" data-v-d33d825f></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-d33d825f></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-d33d825f></line></svg><h3 data-v-d33d825f>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-d33d825f>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-d33d825f><li data-v-d33d825f>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-d33d825f>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)]))),$.value?(i(),c("p",Ms,y($.value),1)):I("",!0)]))}},Vs=O(xs,[["__scopeId","data-v-d33d825f"]]),Bs={class:"tag-manage"},Us={class:"tag-header"},As={class:"tag-add"},Ds={class:"tag-content"},Ss={key:0,class:"empty-state"},Ts={key:1,class:"tag-list"},Is={class:"tag-info"},Ls=["onUpdate:modelValue","onBlur"],Ws={class:"tag-stats"},zs={class:"card-count"},Hs={class:"tag-controls"},Ps=["onUpdate:modelValue","onChange"],Fs={class:"tag-order"},Os=["onUpdate:modelValue","onBlur"],Ns={class:"tag-actions"},js=["onClick"],Es={__name:"TagManage",setup(W){const n=f([]),b=f(""),k=f("#2566d8");j(_);function _(){return M(this,null,function*(){const d=yield pe();n.value=d.data;for(const r of n.value)try{const a=yield Ie(r.id);r.cardCount=a.data.count}catch(a){r.cardCount=0}})}function A(){return M(this,null,function*(){var l,o;if(!b.value.trim())return;const d=n.value.length?Math.max(...n.value.map(p=>p.order||0)):0,r=b.value.trim(),a=k.value,s={id:Date.now(),name:r,color:a,order:d+1,cardCount:0,_temp:!0};n.value.push(s),b.value="",k.value="#2566d8";try{const p=yield Le({name:r,color:a,order:d+1}),u=n.value.findIndex(U=>U.id===s.id);u>-1&&(n.value[u]=Q(G({},p.data),{cardCount:0}))}catch(p){const u=n.value.findIndex(U=>U.id===s.id);u>-1&&n.value.splice(u,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((o=(l=p.response)==null?void 0:l.data)==null?void 0:o.error)||p.message))}})}function v(d){return M(this,null,function*(){var r,a;if(!d._temp)try{yield We(d.id,{name:d.name,color:d.color,order:d.order})}catch(s){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.error)||s.message)),_()}})}function $(d){return M(this,null,function*(){var l,o;const r=n.value.find(p=>p.id===d);if(!r)return;const a=r.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${r.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${r.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${r.name}"å—ï¼Ÿ`;if(!confirm(a))return;const s=n.value.findIndex(p=>p.id===d);s>-1&&n.value.splice(s,1);try{yield ze(d)}catch(p){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((o=(l=p.response)==null?void 0:l.data)==null?void 0:o.error)||p.message)),_()}})}return(d,r)=>(i(),c("div",Bs,[e("div",Us,[r[3]||(r[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",As,[w(e("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>b.value=a),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[B,b.value]]),w(e("input",{"onUpdate:modelValue":r[1]||(r[1]=a=>k.value=a),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[B,k.value]]),e("button",{class:"btn btn-primary",onClick:A},r[2]||(r[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),H(" æ·»åŠ æ ‡ç­¾ ")]))])]),e("div",Ds,[n.value.length===0?(i(),c("div",Ss,r[4]||(r[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)]))):(i(),c("div",Ts,[(i(!0),c(P,null,F(n.value,a=>(i(),c("div",{key:a.id,class:"tag-item"},[e("div",{class:"tag-preview",style:le({backgroundColor:a.color})},r[5]||(r[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)]),4),e("div",Is,[w(e("input",{"onUpdate:modelValue":s=>a.name=s,onBlur:s=>v(a),class:"tag-name-input",maxlength:"20"},null,40,Ls),[[B,a.name]]),e("div",Ws,[e("span",zs,y(a.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",Hs,[w(e("input",{"onUpdate:modelValue":s=>a.color=s,type:"color",onChange:s=>v(a),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,Ps),[[B,a.color]]),e("div",Fs,[r[6]||(r[6]=e("span",{class:"order-label"},"æ’åº",-1)),w(e("input",{"onUpdate:modelValue":s=>a.order=s,type:"number",onBlur:s=>v(a),class:"order-input"},null,40,Os),[[B,a.order,void 0,{number:!0}]])])]),e("div",Ns,[e("button",{class:"btn btn-danger btn-icon",onClick:s=>$(a.id),title:"åˆ é™¤æ ‡ç­¾"},r[7]||(r[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,js)])]))),128))]))])]))}},qs=O(Es,[["__scopeId","data-v-fc56cb55"]]),Rs={class:"ad-manage"},Gs={class:"ad-header"},Js={class:"ad-section"},Ks={class:"ad-card"},Qs={class:"ad-table"},Xs=["onUpdate:modelValue","onBlur"],Ys=["onUpdate:modelValue","onBlur"],Zs=["onClick"],el={class:"ad-section"},tl={class:"ad-card"},sl={class:"ad-table"},ll=["onUpdate:modelValue","onBlur"],nl=["onUpdate:modelValue","onBlur"],al=["onClick"],ol={__name:"AdManage",setup(W){const n=f([]),b=f([]),k=f(""),_=f(""),A=f("left");j(v);function v(){return M(this,null,function*(){const a=yield He();n.value=a.data.filter(s=>s.position==="left"),b.value=a.data.filter(s=>s.position==="right")})}function $(){return M(this,null,function*(){!k.value||!_.value||(yield Pe({position:A.value,img:k.value,url:_.value}),k.value="",_.value="",A.value="left",v())})}function d(a){return M(this,null,function*(){yield Fe(a.id,{img:a.img,url:a.url}),v()})}function r(a){return M(this,null,function*(){yield Oe(a),v()})}return(a,s)=>(i(),c("div",Rs,[e("div",Gs,[e("form",{class:"ad-add-row",onSubmit:ne($,["prevent"])},[w(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>k.value=l),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[B,k.value]]),w(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>_.value=l),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[B,_.value]]),w(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>A.value=l),class:"input select-input"},s[3]||(s[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)]),512),[[se,A.value]]),s[4]||(s[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",Js,[s[6]||(s[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Ks,[e("table",Qs,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(i(!0),c(P,null,F(n.value,l=>(i(),c("tr",{key:l.id},[e("td",null,[w(e("input",{"onUpdate:modelValue":o=>l.img=o,onBlur:o=>d(l),class:"input"},null,40,Xs),[[B,l.img]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":o=>l.url=o,onBlur:o=>d(l),class:"input"},null,40,Ys),[[B,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:o=>r(l.id)},"åˆ é™¤å¹¿å‘Š",8,Zs)])]))),128))])])])]),e("div",el,[s[8]||(s[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",tl,[e("table",sl,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(i(!0),c(P,null,F(b.value,l=>(i(),c("tr",{key:l.id},[e("td",null,[w(e("input",{"onUpdate:modelValue":o=>l.img=o,onBlur:o=>d(l),class:"input"},null,40,ll),[[B,l.img]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":o=>l.url=o,onBlur:o=>d(l),class:"input"},null,40,nl),[[B,l.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:o=>r(l.id)},"åˆ é™¤å¹¿å‘Š",8,al)])]))),128))])])])])]))}},il=O(ol,[["__scopeId","data-v-780b5e23"]]),dl={class:"friend-manage"},ul={class:"friend-add"},rl={class:"friend-card"},cl={class:"friend-table"},vl=["onUpdate:modelValue","onBlur"],pl=["onUpdate:modelValue","onBlur"],ml=["onUpdate:modelValue","onBlur"],bl=["onClick"],gl={__name:"FriendLinkManage",setup(W){const n=f([]),b=f(""),k=f(""),_=f("");j(A);function A(){return M(this,null,function*(){const r=yield Ne();n.value=r.data})}function v(){return M(this,null,function*(){!b.value||!k.value||(yield je({title:b.value,url:k.value,logo:_.value}),b.value="",k.value="",_.value="",A())})}function $(r){return M(this,null,function*(){yield Ee(r.id,{title:r.title,url:r.url,logo:r.logo}),A()})}function d(r){return M(this,null,function*(){yield qe(r),A()})}return(r,a)=>(i(),c("div",dl,[a[4]||(a[4]=e("div",{class:"friend-header"},null,-1)),e("div",ul,[w(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>b.value=s),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[B,b.value]]),w(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>k.value=s),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[B,k.value]]),w(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>_.value=s),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[B,_.value]]),e("button",{class:"btn",onClick:v},"æ·»åŠ å‹é“¾")]),e("div",rl,[e("table",cl,[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(i(!0),c(P,null,F(n.value,s=>(i(),c("tr",{key:s.id},[e("td",null,[w(e("input",{"onUpdate:modelValue":l=>s.title=l,onBlur:l=>$(s),class:"input"},null,40,vl),[[B,s.title]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":l=>s.url=l,onBlur:l=>$(s),class:"input"},null,40,pl),[[B,s.url]])]),e("td",null,[w(e("input",{"onUpdate:modelValue":l=>s.logo=l,onBlur:l=>$(s),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ml),[[B,s.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:l=>d(s.id)},"åˆ é™¤",8,bl)])]))),128))])])])]))}},hl=O(gl,[["__scopeId","data-v-f280329a"]]),fl={class:"user-manage"},wl={class:"user-card"},kl={class:"username-section"},yl={class:"username-form"},_l={class:"current-username"},$l={class:"username-display"},Cl={class:"form-group"},Ml={class:"form-actions"},xl=["disabled"],Vl={class:"password-section"},Bl={class:"password-form"},Ul={class:"form-group"},Al={class:"form-group"},Dl={class:"form-group"},Sl={class:"form-actions"},Tl=["disabled"],Il={__name:"UserManage",setup(W){const n=f(""),b=f(""),k=f(""),_=f(!1),A=f(""),v=f("success"),$=f({}),d=f(""),r=f(!1),a=f(""),s=f("success");j(()=>M(null,null,function*(){yield l()}));function l(){return M(this,null,function*(){try{const V=yield Re();$.value=V.data}catch(V){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",V)}})}function o(){return M(this,null,function*(){var V,C;if(!d.value){p("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(d.value.length<3||d.value.length>20){p("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(d.value===$.value.username){p("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}r.value=!0,a.value="";try{yield Ge(d.value),p("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),d.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(m){p(((C=(V=m.response)==null?void 0:V.data)==null?void 0:C.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{r.value=!1}})}function p(V,C){a.value=V,s.value=C,setTimeout(()=>{a.value=""},3e3)}function u(){return M(this,null,function*(){var V,C;if(!n.value||!b.value||!k.value){U("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(b.value!==k.value){U("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(b.value.length<6){U("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}_.value=!0,A.value="";try{yield Je(n.value,b.value),U("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),n.value="",b.value="",k.value=""}catch(m){U(((C=(V=m.response)==null?void 0:V.data)==null?void 0:C.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{_.value=!1}})}function U(V,C){A.value=V,v.value=C,V==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&C==="success"?setTimeout(()=>{A.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{A.value=""},3e3)}return(V,C)=>(i(),c("div",fl,[C[11]||(C[11]=e("div",{class:"user-header"},null,-1)),e("div",wl,[e("div",kl,[C[6]||(C[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",yl,[e("div",_l,[C[4]||(C[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",$l,y($.value.username||"admin"),1)]),e("div",Cl,[C[5]||(C[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),w(e("input",{"onUpdate:modelValue":C[0]||(C[0]=m=>d.value=m),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[B,d.value]])]),e("div",Ml,[e("button",{onClick:o,class:"btn",disabled:r.value},y(r.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,xl)]),a.value?(i(),c("p",{key:0,class:z(["message",s.value])},y(a.value),3)):I("",!0)])]),e("div",Vl,[C[10]||(C[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",Bl,[e("div",Ul,[C[7]||(C[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),w(e("input",{"onUpdate:modelValue":C[1]||(C[1]=m=>n.value=m),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[B,n.value]])]),e("div",Al,[C[8]||(C[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),w(e("input",{"onUpdate:modelValue":C[2]||(C[2]=m=>b.value=m),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[B,b.value]])]),e("div",Dl,[C[9]||(C[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),w(e("input",{"onUpdate:modelValue":C[3]||(C[3]=m=>k.value=m),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[B,k.value]])]),e("div",Sl,[e("button",{onClick:u,class:"btn",disabled:_.value},y(_.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,Tl)]),A.value?(i(),c("p",{key:0,class:z(["message",v.value])},y(A.value),3)):I("",!0)])])])]))}},Ll=O(Il,[["__scopeId","data-v-b8818cd4"]]),Wl={class:"backup-manage"},zl={class:"tabs"},Hl={class:"tab-content"},Pl={class:"toolbar"},Fl=["disabled"],Ol=["disabled"],Nl=["disabled"],jl={class:"backup-list"},El={key:0,class:"empty-state"},ql={key:1,class:"backup-grid"},Rl={class:"backup-info"},Gl={class:"backup-name"},Jl={class:"backup-meta"},Kl={class:"backup-size"},Ql={class:"backup-date"},Xl={class:"backup-actions"},Yl=["onClick"],Zl=["onClick"],en=["onClick"],tn={class:"tab-content"},sn={class:"toolbar"},ln=["disabled"],nn=["disabled"],an={key:1,class:"info-box"},on={class:"backup-list"},dn={key:0,class:"empty-state"},un={key:1,class:"backup-grid"},rn={class:"backup-info"},cn={class:"backup-name"},vn={class:"backup-meta"},pn={class:"backup-size"},mn={class:"backup-date"},bn={class:"backup-actions"},gn=["onClick"],hn=["onClick"],fn={class:"tab-content"},wn={class:"config-section"},kn={class:"config-card"},yn={class:"config-header"},_n={class:"switch"},$n={key:0,class:"config-fields"},Cn={class:"field-row"},Mn={class:"field-row"},xn={class:"field-row"},Vn={class:"config-card"},Bn={class:"config-header"},Un={class:"switch"},An={key:0,class:"config-fields"},Dn={class:"field-row"},Sn={class:"time-input"},Tn={class:"field-row"},In={class:"config-card"},Ln={class:"config-header"},Wn={class:"switch"},zn={key:0,class:"config-fields"},Hn={class:"field-row checkbox-row"},Pn={class:"checkbox-label"},Fn={class:"field-row checkbox-row"},On={class:"checkbox-label"},Nn={class:"config-card"},jn={class:"config-header"},En={class:"switch"},qn={key:0,class:"stats-card"},Rn={class:"stats-grid"},Gn={class:"stat-item"},Jn={class:"stat-value"},Kn={class:"stat-item"},Qn={class:"stat-value"},Xn={class:"stat-item"},Yn={class:"stat-value"},Zn={class:"stat-item"},ea={class:"stat-value"},ta={class:"config-actions"},sa=["disabled"],la={key:0,class:"modal-overlay"},na={class:"modal-content config-modal"},aa={class:"form-group"},oa={class:"form-group"},ia={class:"form-group"},da={class:"modal-actions"},ua=["disabled"],ra={key:1,class:"modal-overlay"},ca={class:"modal-content"},va={class:"modal-actions"},pa={__name:"BackupManage",setup(W){const n=f("local"),b=f([]),k=f([]),_=f(!1),A=f(null),v=J({create:!1,list:!1,delete:!1,restore:!1,upload:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),$=f({text:"",type:""}),d=J({show:!1,filename:"",action:null,title:"",message:"",confirmClass:""}),r=J({configured:!1,url:"",username:""}),a=J({url:"",username:"",password:""}),s=J({debounce:{enabled:!0,delay:30,maxPerDay:3,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!1},autoClean:!0}),l=f(null),o=localStorage.getItem("token");function p(g){return M(this,arguments,function*(h,t={}){return(yield fetch(h,Q(G({},t),{headers:G({Authorization:`Bearer ${o}`,"Content-Type":"application/json"},t.headers)}))).json()})}const u=(h,t="success")=>{$.value={text:h,type:t},setTimeout(()=>{$.value={text:"",type:""}},3e3)},U=()=>M(null,null,function*(){v.create=!0;const h=yield p("/api/backup/create",{method:"POST"});h.success?(u("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),yield V()):u(h.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),v.create=!1}),V=()=>M(null,null,function*(){v.list=!0;const h=yield p("/api/backup/list");h.success?b.value=h.backups:u("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),v.list=!1}),C=h=>{window.open(`/api/backup/download/${h}?token=${o}`,"_blank")},m=(h,t)=>{d.show=!0,d.filename=t,d.action=h,h==="delete"?(d.title="åˆ é™¤",d.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,d.confirmClass="btn-danger"):h==="restore"?(d.title="æ¢å¤",d.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,d.confirmClass="btn-restore"):h==="webdav-restore"?(d.title="ä»WebDAVæ¢å¤",d.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${t} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,d.confirmClass="btn-restore"):h==="webdav-delete"&&(d.title="åˆ é™¤WebDAVå¤‡ä»½",d.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${t} å—ï¼Ÿ`,d.confirmClass="btn-danger")},T=()=>M(null,null,function*(){const{action:h,filename:t}=d;if(d.show=!1,h==="delete"){v.delete=!0;const g=yield p(`/api/backup/delete/${t}`,{method:"DELETE"});g.success?(u("åˆ é™¤æˆåŠŸï¼"),yield V()):u(g.message||"åˆ é™¤å¤±è´¥","error"),v.delete=!1}else if(h==="restore"){v.restore=!0;const g=yield p(`/api/backup/restore/${t}`,{method:"POST"});g.success?(u("æ¢å¤æˆåŠŸï¼"),yield V()):u(g.message||"æ¢å¤å¤±è´¥","error"),v.restore=!1}else h==="webdav-restore"?yield me(t):h==="webdav-delete"&&(yield be(t))}),E=h=>h?new Date(h).toLocaleString("zh-CN",{hour12:!1}):"--",Y=()=>{A.value.click()},S=h=>M(null,null,function*(){const t=h.target.files[0];if(t){if(!t.name.endsWith(".zip")){u("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),h.target.value="";return}if(t.size>500*1024*1024){u("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),h.target.value="";return}v.upload=!0;try{const g=new FormData;g.append("backup",t);const ae=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:g})).json();ae.success?(u("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield V()):u(ae.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(g){console.error("ä¸Šä¼ å¤±è´¥:",g),u("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{v.upload=!1,h.target.value=""}}}),D=()=>M(null,null,function*(){const h=yield p("/api/backup/webdav/config");h.success&&h.config&&(r.configured=h.config.configured,r.url=h.config.url||"",r.username=h.config.username||"")}),x=()=>M(null,null,function*(){if(!a.url||!a.username||!a.password){u("è¯·å¡«å†™å®Œæ•´çš„WebDAVé…ç½®ä¿¡æ¯","error");return}v.webdavConfig=!0;const h=yield p("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(a)});h.success?(u("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),_.value=!1,a.url="",a.username="",a.password="",yield D()):u(h.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),v.webdavConfig=!1}),L=()=>M(null,null,function*(){v.webdavBackup=!0;const h=yield p("/api/backup/webdav/backup",{method:"POST"});h.success?(u("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield K()):u(h.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),v.webdavBackup=!1}),K=()=>M(null,null,function*(){v.webdavList=!0;const h=yield p("/api/backup/webdav/list");h.success?k.value=h.backups||[]:u("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),v.webdavList=!1}),me=h=>M(null,null,function*(){v.webdavRestore=!0;const t=yield p("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:h})});t.success?u("ä»WebDAVæ¢å¤æˆåŠŸï¼"):u(t.message||"ä»WebDAVæ¢å¤å¤±è´¥","error"),v.webdavRestore=!1}),be=h=>M(null,null,function*(){v.webdavDelete=!0;const t=yield p(`/api/backup/webdav/delete/${h}`,{method:"DELETE"});t.success?(u("åˆ é™¤æˆåŠŸï¼"),yield K()):u(t.message||"åˆ é™¤å¤±è´¥","error"),v.webdavDelete=!1}),Z=()=>M(null,null,function*(){const h=yield p("/api/backup/auto/config");h.success&&h.config?(Object.assign(s,h.config),l.value=h.stats||null):u("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),ge=()=>M(null,null,function*(){v.autoBackupConfig=!0;const h=yield p("/api/backup/auto/config",{method:"POST",body:JSON.stringify(s)});h.success?(u("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield Z()):u(h.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),v.autoBackupConfig=!1}),he=()=>{if(!s.scheduled.enabled)return"æœªå¯ç”¨";const h=String(s.scheduled.hour).padStart(2,"0"),t=String(s.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${h}:${t}`};return j(()=>M(null,null,function*(){yield V(),yield D(),r.configured&&(yield K()),yield Z()})),(h,t)=>(i(),c("div",Wl,[e("div",zl,[e("button",{class:z(["tab",{active:n.value==="local"}]),onClick:t[0]||(t[0]=g=>n.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:z(["tab",{active:n.value==="webdav"}]),onClick:t[1]||(t[1]=g=>n.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:z(["tab",{active:n.value==="auto"}]),onClick:t[2]||(t[2]=g=>n.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),w(e("div",Hl,[e("div",Pl,[e("button",{class:"btn btn-primary",onClick:U,disabled:v.create},[t[21]||(t[21]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),H(" "+y(v.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,Fl),e("button",{class:"btn btn-success",onClick:Y,disabled:v.upload},[t[22]||(t[22]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),H(" "+y(v.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,Ol),e("button",{class:"btn btn-secondary",onClick:V,disabled:v.list},[t[23]||(t[23]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),H(" "+y(v.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Nl),e("input",{ref_key:"fileInput",ref:A,type:"file",accept:".zip",onChange:S,style:{display:"none"}},null,544)]),$.value.text?(i(),c("div",{key:0,class:z(["message",$.value.type])},y($.value.text),3)):I("",!0),e("div",jl,[b.value.length===0&&!v.list?(i(),c("div",El,t[24]||(t[24]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)]))):(i(),c("div",ql,[(i(!0),c(P,null,F(b.value,g=>(i(),c("div",{key:g.name,class:"backup-card"},[t[28]||(t[28]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",Rl,[e("div",Gl,y(g.name),1),e("div",Jl,[e("span",Kl,y(g.size),1),e("span",Ql,y(E(g.created)),1)])]),e("div",Xl,[e("button",{class:"btn-icon btn-restore",onClick:q=>m("restore",g.name),title:"æ¢å¤å¤‡ä»½"},t[25]||(t[25]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,Yl),e("button",{class:"btn-icon",onClick:q=>C(g.name),title:"ä¸‹è½½å¤‡ä»½"},t[26]||(t[26]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)]),8,Zl),e("button",{class:"btn-icon btn-danger",onClick:q=>m("delete",g.name),title:"åˆ é™¤å¤‡ä»½"},t[27]||(t[27]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,en)])]))),128))]))])],512),[[ee,n.value==="local"]]),w(e("div",tn,[e("div",sn,[e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=g=>_.value=!0)},t[29]||(t[29]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),H(" WebDAVé…ç½® ")])),e("button",{class:"btn btn-primary",onClick:L,disabled:v.webdavBackup||!r.configured},[t[30]||(t[30]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),H(" "+y(v.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,ln),e("button",{class:"btn btn-secondary",onClick:K,disabled:v.webdavList||!r.configured},[t[31]||(t[31]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),H(" "+y(v.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,nn)]),$.value.text?(i(),c("div",{key:0,class:z(["message",$.value.type])},y($.value.text),3)):I("",!0),r.configured?I("",!0):(i(),c("div",an,t[32]||(t[32]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)]))),e("div",on,[k.value.length===0&&!v.webdavList?(i(),c("div",dn,t[33]||(t[33]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)]))):(i(),c("div",un,[(i(!0),c(P,null,F(k.value,g=>(i(),c("div",{key:g.name,class:"backup-card"},[t[36]||(t[36]=X('<div class="backup-icon" data-v-36d811e2><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-36d811e2><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-36d811e2></path><polyline points="14 2 14 8 20 8" data-v-36d811e2></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-36d811e2></path></svg></div>',1)),e("div",rn,[e("div",cn,y(g.name),1),e("div",vn,[e("span",pn,y(g.size),1),e("span",mn,y(E(g.created)),1)])]),e("div",bn,[e("button",{class:"btn-icon btn-restore",onClick:q=>m("webdav-restore",g.name),title:"ä»WebDAVæ¢å¤"},t[34]||(t[34]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,gn),e("button",{class:"btn-icon btn-danger",onClick:q=>m("webdav-delete",g.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},t[35]||(t[35]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,hn)])]))),128))]))])],512),[[ee,n.value==="webdav"]]),w(e("div",fn,[$.value.text?(i(),c("div",{key:0,class:z(["message",$.value.type])},y($.value.text),3)):I("",!0),e("div",wn,[t[71]||(t[71]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[72]||(t[72]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",kn,[e("div",yn,[t[38]||(t[38]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",_n,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=g=>s.debounce.enabled=g)},null,512),[[R,s.debounce.enabled]]),t[37]||(t[37]=e("span",{class:"slider"},null,-1))])]),t[45]||(t[45]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),s.debounce.enabled?(i(),c("div",$n,[e("div",Cn,[t[39]||(t[39]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=g=>s.debounce.delay=g),min:"5",max:"1440",class:"form-input"},null,512),[[B,s.debounce.delay,void 0,{number:!0}]]),t[40]||(t[40]=e("small",null,"èŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",Mn,[t[41]||(t[41]=e("label",null,"æ¯å¤©æœ€å¤šå¤‡ä»½æ¬¡æ•°",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=g=>s.debounce.maxPerDay=g),min:"1",max:"10",class:"form-input"},null,512),[[B,s.debounce.maxPerDay,void 0,{number:!0}]]),t[42]||(t[42]=e("small",null,"èŒƒå›´ï¼š1-10æ¬¡",-1))]),e("div",xn,[t[43]||(t[43]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=g=>s.debounce.keep=g),min:"1",max:"30",class:"form-input"},null,512),[[B,s.debounce.keep,void 0,{number:!0}]]),t[44]||(t[44]=e("small",null,"èŒƒå›´ï¼š1-30ä¸ª",-1))])])):I("",!0)]),e("div",Vn,[e("div",Bn,[t[47]||(t[47]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",Un,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=g=>s.scheduled.enabled=g)},null,512),[[R,s.scheduled.enabled]]),t[46]||(t[46]=e("span",{class:"slider"},null,-1))])]),t[53]||(t[53]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),s.scheduled.enabled?(i(),c("div",An,[e("div",Dn,[t[49]||(t[49]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",Sn,[w(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=g=>s.scheduled.hour=g),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[B,s.scheduled.hour,void 0,{number:!0}]]),t[48]||(t[48]=e("span",null,":",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=g=>s.scheduled.minute=g),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[B,s.scheduled.minute,void 0,{number:!0}]])]),t[50]||(t[50]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",Tn,[t[51]||(t[51]=e("label",null,"ä¿ç•™å¤©æ•°",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=g=>s.scheduled.keep=g),min:"1",max:"30",class:"form-input"},null,512),[[B,s.scheduled.keep,void 0,{number:!0}]]),t[52]||(t[52]=e("small",null,"èŒƒå›´ï¼š1-30å¤©",-1))])])):I("",!0)]),e("div",In,[e("div",Ln,[t[55]||(t[55]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",Wn,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=g=>s.webdav.enabled=g)},null,512),[[R,s.webdav.enabled]]),t[54]||(t[54]=e("span",{class:"slider"},null,-1))])]),t[60]||(t[60]=e("p",{class:"config-info"},"è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚éœ€è¦å…ˆé…ç½® WebDAV è¿æ¥ã€‚",-1)),s.webdav.enabled?(i(),c("div",zn,[e("div",Hn,[e("label",Pn,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=g=>s.webdav.syncDaily=g)},null,512),[[R,s.webdav.syncDaily]]),t[56]||(t[56]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",Fn,[e("label",On,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=g=>s.webdav.syncIncremental=g)},null,512),[[R,s.webdav.syncIncremental]]),t[58]||(t[58]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[59]||(t[59]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ ï¼ˆå¯èƒ½é¢‘ç¹ï¼Œä¸æ¨èï¼‰",-1))])])):I("",!0)]),e("div",Nn,[e("div",jn,[t[62]||(t[62]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",En,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=g=>s.autoClean=g)},null,512),[[R,s.autoClean]]),t[61]||(t[61]=e("span",{class:"slider"},null,-1))])]),t[63]||(t[63]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡/å¤©æ•°çš„æ—§å¤‡ä»½æ–‡ä»¶ã€‚",-1))]),l.value?(i(),c("div",qn,[t[68]||(t[68]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",Rn,[e("div",Gn,[t[64]||(t[64]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½ï¼ˆä»Šæ—¥ï¼‰",-1)),e("span",Jn,y(l.value.debounceToday||0)+" æ¬¡",1)]),e("div",Kn,[t[65]||(t[65]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",Qn,y(E(l.value.lastDebounce)||"æ— "),1)]),e("div",Xn,[t[66]||(t[66]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",Yn,y(E(l.value.lastScheduled)||"æ— "),1)]),e("div",Zn,[t[67]||(t[67]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",ea,y(he()),1)])])])):I("",!0),e("div",ta,[e("button",{class:"btn btn-secondary",onClick:Z},t[69]||(t[69]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),H(" é‡ç½® ")])),e("button",{class:"btn btn-primary",onClick:ge,disabled:v.autoBackupConfig},[t[70]||(t[70]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),H(" "+y(v.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,sa)])])],512),[[ee,n.value==="auto"]]),_.value?(i(),c("div",la,[e("div",na,[t[78]||(t[78]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",aa,[t[73]||(t[73]=e("label",null,[H("WebDAV URL "),e("span",{class:"required"},"*")],-1)),w(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=g=>a.url=g),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[B,a.url]]),t[74]||(t[74]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",oa,[t[75]||(t[75]=e("label",null,[H("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),w(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=g=>a.username=g),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[B,a.username]])]),e("div",ia,[t[76]||(t[76]=e("label",null,[H("å¯†ç  "),e("span",{class:"required"},"*")],-1)),w(e("input",{type:"password","onUpdate:modelValue":t[18]||(t[18]=g=>a.password=g),placeholder:"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,512),[[B,a.password]]),t[77]||(t[77]=e("small",null,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç ",-1))]),e("div",da,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=g=>_.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:x,disabled:v.webdavConfig},y(v.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,ua)])])])):I("",!0),d.show?(i(),c("div",ra,[e("div",ca,[e("h3",null,"ç¡®è®¤"+y(d.title),1),e("p",null,y(d.message),1),e("div",va,[e("button",{class:"btn btn-secondary",onClick:t[20]||(t[20]=g=>d.show=!1)},"å–æ¶ˆ"),e("button",{class:z(["btn",d.confirmClass]),onClick:T},"ç¡®è®¤",2)])])])):I("",!0)]))}},ma=O(pa,[["__scopeId","data-v-36d811e2"]]),ba={key:0,class:"login-container"},ga={class:"login-card"},ha={class:"login-form"},fa={class:"password-input-wrapper"},wa=["type"],ka={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ya={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_a={class:"login-buttons"},$a=["disabled"],Ca={key:0,class:"login-error"},Ma={key:1,class:"admin-layout"},xa={class:"menu-list"},Va={class:"admin-main"},Ba={class:"admin-header"},Ua={class:"header-title"},Aa={class:"admin-content"},Da={key:0,class:"welcome-page"},Sa={class:"welcome-cards"},Ta={class:"welcome-card"},Ia={class:"welcome-value"},La={class:"welcome-card"},Wa={class:"welcome-value"},za={__name:"Admin",setup(W){const n=f("welcome"),b=f(""),k=f(""),_=f(!1),A=f(""),v=f(""),$=f(!1),d=f(""),r=f(!1),a=f(!1),s=ce(()=>{switch(n.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});j(()=>{const C=localStorage.getItem("token");_.value=!!C,_.value&&l()});function l(){return M(this,null,function*(){try{const C=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(C.ok){const m=yield C.json();b.value=m.last_login_time||"",k.value=m.last_login_ip||""}}catch(C){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",C)}})}function o(){return M(this,null,function*(){var C,m;if(!A.value||!v.value){d.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}$.value=!0,d.value="";try{const T=yield Ke(A.value,v.value);T.data.token&&(localStorage.setItem("token",T.data.token),_.value=!0,b.value=T.data.lastLoginTime||"",k.value=T.data.lastLoginIp||"")}catch(T){d.value=((m=(C=T.response)==null?void 0:C.data)==null?void 0:m.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{$.value=!1}})}function p(){localStorage.removeItem("token"),_.value=!1,A.value="",v.value="",d.value=""}function u(){window.open("/","_blank")}function U(){a.value=!a.value}function V(){a.value=!1}return(C,m)=>_.value?(i(),c("div",Ma,[e("aside",{class:z(["admin-sider",{open:a.value}]),onClick:ne(V,["self"])},[e("div",{class:"logo clickable",onClick:m[3]||(m[3]=T=>{n.value="welcome",V()})},"Admin"),e("ul",xa,[e("li",{class:z({active:n.value==="menu"}),onClick:m[4]||(m[4]=T=>{n.value="menu",V()})},"æ ç›®ç®¡ç†",2),e("li",{class:z({active:n.value==="card"}),onClick:m[5]||(m[5]=T=>{n.value="card",V()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:z({active:n.value==="duplicate"}),onClick:m[6]||(m[6]=T=>{n.value="duplicate",V()})},"å»é‡ç®¡ç†",2),e("li",{class:z({active:n.value==="tag"}),onClick:m[7]||(m[7]=T=>{n.value="tag",V()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:z({active:n.value==="ad"}),onClick:m[8]||(m[8]=T=>{n.value="ad",V()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:z({active:n.value==="friend"}),onClick:m[9]||(m[9]=T=>{n.value="friend",V()})},"å‹é“¾ç®¡ç†",2),e("li",{class:z({active:n.value==="user"}),onClick:m[10]||(m[10]=T=>{n.value="user",V()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:z({active:n.value==="backup"}),onClick:m[11]||(m[11]=T=>{n.value="backup",V()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",Va,[e("div",Ba,[e("button",{class:"menu-toggle",onClick:U}," â˜° "),e("div",Ua,y(s.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:u,title:"è¿›å…¥ä¸»é¡µ"},m[16]||(m[16]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("button",{class:"btn logout-btn",onClick:p},"é€€å‡ºç™»å½•")])]),e("div",Aa,[n.value==="welcome"?(i(),c("div",Da,[m[19]||(m[19]=e("h2",{class:"welcome-title"},"æ¬¢è¿æ‚¨è¿›å…¥ Con-Nav-Item åå°ç®¡ç†ç³»ç»Ÿ",-1)),e("div",Sa,[e("div",Ta,[m[17]||(m[17]=X('<div class="welcome-icon time-icon" data-v-53c06362><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-53c06362><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-53c06362></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-53c06362></path></svg></div><div class="welcome-label" data-v-53c06362>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",Ia,y(b.value||"--"),1)]),e("div",La,[m[18]||(m[18]=X('<div class="welcome-icon ip-icon" data-v-53c06362><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-53c06362><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-53c06362></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-53c06362></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-53c06362></circle></svg></div><div class="welcome-label" data-v-53c06362>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",Wa,y(k.value||"--"),1)])])])):I("",!0),n.value==="menu"?(i(),N(_t,{key:1})):I("",!0),n.value==="card"?(i(),N(Et,{key:2})):I("",!0),n.value==="duplicate"?(i(),N(Vs,{key:3})):I("",!0),n.value==="tag"?(i(),N(qs,{key:4})):I("",!0),n.value==="ad"?(i(),N(il,{key:5})):I("",!0),n.value==="friend"?(i(),N(hl,{key:6})):I("",!0),n.value==="user"?(i(),N(Ll,{key:7})):I("",!0),n.value==="backup"?(i(),N(ma,{key:8})):I("",!0)]),m[20]||(m[20]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[H("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(i(),c("div",ba,[e("div",ga,[m[15]||(m[15]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",ha,[w(e("input",{"onUpdate:modelValue":m[0]||(m[0]=T=>A.value=T),type:"text",placeholder:"ç”¨æˆ·å",class:"login-input",onKeyup:ue(o,["enter"])},null,544),[[B,A.value]]),e("div",fa,[w(e("input",{"onUpdate:modelValue":m[1]||(m[1]=T=>v.value=T),type:r.value?"text":"password",placeholder:"å¯†ç ",class:"login-input password-input",onKeyup:ue(o,["enter"])},null,40,wa),[[$e,v.value]]),e("span",{class:"toggle-password",onClick:m[2]||(m[2]=T=>r.value=!r.value)},[r.value?(i(),c("svg",ka,m[12]||(m[12]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]))):(i(),c("svg",ya,m[13]||(m[13]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])))])]),e("div",_a,[e("button",{onClick:u,class:"back-btn"},m[14]||(m[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),H(" è¿”å›é¦–é¡µ ")])),e("button",{onClick:o,class:"login-btn",disabled:$.value},y($.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,$a)]),d.value?(i(),c("p",Ca,y(d.value),1)):I("",!0)])])]))}},Oa=O(za,[["__scopeId","data-v-53c06362"]]);export{Oa as default};
