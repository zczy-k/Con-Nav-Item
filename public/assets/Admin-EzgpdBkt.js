var xe=Object.defineProperty,Ve=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var we=(T,d,b)=>d in T?xe(T,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):T[d]=b,te=(T,d)=>{for(var b in d||(d={}))Ue.call(d,b)&&we(T,b,d[b]);if(he)for(var b of he(d))Ae.call(d,b)&&we(T,b,d[b]);return T},de=(T,d)=>Ve(T,Be(d));var $=(T,d,b)=>new Promise((_,x)=>{var U=o=>{try{V(b.next(o))}catch(v){x(v)}},A=o=>{try{V(b.throw(o))}catch(v){x(v)}},V=o=>o.done?_(o.value):Promise.resolve(o.value).then(U,A);V((b=b.apply(T,d)).next())});import{_ as j,c,o as r,b as e,t as h,z as se,r as g,g as G,w as y,v as B,q as W,F as N,a as H,n as z,e as ue,A as ke,d as L,B as ge,x as fe,j as re,C as X,y as me,p as Y,l as ye,D as De,i as Ie,k as Se,T as Te,E as Le,G as We,H as ze}from"./index-BKPWcpA9.js";import{g as Ce,q as Ne,r as He,s as Pe,t as Fe,w as Oe,x as je,c as Me,i as Ee,u as _e,n as $e,e as Re,y as qe,z as Je,A as be,B as Ge,C as Ke,D as Qe,E as Xe,a as Ye,F as Ze,G as et,H as tt,b as st,I as lt,J as at,K as nt,L as ot,M as it,N as dt,O as ut}from"./urlNormalizer-B_PXLzsb.js";const rt={class:"welcome-page"},ct={class:"welcome-title"},vt={class:"welcome-cards"},pt={class:"welcome-card"},mt={class:"welcome-value"},bt={class:"welcome-card"},gt={class:"welcome-value"},ft={__name:"WelcomePage",props:{lastLoginTime:String,lastLoginIp:String,currentUsername:String},setup(T){return(d,b)=>(r(),c("div",rt,[e("h2",ct,"æ¬¢è¿æ‚¨ï¼Œ"+h(T.currentUsername||"admin")+"ï¼",1),e("div",vt,[e("div",pt,[b[0]||(b[0]=se('<div class="welcome-icon time-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-5cc4f846></path></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",mt,h(T.lastLoginTime||"--"),1)]),e("div",bt,[b[1]||(b[1]=se('<div class="welcome-icon ip-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-5cc4f846></circle></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",gt,h(T.lastLoginIp||"--"),1)])])]))}},ht=j(ft,[["__scopeId","data-v-5cc4f846"]]),wt={class:"menu-manage"},kt={class:"menu-header"},yt={class:"menu-add"},_t={class:"menu-content"},$t={class:"menu-list"},Ct={class:"main-menu"},Mt={class:"menu-info"},xt=["onUpdate:modelValue","onBlur"],Vt={class:"menu-order"},Bt=["onUpdate:modelValue","onBlur"],Ut={class:"menu-actions"},At=["onClick","title"],Dt=["onClick"],It={class:"sub-menu-header"},St={class:"sub-menu-title"},Tt=["onClick"],Lt={key:0,class:"sub-menu-list"},Wt={class:"sub-menu-info"},zt=["onUpdate:modelValue","onBlur"],Nt={class:"sub-menu-order"},Ht=["onUpdate:modelValue","onBlur"],Pt={class:"sub-menu-actions"},Ft=["onClick"],Ot={key:1,class:"empty-sub-menu"},jt=["onClick"],Et={__name:"MenuManage",setup(T){const d=g([]),b=g("");G(_);function _(){return $(this,null,function*(){const l=yield Ce();d.value=l.data.map(s=>de(te({},s),{subMenus:s.subMenus||[],showSubMenu:!1}))})}function x(){return $(this,null,function*(){if(!b.value.trim())return;const l=d.value.length?Math.max(...d.value.map(s=>s.order||0)):0;yield Ne({name:b.value.trim(),order:l+1}),b.value="",_()})}function U(l){return $(this,null,function*(){yield He(l.id,{name:l.name,order:l.order}),_()})}function A(l){return $(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ã€‚"))return;const s=d.value.findIndex(a=>a.id===l);s>-1&&d.value.splice(s,1);try{yield Pe(l)}catch(a){console.error("åˆ é™¤èœå•å¤±è´¥:",a),yield _()}})}function V(l){return $(this,null,function*(){const s=d.value.find(w=>w.id===l),a=prompt("è¯·è¾“å…¥å­èœå•åç§°ï¼š");if(!(a!=null&&a.trim()))return;const u=(s==null?void 0:s.subMenus)||[],p=u.length?Math.max(...u.map(w=>w.order||0)):0;yield Fe(l,{name:a.trim(),order:p+1}),_()})}function o(l){return $(this,null,function*(){yield Oe(l.id,{name:l.name,order:l.order}),_()})}function v(l){return $(this,null,function*(){var s,a;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å¡ç‰‡ã€‚"))try{yield je(l),yield _()}catch(u){console.error("åˆ é™¤å­èœå•å¤±è´¥:",u),alert("åˆ é™¤å¤±è´¥ï¼š"+(((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.error)||u.message))}})}function i(l){const s=d.value.find(a=>a.id===l);s&&(s.showSubMenu=!s.showSubMenu)}return(l,s)=>(r(),c("div",wt,[e("div",kt,[s[2]||(s[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ä¸»èœå•å’Œå­èœå•")],-1)),e("div",yt,[y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),placeholder:"è¯·è¾“å…¥ä¸»èœå•åç§°",class:"input"},null,512),[[B,b.value]]),e("button",{class:"btn btn-primary",onClick:x},[...s[1]||(s[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),W(" æ·»åŠ ä¸»èœå• ",-1)])])])]),e("div",_t,[e("div",$t,[(r(!0),c(N,null,H(d.value,a=>{var u;return r(),c("div",{key:a.id,class:"menu-item"},[e("div",Ct,[e("div",Mt,[s[4]||(s[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),y(e("input",{"onUpdate:modelValue":p=>a.name=p,onBlur:p=>U(a),class:"menu-name-input"},null,40,xt),[[B,a.name]]),e("div",Vt,[s[3]||(s[3]=e("span",{class:"order-label"},"æ’åº",-1)),y(e("input",{"onUpdate:modelValue":p=>a.order=p,type:"number",onBlur:p=>U(a),class:"order-input"},null,40,Bt),[[B,a.order,void 0,{number:!0}]])])]),e("div",Ut,[e("button",{class:"btn btn-icon expand-btn",onClick:p=>i(a.id),title:a.showSubMenu?"æ”¶èµ·å­èœå•":"å±•å¼€å­èœå•"},[...s[5]||(s[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)])],8,At),e("button",{class:"btn btn-danger btn-icon",onClick:p=>A(a.id),title:"åˆ é™¤ä¸»èœå•"},[...s[6]||(s[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Dt)])]),e("div",{class:z(["sub-menu-section",{expanded:a.showSubMenu}])},[e("div",It,[e("div",St,[s[7]||(s[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),W(" å­èœå• ("+h(((u=a.subMenus)==null?void 0:u.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:p=>V(a.id)},[...s[8]||(s[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),W(" æ·»åŠ å­èœå• ",-1)])],8,Tt)]),a.subMenus&&a.subMenus.length>0?(r(),c("div",Lt,[(r(!0),c(N,null,H(a.subMenus,p=>(r(),c("div",{key:p.id,class:"sub-menu-item"},[e("div",Wt,[s[9]||(s[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),y(e("input",{"onUpdate:modelValue":w=>p.name=w,onBlur:w=>o(p),class:"sub-menu-name-input"},null,40,zt),[[B,p.name]]),e("div",Nt,[y(e("input",{"onUpdate:modelValue":w=>p.order=w,type:"number",onBlur:w=>o(p),class:"order-input"},null,40,Ht),[[B,p.order,void 0,{number:!0}]])])]),e("div",Pt,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:w=>v(p.id),title:"åˆ é™¤å­èœå•"},[...s[10]||(s[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Ft)])]))),128))])):(r(),c("div",Ot,[s[11]||(s[11]=e("p",null,"æš‚æ— å­èœå•",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:p=>V(a.id)},"æ·»åŠ ç¬¬ä¸€ä¸ªå­èœå•",8,jt)]))],2)])}),128))])])]))}},Rt=j(Et,[["__scopeId","data-v-5cc45a8d"]]),qt={class:"card-manage"},Jt={class:"card-header"},Gt={class:"card-add"},Kt=["value"],Qt=["value"],Xt={class:"card-card"},Yt={class:"card-table"},Zt=["onUpdate:modelValue","onBlur"],es=["onUpdate:modelValue","onBlur"],ts=["onUpdate:modelValue","onBlur"],ss=["onUpdate:modelValue","onBlur"],ls=["onClick"],as={key:0,class:"selected-tags"},ns={key:1,class:"tag-placeholder"},os=["onUpdate:modelValue","onBlur"],is=["onClick"],ds={class:"modal-body"},us={key:0,class:"empty-tags"},rs={key:1,class:"tag-options"},cs=["checked","onChange"],vs={class:"modal-body"},ps={class:"duplicate-comparison"},ms={class:"card-info-box existing"},bs={class:"card-details"},gs={class:"detail-row"},fs={class:"detail-value"},hs={class:"detail-row"},ws={class:"detail-value url"},ks={key:0,class:"detail-row"},ys={class:"detail-value url"},_s={class:"card-info-box pending"},$s={class:"card-details"},Cs={class:"detail-row"},Ms={class:"detail-value"},xs={class:"detail-row"},Vs={class:"detail-value url"},Bs={key:0,class:"detail-row"},Us={class:"detail-value url"},As={__name:"CardManage",setup(T){const d=g([]),b=g([]),_=g(),x=g(""),U=g(""),A=g(""),V=g(""),o=g([]),v=g(!1),i=g(null),l=g([]),s=g(!1),a=g(null),u=g(null),p=ue(()=>{if(!_.value)return[];const I=d.value.find(m=>m.id===_.value);return(I==null?void 0:I.subMenus)||[]});G(()=>$(null,null,function*(){const I=yield Ce();d.value=I.data,d.value.length&&(_.value=d.value[0].id,x.value="");const m=yield Me();o.value=m.data})),ke(_,()=>{x.value="",f()}),ke(x,f);function w(){x.value=""}function D(){f()}function f(){return $(this,null,function*(){if(!_.value)return;const I=yield Re(_.value,x.value||null);b.value=I.data})}function C(){return $(this,null,function*(){if(!U.value||!A.value)return;const I=b.value.find(m=>Ee({title:U.value,url:A.value},m));I?(a.value=I,u.value={menu_id:_.value,sub_menu_id:x.value||null,title:U.value,url:A.value,logo_url:V.value},s.value=!0):yield K({menu_id:_.value,sub_menu_id:x.value||null,title:U.value,url:A.value,logo_url:V.value})})}function E(I){return $(this,null,function*(){yield _e(I.id,{menu_id:_.value,sub_menu_id:x.value||null,title:I.title,url:I.url,logo_url:I.logo_url,desc:I.desc,order:I.order,tagIds:I.tags?I.tags.map(m=>m.id):[]}),f()})}function P(I){return $(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))return;const m=b.value.findIndex(R=>R.id===I);m>-1&&b.value.splice(m,1);try{yield $e(I)}catch(R){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",R),yield f()}})}function F(I){i.value=I,l.value=I.tags?I.tags.map(m=>m.id):[],v.value=!0}function M(){v.value=!1,i.value=null,l.value=[]}function S(I){const m=l.value.indexOf(I);m>-1?l.value.splice(m,1):l.value.push(I)}function ce(){return $(this,null,function*(){i.value&&(yield _e(i.value.id,{menu_id:i.value.menu_id,sub_menu_id:i.value.sub_menu_id,title:i.value.title,url:i.value.url,logo_url:i.value.logo_url,desc:i.value.desc,order:i.value.order,tagIds:l.value}),M(),f())})}function K(I){return $(this,null,function*(){yield qe(I),U.value="",A.value="",V.value="",f()})}function Q(){s.value=!1,a.value=null,u.value=null}function Z(){Q(),U.value="",A.value="",V.value=""}function ve(){return $(this,null,function*(){!u.value||!a.value||(yield $e(a.value.id),yield K(u.value),Q())})}function pe(){u.value&&(U.value=u.value.title,A.value=u.value.url,V.value=u.value.logo_url||"",Q(),alert("è¯·ä¿®æ”¹å¡ç‰‡ä¿¡æ¯åå†æ¬¡ç‚¹å‡»â€œæ·»åŠ å¡ç‰‡â€æŒ‰é’®"))}return(I,m)=>{var R,le,q,ae,ne,ee,oe,ie;return r(),c("div",qt,[e("div",Jt,[m[9]||(m[9]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",Gt,[y(e("select",{"onUpdate:modelValue":m[0]||(m[0]=n=>_.value=n),class:"input narrow",onChange:w},[(r(!0),c(N,null,H(d.value,n=>(r(),c("option",{value:n.id,key:n.id},h(n.name),9,Kt))),128))],544),[[ge,_.value]]),y(e("select",{"onUpdate:modelValue":m[1]||(m[1]=n=>x.value=n),class:"input narrow",onChange:D},[m[7]||(m[7]=e("option",{value:""},"ä¸»èœå•",-1)),(r(!0),c(N,null,H(p.value,n=>(r(),c("option",{value:n.id,key:n.id},h(n.name),9,Qt))),128))],544),[[ge,x.value]]),y(e("input",{"onUpdate:modelValue":m[2]||(m[2]=n=>U.value=n),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[B,U.value]]),y(e("input",{"onUpdate:modelValue":m[3]||(m[3]=n=>A.value=n),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[B,A.value]]),y(e("input",{"onUpdate:modelValue":m[4]||(m[4]=n=>V.value=n),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[B,V.value]]),e("button",{class:"btn",onClick:C},[...m[8]||(m[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),W(" æ·»åŠ å¡ç‰‡ ",-1)])])])]),e("div",Xt,[e("table",Yt,[m[11]||(m[11]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),c(N,null,H(b.value,n=>(r(),c("tr",{key:n.id},[e("td",null,[y(e("input",{"onUpdate:modelValue":t=>n.title=t,onBlur:t=>E(n),class:"table-input"},null,40,Zt),[[B,n.title]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":t=>n.url=t,onBlur:t=>E(n),class:"table-input"},null,40,es),[[B,n.url]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":t=>n.logo_url=t,onBlur:t=>E(n),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ts),[[B,n.logo_url]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":t=>n.desc=t,onBlur:t=>E(n),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,ss),[[B,n.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:t=>F(n)},[n.tags&&n.tags.length>0?(r(),c("div",as,[(r(!0),c(N,null,H(n.tags,t=>(r(),c("span",{key:t.id,class:"mini-tag",style:fe({backgroundColor:t.color})},h(t.name),5))),128))])):(r(),c("span",ns,"é€‰æ‹©æ ‡ç­¾"))],8,ls)]),e("td",null,[y(e("input",{"onUpdate:modelValue":t=>n.order=t,type:"number",onBlur:t=>E(n),class:"table-input order-input"},null,40,os),[[B,n.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:t=>P(n.id),title:"åˆ é™¤"},[...m[10]||(m[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,is)])]))),128))])])]),v.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:M},[e("div",{class:"modal-content",onClick:m[5]||(m[5]=re(()=>{},["stop"]))},[e("div",{class:"modal-header"},[m[12]||(m[12]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:M},"Ã—")]),e("div",ds,[o.value.length===0?(r(),c("div",us,[...m[13]||(m[13]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)])])):(r(),c("div",rs,[(r(!0),c(N,null,H(o.value,n=>(r(),c("label",{key:n.id,class:"tag-option"},[e("input",{type:"checkbox",checked:l.value.includes(n.id),onChange:t=>S(n.id)},null,40,cs),e("span",{class:"tag-label",style:fe({backgroundColor:n.color})},h(n.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:M},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ce},"ç¡®å®š")])])])):L("",!0),s.value?(r(),c("div",{key:1,class:"modal-overlay",onClick:Q},[e("div",{class:"modal-content duplicate-modal",onClick:m[6]||(m[6]=re(()=>{},["stop"]))},[e("div",{class:"modal-header"},[m[14]||(m[14]=se('<div class="header-with-icon" data-v-edd548d5><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" data-v-edd548d5><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-edd548d5></path><line x1="12" y1="9" x2="12" y2="13" data-v-edd548d5></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-edd548d5></line></svg><h3 data-v-edd548d5>æ£€æµ‹åˆ°é‡å¤å¡ç‰‡</h3></div>',1)),e("button",{class:"close-btn",onClick:Q},"Ã—")]),e("div",vs,[m[24]||(m[24]=e("div",{class:"duplicate-warning"},[e("p",{class:"warning-text"},"æ‚¨è¦æ·»åŠ çš„å¡ç‰‡ä¸ä»¥ä¸‹ç°æœ‰å¡ç‰‡é‡å¤ï¼š")],-1)),e("div",ps,[e("div",ms,[m[18]||(m[18]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"ç°æœ‰å¡ç‰‡")],-1)),e("div",bs,[e("div",gs,[m[15]||(m[15]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",fs,h((R=a.value)==null?void 0:R.title),1)]),e("div",hs,[m[16]||(m[16]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",ws,h((le=a.value)==null?void 0:le.url),1)]),(q=a.value)!=null&&q.logo_url?(r(),c("div",ks,[m[17]||(m[17]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",ys,h((ae=a.value)==null?void 0:ae.logo_url),1)])):L("",!0)])]),m[23]||(m[23]=e("div",{class:"arrow-divider"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1)),e("div",_s,[m[22]||(m[22]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"å¾…æ·»åŠ å¡ç‰‡")],-1)),e("div",$s,[e("div",Cs,[m[19]||(m[19]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",Ms,h((ne=u.value)==null?void 0:ne.title),1)]),e("div",xs,[m[20]||(m[20]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",Vs,h((ee=u.value)==null?void 0:ee.url),1)]),(oe=u.value)!=null&&oe.logo_url?(r(),c("div",Bs,[m[21]||(m[21]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",Us,h((ie=u.value)==null?void 0:ie.logo_url),1)])):L("",!0)])])]),m[25]||(m[25]=e("div",{class:"duplicate-actions-info"},[e("p",null,"è¯·é€‰æ‹©å¦‚ä½•å¤„ç†ï¼š")],-1))]),e("div",{class:"modal-footer duplicate-footer"},[e("button",{class:"btn btn-secondary",onClick:Z},[...m[26]||(m[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),W(" è·³è¿‡ ",-1)])]),e("button",{class:"btn btn-warning",onClick:ve},[...m[27]||(m[27]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1),W(" æ›¿æ¢ ",-1)])]),e("button",{class:"btn btn-primary",onClick:pe},[...m[28]||(m[28]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),W(" ç¼–è¾‘åæ·»åŠ  ",-1)])])])])])):L("",!0)])}}},Ds=j(As,[["__scopeId","data-v-edd548d5"]]),Is={class:"duplicate-manage"},Ss={class:"section-header"},Ts=["disabled"],Ls={key:0,class:"duplicate-results"},Ws={class:"result-summary"},zs={class:"summary-card"},Ns={class:"summary-value"},Hs={class:"summary-card warning"},Ps={class:"summary-value"},Fs={class:"summary-card danger"},Os={class:"summary-value"},js={class:"duplicate-groups"},Es={class:"group-header"},Rs={class:"group-count"},qs={class:"card-item original"},Js={class:"card-info"},Gs={class:"card-title"},Ks={class:"card-url"},Qs={key:0,class:"card-desc"},Xs={class:"card-id"},Ys={class:"duplicates-list"},Zs={class:"card-info"},el={class:"card-title"},tl={class:"card-url"},sl={key:0,class:"card-desc"},ll={class:"card-actions"},al={class:"card-id"},nl=["onClick","disabled"],ol={class:"group-actions"},il=["onClick","disabled"],dl={class:"global-actions"},ul=["disabled"],rl={key:1,class:"no-duplicates"},cl={key:2,class:"initial-hint"},vl={key:3,class:"error"},pl={__name:"DuplicateManage",setup(T){const d=g(!1),b=g(!1),_=g(!1),x=g([]),U=g(0),A=g(0),V=g("");function o(){return $(this,null,function*(){var s,a;d.value=!0,V.value="";try{const u=yield Je();U.value=u.data.total,x.value=u.data.duplicateGroups,A.value=u.data.duplicateCount,_.value=!0}catch(u){V.value=((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",u)}finally{d.value=!1}})}function v(s){return $(this,null,function*(){var a,u,p;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){b.value=!0,V.value="";try{console.log("[å»é‡ç®¡ç†] åˆ é™¤å•ä¸ªå¡ç‰‡:",s);const w=yield be([s]);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",w.data),w.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(w.data.message||"æœªçŸ¥é”™è¯¯")}catch(w){console.error("[å»é‡ç®¡ç†] åˆ é™¤å¡ç‰‡å¤±è´¥:",w),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(a=w.response)==null?void 0:a.data),V.value=((p=(u=w.response)==null?void 0:u.data)==null?void 0:p.error)||w.message||"åˆ é™¤å¤±è´¥"}finally{b.value=!1}}})}function i(s){return $(this,null,function*(){var u,p,w;const a=s.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${a} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${s.original.title}`)){b.value=!0,V.value="";try{const D=s.duplicates.map(C=>C.id);console.log("[å»é‡ç®¡ç†] åˆ é™¤ä¸€ç»„é‡å¤å¡ç‰‡:",D);const f=yield be(D);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",f.data),f.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(f.data.message||"æœªçŸ¥é”™è¯¯")}catch(D){console.error("[å»é‡ç®¡ç†] åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",D),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(u=D.response)==null?void 0:u.data),V.value=((w=(p=D.response)==null?void 0:p.data)==null?void 0:w.error)||D.message||"åˆ é™¤å¤±è´¥"}finally{b.value=!1}}})}function l(){return $(this,null,function*(){var a,u,p;const s=A.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${s} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){b.value=!0,V.value="";try{const w=x.value.flatMap(f=>f.duplicates.map(C=>C.id));console.log("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡:",w);const D=yield be(w);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",D.data),D.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield o()):V.value="åˆ é™¤å¤±è´¥ï¼š"+(D.data.message||"æœªçŸ¥é”™è¯¯")}catch(w){console.error("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",w),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(a=w.response)==null?void 0:a.data),V.value=((p=(u=w.response)==null?void 0:u.data)==null?void 0:p.error)||w.message||"åˆ é™¤å¤±è´¥"}finally{b.value=!1}}})}return(s,a)=>(r(),c("div",Is,[e("div",Ss,[a[0]||(a[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:o,class:"btn btn-primary",disabled:d.value},h(d.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,Ts)]),x.value.length>0?(r(),c("div",Ls,[e("div",Ws,[e("div",zs,[a[1]||(a[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",Ns,h(U.value),1)]),e("div",Hs,[a[2]||(a[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",Ps,h(x.value.length),1)]),e("div",Fs,[a[3]||(a[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",Os,h(A.value),1)])]),e("div",js,[(r(!0),c(N,null,H(x.value,(u,p)=>(r(),c("div",{key:p,class:"duplicate-group"},[e("div",Es,[e("h4",null,"é‡å¤ç»„ "+h(p+1),1),e("span",Rs,h(u.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",qs,[a[4]||(a[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",Js,[e("div",Gs,h(u.original.title),1),e("div",Ks,h(u.original.url),1),u.original.desc?(r(),c("div",Qs,h(u.original.desc),1)):L("",!0)]),e("div",Xs,"ID: "+h(u.original.id),1)]),e("div",Ys,[(r(!0),c(N,null,H(u.duplicates,w=>(r(),c("div",{key:w.id,class:"card-item duplicate"},[a[5]||(a[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",Zs,[e("div",el,h(w.title),1),e("div",tl,h(w.url),1),w.desc?(r(),c("div",sl,h(w.desc),1)):L("",!0)]),e("div",ll,[e("span",al,"ID: "+h(w.id),1),e("button",{onClick:D=>v(w.id),class:"btn-remove",disabled:b.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,nl)])]))),128))]),e("div",ol,[e("button",{onClick:w=>i(u),class:"btn btn-danger",disabled:b.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+h(u.duplicates.length)+" å¼ ) ",9,il)])]))),128))]),e("div",dl,[e("button",{onClick:l,class:"btn btn-danger btn-large",disabled:b.value},h(b.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${A.value} å¼ )`),9,ul)])])):_.value&&x.value.length===0?(r(),c("div",rl,[...a[6]||(a[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)])])):_.value?L("",!0):(r(),c("div",cl,[...a[7]||(a[7]=[se('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-62bbc778><circle cx="12" cy="12" r="10" data-v-62bbc778></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-62bbc778></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-62bbc778></line></svg><h3 data-v-62bbc778>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-62bbc778>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-62bbc778><li data-v-62bbc778>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-62bbc778>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)])])),V.value?(r(),c("p",vl,h(V.value),1)):L("",!0)]))}},ml=j(pl,[["__scopeId","data-v-62bbc778"]]),bl={class:"tag-manage"},gl={class:"tag-header"},fl={class:"tag-add"},hl={class:"tag-content"},wl={key:0,class:"empty-state"},kl={key:1,class:"tag-list"},yl={class:"tag-info"},_l=["onUpdate:modelValue","onBlur"],$l={class:"tag-stats"},Cl={class:"card-count"},Ml={class:"tag-controls"},xl=["onUpdate:modelValue","onChange"],Vl={class:"tag-order"},Bl=["onUpdate:modelValue","onBlur"],Ul={class:"tag-actions"},Al=["onClick"],Dl={__name:"TagManage",setup(T){const d=g([]),b=g(""),_=g("#2566d8");G(x);function x(){return $(this,null,function*(){const o=yield Me();d.value=o.data;for(const v of d.value)try{const i=yield Ge(v.id);v.cardCount=i.data.count}catch(i){v.cardCount=0}})}function U(){return $(this,null,function*(){var s,a;if(!b.value.trim())return;const o=d.value.length?Math.max(...d.value.map(u=>u.order||0)):0,v=b.value.trim(),i=_.value,l={id:Date.now(),name:v,color:i,order:o+1,cardCount:0,_temp:!0};d.value.push(l),b.value="",_.value="#2566d8";try{const u=yield Ke({name:v,color:i,order:o+1}),p=d.value.findIndex(w=>w.id===l.id);p>-1&&(d.value[p]=de(te({},u.data),{cardCount:0}))}catch(u){const p=d.value.findIndex(w=>w.id===l.id);p>-1&&d.value.splice(p,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.error)||u.message))}})}function A(o){return $(this,null,function*(){var v,i;if(!o._temp)try{yield Qe(o.id,{name:o.name,color:o.color,order:o.order})}catch(l){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((i=(v=l.response)==null?void 0:v.data)==null?void 0:i.error)||l.message)),x()}})}function V(o){return $(this,null,function*(){var s,a;const v=d.value.find(u=>u.id===o);if(!v)return;const i=v.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${v.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${v.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${v.name}"å—ï¼Ÿ`;if(!confirm(i))return;const l=d.value.findIndex(u=>u.id===o);l>-1&&d.value.splice(l,1);try{yield Xe(o)}catch(u){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.error)||u.message)),x()}})}return(o,v)=>(r(),c("div",bl,[e("div",gl,[v[3]||(v[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",fl,[y(e("input",{"onUpdate:modelValue":v[0]||(v[0]=i=>b.value=i),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[B,b.value]]),y(e("input",{"onUpdate:modelValue":v[1]||(v[1]=i=>_.value=i),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[B,_.value]]),e("button",{class:"btn btn-primary",onClick:U},[...v[2]||(v[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),W(" æ·»åŠ æ ‡ç­¾ ",-1)])])])]),e("div",hl,[d.value.length===0?(r(),c("div",wl,[...v[4]||(v[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)])])):(r(),c("div",kl,[(r(!0),c(N,null,H(d.value,i=>(r(),c("div",{key:i.id,class:"tag-item"},[e("div",{class:"tag-preview",style:fe({backgroundColor:i.color})},[...v[5]||(v[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)])],4),e("div",yl,[y(e("input",{"onUpdate:modelValue":l=>i.name=l,onBlur:l=>A(i),class:"tag-name-input",maxlength:"20"},null,40,_l),[[B,i.name]]),e("div",$l,[e("span",Cl,h(i.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",Ml,[y(e("input",{"onUpdate:modelValue":l=>i.color=l,type:"color",onChange:l=>A(i),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,xl),[[B,i.color]]),e("div",Vl,[v[6]||(v[6]=e("span",{class:"order-label"},"æ’åº",-1)),y(e("input",{"onUpdate:modelValue":l=>i.order=l,type:"number",onBlur:l=>A(i),class:"order-input"},null,40,Bl),[[B,i.order,void 0,{number:!0}]])])]),e("div",Ul,[e("button",{class:"btn btn-danger btn-icon",onClick:l=>V(i.id),title:"åˆ é™¤æ ‡ç­¾"},[...v[7]||(v[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Al)])]))),128))]))])]))}},Il=j(Dl,[["__scopeId","data-v-56efcb56"]]),Sl={class:"ad-manage"},Tl={class:"ad-header"},Ll={class:"ad-section"},Wl={class:"ad-card"},zl={class:"ad-table"},Nl=["onUpdate:modelValue","onBlur"],Hl=["onUpdate:modelValue","onBlur"],Pl=["onClick"],Fl={class:"ad-section"},Ol={class:"ad-card"},jl={class:"ad-table"},El=["onUpdate:modelValue","onBlur"],Rl=["onUpdate:modelValue","onBlur"],ql=["onClick"],Jl={__name:"AdManage",setup(T){const d=g([]),b=g([]),_=g(""),x=g(""),U=g("left");G(A);function A(){return $(this,null,function*(){try{const i=yield Ye();let l=[];Array.isArray(i.data)?l=i.data:i.data&&Array.isArray(i.data.data)&&(l=i.data.data),d.value=l.filter(s=>s.position==="left"),b.value=l.filter(s=>s.position==="right")}catch(i){console.error("åŠ è½½å¹¿å‘Šå¤±è´¥:",i),d.value=[],b.value=[]}})}function V(){return $(this,null,function*(){var i,l;if(!_.value||!x.value){alert("è¯·å¡«å†™å¹¿å‘Šå›¾ç‰‡é“¾æ¥å’Œè·³è½¬é“¾æ¥");return}try{yield Ze({position:U.value,img:_.value,url:x.value}),_.value="",x.value="",U.value="left",yield A()}catch(s){alert("æ·»åŠ å¹¿å‘Šå¤±è´¥ï¼š"+(((l=(i=s.response)==null?void 0:i.data)==null?void 0:l.error)||s.message))}})}function o(i){return $(this,null,function*(){var l,s;try{yield et(i.id,{img:i.img,url:i.url})}catch(a){alert("æ›´æ–°å¹¿å‘Šå¤±è´¥ï¼š"+(((s=(l=a.response)==null?void 0:l.data)==null?void 0:s.error)||a.message)),yield A()}})}function v(i){return $(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¹¿å‘Šå—ï¼Ÿ"))return;const l=d.value.findIndex(a=>a.id===i),s=b.value.findIndex(a=>a.id===i);l>-1&&d.value.splice(l,1),s>-1&&b.value.splice(s,1);try{yield tt(i)}catch(a){console.error("åˆ é™¤å¹¿å‘Šå¤±è´¥:",a),yield A()}})}return(i,l)=>(r(),c("div",Sl,[e("div",Tl,[e("form",{class:"ad-add-row",onSubmit:re(V,["prevent"])},[y(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>_.value=s),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[B,_.value]]),y(e("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>x.value=s),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[B,x.value]]),y(e("select",{"onUpdate:modelValue":l[2]||(l[2]=s=>U.value=s),class:"input select-input"},[...l[3]||(l[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)])],512),[[ge,U.value]]),l[4]||(l[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",Ll,[l[6]||(l[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Wl,[e("table",zl,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),c(N,null,H(d.value,s=>(r(),c("tr",{key:s.id},[e("td",null,[y(e("input",{"onUpdate:modelValue":a=>s.img=a,onBlur:a=>o(s),class:"input"},null,40,Nl),[[B,s.img]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":a=>s.url=a,onBlur:a=>o(s),class:"input"},null,40,Hl),[[B,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:a=>v(s.id)},"åˆ é™¤å¹¿å‘Š",8,Pl)])]))),128))])])])]),e("div",Fl,[l[8]||(l[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",Ol,[e("table",jl,[l[7]||(l[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),c(N,null,H(b.value,s=>(r(),c("tr",{key:s.id},[e("td",null,[y(e("input",{"onUpdate:modelValue":a=>s.img=a,onBlur:a=>o(s),class:"input"},null,40,El),[[B,s.img]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":a=>s.url=a,onBlur:a=>o(s),class:"input"},null,40,Rl),[[B,s.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:a=>v(s.id)},"åˆ é™¤å¹¿å‘Š",8,ql)])]))),128))])])])])]))}},Gl=j(Jl,[["__scopeId","data-v-9c35605d"]]),Kl={class:"friend-manage"},Ql={class:"friend-add"},Xl={class:"friend-card"},Yl={class:"friend-table"},Zl=["onUpdate:modelValue","onBlur"],ea=["onUpdate:modelValue","onBlur"],ta=["onUpdate:modelValue","onBlur"],sa=["onClick"],la={__name:"FriendLinkManage",setup(T){const d=g([]),b=g(""),_=g(""),x=g("");G(U);function U(){return $(this,null,function*(){const v=yield st();d.value=v.data})}function A(){return $(this,null,function*(){!b.value||!_.value||(yield lt({title:b.value,url:_.value,logo:x.value}),b.value="",_.value="",x.value="",U())})}function V(v){return $(this,null,function*(){yield at(v.id,{title:v.title,url:v.url,logo:v.logo}),U()})}function o(v){return $(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‹é“¾å—ï¼Ÿ"))return;const i=d.value.findIndex(l=>l.id===v);i>-1&&d.value.splice(i,1);try{yield nt(v)}catch(l){console.error("åˆ é™¤å‹é“¾å¤±è´¥:",l),yield U()}})}return(v,i)=>(r(),c("div",Kl,[i[4]||(i[4]=e("div",{class:"friend-header"},null,-1)),e("div",Ql,[y(e("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>b.value=l),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[B,b.value]]),y(e("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>_.value=l),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[B,_.value]]),y(e("input",{"onUpdate:modelValue":i[2]||(i[2]=l=>x.value=l),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[B,x.value]]),e("button",{class:"btn",onClick:A},"æ·»åŠ å‹é“¾")]),e("div",Xl,[e("table",Yl,[i[3]||(i[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(r(!0),c(N,null,H(d.value,l=>(r(),c("tr",{key:l.id},[e("td",null,[y(e("input",{"onUpdate:modelValue":s=>l.title=s,onBlur:s=>V(l),class:"input"},null,40,Zl),[[B,l.title]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":s=>l.url=s,onBlur:s=>V(l),class:"input"},null,40,ea),[[B,l.url]])]),e("td",null,[y(e("input",{"onUpdate:modelValue":s=>l.logo=s,onBlur:s=>V(l),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ta),[[B,l.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:s=>o(l.id)},"åˆ é™¤",8,sa)])]))),128))])])])]))}},aa=j(la,[["__scopeId","data-v-c25e838c"]]),na={class:"user-manage"},oa={class:"user-card"},ia={class:"username-section"},da={class:"username-form"},ua={class:"current-username"},ra={class:"username-display"},ca={class:"form-group"},va={class:"form-actions"},pa=["disabled"],ma={class:"password-section"},ba={class:"password-form"},ga={class:"form-group"},fa={class:"form-group"},ha={class:"form-group"},wa={class:"form-actions"},ka=["disabled"],ya={__name:"UserManage",setup(T){const d=g(""),b=g(""),_=g(""),x=g(!1),U=g(""),A=g("success"),V=g({}),o=g(""),v=g(!1),i=g(""),l=g("success");G(()=>$(null,null,function*(){yield s()}));function s(){return $(this,null,function*(){try{const D=yield ot();V.value=D.data.data||D.data}catch(D){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",D)}})}function a(){return $(this,null,function*(){var D,f;if(!o.value){u("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(o.value.length<3||o.value.length>20){u("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(o.value===V.value.username){u("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}v.value=!0,i.value="";try{yield it(o.value),u("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),o.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(C){u(((f=(D=C.response)==null?void 0:D.data)==null?void 0:f.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{v.value=!1}})}function u(D,f){i.value=D,l.value=f,setTimeout(()=>{i.value=""},3e3)}function p(){return $(this,null,function*(){var D,f;if(!d.value||!b.value||!_.value){w("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(b.value!==_.value){w("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(b.value.length<6){w("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}x.value=!0,U.value="";try{yield dt(d.value,b.value),w("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),d.value="",b.value="",_.value=""}catch(C){w(((f=(D=C.response)==null?void 0:D.data)==null?void 0:f.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{x.value=!1}})}function w(D,f){U.value=D,A.value=f,D==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&f==="success"?setTimeout(()=>{U.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{U.value=""},3e3)}return(D,f)=>(r(),c("div",na,[f[11]||(f[11]=e("div",{class:"user-header"},null,-1)),e("div",oa,[e("div",ia,[f[6]||(f[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",da,[e("div",ua,[f[4]||(f[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",ra,h(V.value.username||"admin"),1)]),e("div",ca,[f[5]||(f[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),y(e("input",{"onUpdate:modelValue":f[0]||(f[0]=C=>o.value=C),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[B,o.value]])]),e("div",va,[e("button",{onClick:a,class:"btn",disabled:v.value},h(v.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,pa)]),i.value?(r(),c("p",{key:0,class:z(["message",l.value])},h(i.value),3)):L("",!0)])]),e("div",ma,[f[10]||(f[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",ba,[e("div",ga,[f[7]||(f[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),y(e("input",{"onUpdate:modelValue":f[1]||(f[1]=C=>d.value=C),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[B,d.value]])]),e("div",fa,[f[8]||(f[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),y(e("input",{"onUpdate:modelValue":f[2]||(f[2]=C=>b.value=C),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[B,b.value]])]),e("div",ha,[f[9]||(f[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),y(e("input",{"onUpdate:modelValue":f[3]||(f[3]=C=>_.value=C),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[B,_.value]])]),e("div",wa,[e("button",{onClick:p,class:"btn",disabled:x.value},h(x.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,ka)]),U.value?(r(),c("p",{key:0,class:z(["message",A.value])},h(U.value),3)):L("",!0)])])])]))}},_a=j(ya,[["__scopeId","data-v-40392133"]]),$a={class:"backup-manage"},Ca={class:"tabs"},Ma={class:"tab-content"},xa={class:"toolbar"},Va=["disabled"],Ba=["disabled"],Ua=["disabled"],Aa={class:"backup-list"},Da={key:0,class:"empty-state"},Ia={key:1,class:"backup-grid"},Sa={class:"backup-info"},Ta={class:"backup-name"},La={class:"backup-meta"},Wa={class:"backup-size"},za={class:"backup-date"},Na={class:"backup-actions"},Ha=["onClick"],Pa=["onClick"],Fa=["onClick"],Oa=["onClick"],ja={class:"tab-content"},Ea={class:"toolbar"},Ra=["disabled"],qa=["disabled"],Ja={key:1,class:"info-box"},Ga={class:"backup-list"},Ka={key:0,class:"empty-state"},Qa={key:1,class:"backup-grid"},Xa={class:"backup-info"},Ya={class:"backup-name"},Za={class:"backup-meta"},en={class:"backup-size"},tn={class:"backup-date"},sn={class:"backup-actions"},ln=["onClick"],an=["onClick"],nn={class:"tab-content"},on={class:"config-section"},dn={class:"config-card"},un={class:"config-header"},rn={class:"switch"},cn={key:0,class:"config-fields"},vn={class:"field-row"},pn={class:"field-row"},mn={class:"config-card"},bn={class:"config-header"},gn={class:"switch"},fn={key:0,class:"config-fields"},hn={class:"field-row"},wn={class:"time-input"},kn={class:"field-row"},yn={class:"field-row checkbox-row"},_n={class:"checkbox-label"},$n={class:"config-card"},Cn={class:"config-header"},Mn={class:"switch"},xn={key:0,class:"config-fields"},Vn={class:"field-row checkbox-row"},Bn={class:"checkbox-label"},Un={class:"field-row checkbox-row"},An={class:"checkbox-label"},Dn={class:"config-card"},In={class:"config-header"},Sn={class:"switch"},Tn={key:0,class:"stats-card"},Ln={class:"stats-grid"},Wn={class:"stat-item"},zn={class:"stat-value"},Nn={class:"stat-item"},Hn={class:"stat-value"},Pn={class:"stat-item"},Fn={class:"stat-value"},On={class:"stat-item"},jn={class:"stat-value"},En={class:"config-actions"},Rn=["disabled"],qn={key:0,class:"modal-overlay"},Jn={class:"modal-content config-modal"},Gn={class:"form-group"},Kn={class:"form-group"},Qn={class:"form-group"},Xn=["placeholder"],Yn={key:0},Zn={key:1},eo={class:"modal-actions"},to=["disabled"],so={key:1,class:"modal-overlay"},lo={class:"modal-content"},ao={class:"modal-actions"},no={key:2,class:"modal-overlay"},oo={class:"modal-content config-modal"},io={class:"form-group"},uo={class:"form-group"},ro={class:"modal-actions"},co=["disabled"],vo={key:3,class:"modal-overlay"},po={class:"modal-content config-modal"},mo={class:"form-group"},bo={class:"modal-actions"},go=["disabled"],fo={__name:"BackupManage",setup(T){const d=g("local"),b=g([]),_=g([]),x=g(!1),U=g(!1),A=g(!1),V=g(null),o=X({create:!1,list:!1,delete:!1,restore:!1,upload:!1,rename:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),v=X({name:"",description:""}),i=X({oldName:"",newName:""}),l=g({text:"",type:""}),s=X({show:!1,filename:"",action:null,title:"",message:"",confirmClass:""}),a=X({configured:!1,url:"",username:""}),u=X({url:"",username:"",password:""}),p=X({debounce:{enabled:!0,delay:30,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!1},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!1},autoClean:!0}),w=g(null),D=localStorage.getItem("token");function f(O){return $(this,arguments,function*(n,t={}){return(yield fetch(n,de(te({},t),{headers:te({Authorization:`Bearer ${D}`,"Content-Type":"application/json"},t.headers)}))).json()})}const C=(n,t="success")=>{l.value={text:n,type:t},setTimeout(()=>{l.value={text:"",type:""}},3e3)},E=()=>{v.name="",v.description="",U.value=!0},P=()=>$(null,null,function*(){o.create=!0;const n=yield f("/api/backup/create",{method:"POST",body:JSON.stringify({name:v.name||null,description:v.description||null})});n.success?(C("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),U.value=!1,yield S()):C(n.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),o.create=!1}),F=n=>{i.oldName=n,i.newName=n.replace(".zip",""),A.value=!0},M=()=>$(null,null,function*(){if(!i.newName.trim()){C("è¯·è¾“å…¥æ–°åç§°","error");return}o.rename=!0;const n=yield f(`/api/backup/rename/${i.oldName}`,{method:"PUT",body:JSON.stringify({newName:i.newName})});n.success?(C("é‡å‘½åæˆåŠŸï¼"),A.value=!1,yield S()):C(n.message||"é‡å‘½åå¤±è´¥","error"),o.rename=!1}),S=()=>$(null,null,function*(){o.list=!0;const n=yield f("/api/backup/list");n.success?b.value=n.backups:C("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),o.list=!1}),ce=n=>{window.open(`/api/backup/download/${n}?token=${D}`,"_blank")},K=(n,t)=>{s.show=!0,s.filename=t,s.action=n,n==="delete"?(s.title="åˆ é™¤",s.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,s.confirmClass="btn-danger"):n==="restore"?(s.title="æ¢å¤",s.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,s.confirmClass="btn-restore"):n==="webdav-restore"?(s.title="ä»WebDAVæ¢å¤",s.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${t} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,s.confirmClass="btn-restore"):n==="webdav-delete"&&(s.title="åˆ é™¤WebDAVå¤‡ä»½",s.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${t} å—ï¼Ÿ`,s.confirmClass="btn-danger")},Q=()=>$(null,null,function*(){const{action:n,filename:t}=s;if(s.show=!1,n==="delete"){o.delete=!0;const O=yield f(`/api/backup/delete/${t}`,{method:"DELETE"});O.success?(C("åˆ é™¤æˆåŠŸï¼"),yield S()):C(O.message||"åˆ é™¤å¤±è´¥","error"),o.delete=!1}else if(n==="restore"){o.restore=!0;const O=yield f(`/api/backup/restore/${t}`,{method:"POST"});O.success?(C("æ¢å¤æˆåŠŸï¼"),yield S()):C(O.message||"æ¢å¤å¤±è´¥","error"),o.restore=!1}else n==="webdav-restore"?yield ae(t):n==="webdav-delete"&&(yield ne(t))}),Z=n=>n?new Date(n).toLocaleString("zh-CN",{hour12:!1}):"--",ve=()=>{V.value.click()},pe=n=>$(null,null,function*(){const t=n.target.files[0];if(t){if(!t.name.endsWith(".zip")){C("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),n.target.value="";return}if(t.size>500*1024*1024){C("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),n.target.value="";return}o.upload=!0;try{const O=new FormData;O.append("backup",t);const J=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${D}`},body:O})).json();J.success?(C("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield S()):C(J.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(O){console.error("ä¸Šä¼ å¤±è´¥:",O),C("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{o.upload=!1,n.target.value=""}}}),I=()=>$(null,null,function*(){const n=yield f("/api/backup/webdav/config");n.success&&n.config&&(a.configured=n.config.configured,a.url=n.config.url||"",a.username=n.config.username||"")}),m=()=>$(null,null,function*(){yield I(),u.url=a.url,u.username=a.username,u.password="",x.value=!0}),R=()=>$(null,null,function*(){if(!u.url||!u.username){C("è¯·å¡«å†™URLå’Œç”¨æˆ·å","error");return}if(!a.configured&&!u.password){C("é¦–æ¬¡é…ç½®æ—¶å¯†ç ä¸èƒ½ä¸ºç©º","error");return}o.webdavConfig=!0;const n=yield f("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(u)});n.success?(C("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),x.value=!1,yield I(),a.configured&&(yield q())):C(n.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),o.webdavConfig=!1}),le=()=>$(null,null,function*(){o.webdavBackup=!0;const n=yield f("/api/backup/webdav/backup",{method:"POST"});n.success?(C("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield q()):C(n.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),o.webdavBackup=!1}),q=()=>$(null,null,function*(){o.webdavList=!0;const n=yield f("/api/backup/webdav/list");n.success?_.value=n.backups||[]:C("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),o.webdavList=!1}),ae=n=>$(null,null,function*(){o.webdavRestore=!0;const t=yield f("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:n})});t.success?C("ä»WebDAVæ¢å¤æˆåŠŸï¼"):C(t.message||"ä»WebDAVæ¢å¤å¤±è´¥","error"),o.webdavRestore=!1}),ne=n=>$(null,null,function*(){o.webdavDelete=!0;const t=yield f(`/api/backup/webdav/delete/${n}`,{method:"DELETE"});t.success?(C("åˆ é™¤æˆåŠŸï¼"),yield q()):C(t.message||"åˆ é™¤å¤±è´¥","error"),o.webdavDelete=!1}),ee=()=>$(null,null,function*(){const n=yield f("/api/backup/auto/config");n.success&&n.config?(Object.assign(p,n.config),w.value=n.stats||null):C("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),oe=()=>$(null,null,function*(){o.autoBackupConfig=!0;const n=yield f("/api/backup/auto/config",{method:"POST",body:JSON.stringify(p)});n.success?(C("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield ee()):C(n.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),o.autoBackupConfig=!1}),ie=()=>{if(!p.scheduled.enabled)return"æœªå¯ç”¨";const n=String(p.scheduled.hour).padStart(2,"0"),t=String(p.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${n}:${t}`};return G(()=>$(null,null,function*(){yield S(),yield I(),a.configured&&(yield q()),yield ee()})),(n,t)=>{var O;return r(),c("div",$a,[e("div",Ca,[e("button",{class:z(["tab",{active:d.value==="local"}]),onClick:t[0]||(t[0]=k=>d.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:z(["tab",{active:d.value==="webdav"}]),onClick:t[1]||(t[1]=k=>d.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:z(["tab",{active:d.value==="auto"}]),onClick:t[2]||(t[2]=k=>d.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),y(e("div",Ma,[e("div",xa,[e("button",{class:"btn btn-primary",onClick:E,disabled:o.create},[t[25]||(t[25]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),W(" "+h(o.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,Va),e("button",{class:"btn btn-success",onClick:ve,disabled:o.upload},[t[26]||(t[26]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),W(" "+h(o.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,Ba),e("button",{class:"btn btn-secondary",onClick:S,disabled:o.list},[t[27]||(t[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),W(" "+h(o.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Ua),e("input",{ref_key:"fileInput",ref:V,type:"file",accept:".zip",onChange:pe,style:{display:"none"}},null,544)]),l.value.text?(r(),c("div",{key:0,class:z(["message",l.value.type])},h(l.value.text),3)):L("",!0),e("div",Aa,[b.value.length===0&&!o.list?(r(),c("div",Da,[...t[28]||(t[28]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)])])):(r(),c("div",Ia,[(r(!0),c(N,null,H(b.value,k=>(r(),c("div",{key:k.name,class:"backup-card"},[t[33]||(t[33]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",Sa,[e("div",Ta,h(k.name),1),e("div",La,[e("span",Wa,h(k.size),1),e("span",za,h(Z(k.created)),1)])]),e("div",Na,[e("button",{class:"btn-icon btn-restore",onClick:J=>K("restore",k.name),title:"æ¢å¤å¤‡ä»½"},[...t[29]||(t[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,Ha),e("button",{class:"btn-icon btn-rename",onClick:J=>F(k.name),title:"é‡å‘½å"},[...t[30]||(t[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Pa),e("button",{class:"btn-icon",onClick:J=>ce(k.name),title:"ä¸‹è½½å¤‡ä»½"},[...t[31]||(t[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)])],8,Fa),e("button",{class:"btn-icon btn-danger",onClick:J=>K("delete",k.name),title:"åˆ é™¤å¤‡ä»½"},[...t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Oa)])]))),128))]))])],512),[[me,d.value==="local"]]),y(e("div",ja,[e("div",Ea,[e("button",{class:"btn btn-primary",onClick:m},[...t[34]||(t[34]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),W(" WebDAVé…ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:le,disabled:o.webdavBackup||!a.configured},[t[35]||(t[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),W(" "+h(o.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,Ra),e("button",{class:"btn btn-secondary",onClick:q,disabled:o.webdavList||!a.configured},[t[36]||(t[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),W(" "+h(o.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,qa)]),l.value.text?(r(),c("div",{key:0,class:z(["message",l.value.type])},h(l.value.text),3)):L("",!0),a.configured?L("",!0):(r(),c("div",Ja,[...t[37]||(t[37]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)])])),e("div",Ga,[_.value.length===0&&!o.webdavList?(r(),c("div",Ka,[...t[38]||(t[38]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)])])):(r(),c("div",Qa,[(r(!0),c(N,null,H(_.value,k=>(r(),c("div",{key:k.name,class:"backup-card"},[t[41]||(t[41]=se('<div class="backup-icon" data-v-82c9dfdc><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-82c9dfdc><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-82c9dfdc></path><polyline points="14 2 14 8 20 8" data-v-82c9dfdc></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-82c9dfdc></path></svg></div>',1)),e("div",Xa,[e("div",Ya,h(k.name),1),e("div",Za,[e("span",en,h(k.size),1),e("span",tn,h(Z(k.created)),1)])]),e("div",sn,[e("button",{class:"btn-icon btn-restore",onClick:J=>K("webdav-restore",k.name),title:"ä»WebDAVæ¢å¤"},[...t[39]||(t[39]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,ln),e("button",{class:"btn-icon btn-danger",onClick:J=>K("webdav-delete",k.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},[...t[40]||(t[40]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,an)])]))),128))]))])],512),[[me,d.value==="webdav"]]),y(e("div",nn,[l.value.text?(r(),c("div",{key:0,class:z(["message",l.value.type])},h(l.value.text),3)):L("",!0),e("div",on,[t[76]||(t[76]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[77]||(t[77]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",dn,[e("div",un,[t[43]||(t[43]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",rn,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=k=>p.debounce.enabled=k)},null,512),[[Y,p.debounce.enabled]]),t[42]||(t[42]=e("span",{class:"slider"},null,-1))])]),t[48]||(t[48]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),p.debounce.enabled?(r(),c("div",cn,[e("div",vn,[t[44]||(t[44]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=k=>p.debounce.delay=k),min:"5",max:"1440",class:"form-input"},null,512),[[B,p.debounce.delay,void 0,{number:!0}]]),t[45]||(t[45]=e("small",null,"æ•°æ®ä¿®æ”¹åå»¶è¿Ÿå¤šä¹…è§¦å‘å¤‡ä»½ï¼ŒèŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",pn,[t[46]||(t[46]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=k=>p.debounce.keep=k),min:"1",max:"30",class:"form-input"},null,512),[[B,p.debounce.keep,void 0,{number:!0}]]),t[47]||(t[47]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))])])):L("",!0)]),e("div",mn,[e("div",bn,[t[50]||(t[50]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",gn,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=k=>p.scheduled.enabled=k)},null,512),[[Y,p.scheduled.enabled]]),t[49]||(t[49]=e("span",{class:"slider"},null,-1))])]),t[58]||(t[58]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),p.scheduled.enabled?(r(),c("div",fn,[e("div",hn,[t[52]||(t[52]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",wn,[y(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=k=>p.scheduled.hour=k),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[B,p.scheduled.hour,void 0,{number:!0}]]),t[51]||(t[51]=e("span",null,":",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=k=>p.scheduled.minute=k),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[B,p.scheduled.minute,void 0,{number:!0}]])]),t[53]||(t[53]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",kn,[t[54]||(t[54]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=k=>p.scheduled.keep=k),min:"1",max:"30",class:"form-input"},null,512),[[B,p.scheduled.keep,void 0,{number:!0}]]),t[55]||(t[55]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))]),e("div",yn,[e("label",_n,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=k=>p.scheduled.onlyIfModified=k)},null,512),[[Y,p.scheduled.onlyIfModified]]),t[56]||(t[56]=e("span",null,"ä»…åœ¨æœ‰ä¿®æ”¹æ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"å¦‚æœ24å°æ—¶å†…å·²æœ‰å¢é‡å¤‡ä»½ï¼Œè·³è¿‡å®šæ—¶å¤‡ä»½ï¼ˆé¿å…é‡å¤ï¼‰",-1))])])):L("",!0)]),e("div",$n,[e("div",Cn,[t[60]||(t[60]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",Mn,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=k=>p.webdav.enabled=k)},null,512),[[Y,p.webdav.enabled]]),t[59]||(t[59]=e("span",{class:"slider"},null,-1))])]),t[65]||(t[65]=e("p",{class:"config-info"},"è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚éœ€è¦å…ˆé…ç½® WebDAV è¿æ¥ã€‚",-1)),p.webdav.enabled?(r(),c("div",xn,[e("div",Vn,[e("label",Bn,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=k=>p.webdav.syncDaily=k)},null,512),[[Y,p.webdav.syncDaily]]),t[61]||(t[61]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[62]||(t[62]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",Un,[e("label",An,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=k=>p.webdav.syncIncremental=k)},null,512),[[Y,p.webdav.syncIncremental]]),t[63]||(t[63]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[64]||(t[64]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ ï¼ˆå¯èƒ½é¢‘ç¹ï¼Œä¸æ¨èï¼‰",-1))])])):L("",!0)]),e("div",Dn,[e("div",In,[t[67]||(t[67]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",Sn,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=k=>p.autoClean=k)},null,512),[[Y,p.autoClean]]),t[66]||(t[66]=e("span",{class:"slider"},null,-1))])]),t[68]||(t[68]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡çš„æ—§å¤‡ä»½æ–‡ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼Œä¿ç•™æœ€æ–°çš„ï¼‰ã€‚",-1))]),w.value?(r(),c("div",Tn,[t[73]||(t[73]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",Ln,[e("div",Wn,[t[69]||(t[69]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½æ•°é‡",-1)),e("span",zn,h(((O=w.value.incremental)==null?void 0:O.count)||0)+" ä¸ª",1)]),e("div",Nn,[t[70]||(t[70]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",Hn,h(Z(w.value.lastDebounce)||"æ— "),1)]),e("div",Pn,[t[71]||(t[71]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",Fn,h(Z(w.value.lastScheduled)||"æ— "),1)]),e("div",On,[t[72]||(t[72]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",jn,h(ie()),1)])])])):L("",!0),e("div",En,[e("button",{class:"btn btn-secondary",onClick:ee},[...t[74]||(t[74]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),W(" é‡ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:oe,disabled:o.autoBackupConfig},[t[75]||(t[75]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),W(" "+h(o.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,Rn)])])],512),[[me,d.value==="auto"]]),x.value?(r(),c("div",qn,[e("div",Jn,[t[82]||(t[82]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",Gn,[t[78]||(t[78]=e("label",null,[W("WebDAV URL "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=k=>u.url=k),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[B,u.url]]),t[79]||(t[79]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Kn,[t[80]||(t[80]=e("label",null,[W("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=k=>u.username=k),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[B,u.username]])]),e("div",Qn,[t[81]||(t[81]=e("label",null,[W("å¯†ç  "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"password","onUpdate:modelValue":t[17]||(t[17]=k=>u.password=k),placeholder:a.configured?"ç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜":"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,8,Xn),[[B,u.password]]),a.configured?(r(),c("small",Zn,"å¦‚éœ€ä¿®æ”¹å¯†ç è¯·è¾“å…¥æ–°å¯†ç ï¼Œç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜")):(r(),c("small",Yn,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç "))]),e("div",eo,[e("button",{class:"btn btn-secondary",onClick:t[18]||(t[18]=k=>x.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:R,disabled:o.webdavConfig},h(o.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,to)])])])):L("",!0),s.show?(r(),c("div",so,[e("div",lo,[e("h3",null,"ç¡®è®¤"+h(s.title),1),e("p",null,h(s.message),1),e("div",ao,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=k=>s.show=!1)},"å–æ¶ˆ"),e("button",{class:z(["btn",s.confirmClass]),onClick:Q},"ç¡®è®¤",2)])])])):L("",!0),U.value?(r(),c("div",no,[e("div",oo,[t[86]||(t[86]=e("h3",null,"åˆ›å»ºå¤‡ä»½",-1)),e("div",io,[t[83]||(t[83]=e("label",null,"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=k=>v.name=k),placeholder:"ä¾‹å¦‚ï¼šæ·»åŠ ä¹¦ç­¾åçš„å¤‡ä»½",class:"form-input",maxlength:"50"},null,512),[[B,v.name]]),t[84]||(t[84]=e("small",null,"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤åç§°ï¼ˆbackup-æ—¶é—´æˆ³ï¼‰",-1))]),e("div",uo,[t[85]||(t[85]=e("label",null,"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",-1)),y(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=k=>v.description=k),placeholder:"æè¿°è¿™æ¬¡å¤‡ä»½çš„å†…å®¹æˆ–ç›®çš„...",class:"form-input",rows:"3"},null,512),[[B,v.description]])]),e("div",ro,[e("button",{class:"btn btn-secondary",onClick:t[22]||(t[22]=k=>U.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:P,disabled:o.create},h(o.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),9,co)])])])):L("",!0),A.value?(r(),c("div",vo,[e("div",po,[t[88]||(t[88]=e("h3",null,"é‡å‘½åå¤‡ä»½",-1)),e("div",mo,[t[87]||(t[87]=e("label",null,[W("æ–°åç§° "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=k=>i.newName=k),placeholder:"è¾“å…¥æ–°çš„å¤‡ä»½åç§°",class:"form-input",maxlength:"50"},null,512),[[B,i.newName]]),e("small",null,"åŸåç§°ï¼š"+h(i.oldName),1)]),e("div",bo,[e("button",{class:"btn btn-secondary",onClick:t[24]||(t[24]=k=>A.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:M,disabled:o.rename||!i.newName.trim()},h(o.rename?"é‡å‘½åä¸­...":"ç¡®è®¤é‡å‘½å"),9,go)])])])):L("",!0)])}}},ho=j(fo,[["__scopeId","data-v-82c9dfdc"]]),wo={key:0,class:"login-container"},ko={class:"login-card"},yo={class:"login-form"},_o={class:"password-input-wrapper"},$o=["type"],Co={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Mo={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},xo={class:"login-buttons"},Vo=["disabled"],Bo={key:0,class:"login-error"},Uo={key:1,class:"admin-layout"},Ao={class:"menu-list"},Do={class:"admin-main"},Io={class:"admin-header"},So={class:"header-title"},To={class:"admin-content"},Lo={__name:"Admin",setup(T){const d=g("welcome"),b={welcome:ht,menu:Rt,card:Ds,duplicate:ml,tag:Il,ad:Gl,friend:aa,user:_a,backup:ho},_=ue(()=>b[d.value]),x=ue(()=>d.value==="welcome"?{lastLoginTime:U.value,lastLoginIp:A.value,currentUsername:V.value}:{}),U=g(""),A=g(""),V=g("admin"),o=g(!1),v=g(""),i=g(""),l=g(!1),s=g(""),a=g(!1),u=g(!1),p=ue(()=>{switch(d.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});G(()=>{const F=localStorage.getItem("token");o.value=!!F,o.value&&w()});function w(){return $(this,null,function*(){try{const F=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(F.ok){const M=yield F.json();U.value=M.last_login_time||"",A.value=M.last_login_ip||"",V.value=M.username||"admin"}}catch(F){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",F)}})}function D(){return $(this,null,function*(){var F,M;if(!v.value||!i.value){s.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}l.value=!0,s.value="";try{const S=yield ut(v.value,i.value);S.data.token&&(localStorage.setItem("token",S.data.token),o.value=!0,U.value=S.data.lastLoginTime||"",A.value=S.data.lastLoginIp||"",yield w())}catch(S){s.value=((M=(F=S.response)==null?void 0:F.data)==null?void 0:M.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{l.value=!1}})}function f(){localStorage.removeItem("token"),o.value=!1,v.value="",i.value="",s.value=""}function C(){window.open("/","_blank")}function E(){u.value=!u.value}function P(){u.value=!1}return(F,M)=>o.value?(r(),c("div",Uo,[e("aside",{class:z(["admin-sider",{open:u.value}]),onClick:re(P,["self"])},[e("div",{class:"logo clickable",onClick:M[3]||(M[3]=S=>{d.value="welcome",P()})},"Admin"),e("ul",Ao,[e("li",{class:z({active:d.value==="menu"}),onClick:M[4]||(M[4]=S=>{d.value="menu",P()})},"æ ç›®ç®¡ç†",2),e("li",{class:z({active:d.value==="card"}),onClick:M[5]||(M[5]=S=>{d.value="card",P()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:z({active:d.value==="duplicate"}),onClick:M[6]||(M[6]=S=>{d.value="duplicate",P()})},"å»é‡ç®¡ç†",2),e("li",{class:z({active:d.value==="tag"}),onClick:M[7]||(M[7]=S=>{d.value="tag",P()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:z({active:d.value==="ad"}),onClick:M[8]||(M[8]=S=>{d.value="ad",P()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:z({active:d.value==="friend"}),onClick:M[9]||(M[9]=S=>{d.value="friend",P()})},"å‹é“¾ç®¡ç†",2),e("li",{class:z({active:d.value==="user"}),onClick:M[10]||(M[10]=S=>{d.value="user",P()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:z({active:d.value==="backup"}),onClick:M[11]||(M[11]=S=>{d.value="backup",P()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",Do,[e("div",Io,[e("button",{class:"menu-toggle",onClick:E}," â˜° "),e("div",So,h(p.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:C,title:"è¿›å…¥ä¸»é¡µ"},[...M[16]||(M[16]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("button",{class:"btn logout-btn",onClick:f},"é€€å‡ºç™»å½•")])]),e("div",To,[Ie(Te,{name:"fade",mode:"out-in"},{default:Se(()=>[(r(),Le(We(_.value),ze({key:d.value},x.value),null,16))]),_:1})]),M[17]||(M[17]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[W("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(r(),c("div",wo,[e("div",ko,[M[15]||(M[15]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",yo,[y(e("input",{"onUpdate:modelValue":M[0]||(M[0]=S=>v.value=S),type:"text",placeholder:"ç”¨æˆ·å",class:"login-input",onKeyup:ye(D,["enter"])},null,544),[[B,v.value]]),e("div",_o,[y(e("input",{"onUpdate:modelValue":M[1]||(M[1]=S=>i.value=S),type:a.value?"text":"password",placeholder:"å¯†ç ",class:"login-input password-input",onKeyup:ye(D,["enter"])},null,40,$o),[[De,i.value]]),e("span",{class:"toggle-password",onClick:M[2]||(M[2]=S=>a.value=!a.value)},[a.value?(r(),c("svg",Co,[...M[12]||(M[12]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(r(),c("svg",Mo,[...M[13]||(M[13]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])]))])]),e("div",xo,[e("button",{onClick:C,class:"back-btn"},[...M[14]||(M[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),W(" è¿”å›é¦–é¡µ ",-1)])]),e("button",{onClick:D,class:"login-btn",disabled:l.value},h(l.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,Vo)]),s.value?(r(),c("p",Bo,h(s.value),1)):L("",!0)])])]))}},Ho=j(Lo,[["__scopeId","data-v-51574a72"]]);export{Ho as default};
