var we=(o,e,n)=>new Promise((t,i)=>{var r=l=>{try{s(n.next(l))}catch(u){i(u)}},a=l=>{try{s(n.throw(l))}catch(u){i(u)}},s=l=>l.done?t(l.value):Promise.resolve(l.value).then(r,a);s((n=n.apply(o,e)).next())});import{r as B,C as Je,a as Dt,j as rt,c as nn,_ as on,L as at,o as rn,b as me,d as ie,f as lt,F as an,g as ln,w as xt,n as Ot,i as sn,u as Ie,e as M,h as Ge,t as It,T as st,k as Pt,m as At,p as Nt}from"./index-wOrm4y8k.js";import{U as un}from"./urlNormalizer-C-9FudCC.js";function Mt(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,t)}return n}function ae(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mt(Object(n),!0).forEach(function(t){cn(o,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}function Ue(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ue=function(e){return typeof e}:Ue=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(o)}function cn(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function se(){return se=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o},se.apply(this,arguments)}function dn(o,e){if(o==null)return{};var n={},t=Object.keys(o),i,r;for(r=0;r<t.length;r++)i=t[r],!(e.indexOf(i)>=0)&&(n[i]=o[i]);return n}function fn(o,e){if(o==null)return{};var n=dn(o,e),t,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);for(i=0;i<r.length;i++)t=r[i],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(n[t]=o[t])}return n}var hn="1.15.6";function le(o){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(o)}var ue=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xe=le(/Edge/i),kt=le(/firefox/i),Me=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),St=le(/iP(ad|od|hone)/i),Ht=le(/chrome/i)&&le(/android/i),zt={capture:!1,passive:!1};function T(o,e,n){o.addEventListener(e,n,!ue&&zt)}function S(o,e,n){o.removeEventListener(e,n,!ue&&zt)}function Qe(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch(n){return!1}return!1}}function jt(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function ne(o,e,n,t){if(o){n=n||document;do{if(e!=null&&(e[0]===">"?o.parentNode===n&&Qe(o,e):Qe(o,e))||t&&o===n)return o;if(o===n)break}while(o=jt(o))}return null}var Rt=/\s+/g;function J(o,e,n){if(o&&e)if(o.classList)o.classList[n?"add":"remove"](e);else{var t=(" "+o.className+" ").replace(Rt," ").replace(" "+e+" "," ");o.className=(t+(n?" "+e:"")).replace(Rt," ")}}function v(o,e,n){var t=o&&o.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function Te(o,e){var n="";if(typeof o=="string")n=o;else do{var t=v(o,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Wt(o,e,n){if(o){var t=o.getElementsByTagName(e),i=0,r=t.length;if(n)for(;i<r;i++)n(t[i],i);return t}return[]}function re(){var o=document.scrollingElement;return o||document.documentElement}function Y(o,e,n,t,i){if(!(!o.getBoundingClientRect&&o!==window)){var r,a,s,l,u,f,d;if(o!==window&&o.parentNode&&o!==re()?(r=o.getBoundingClientRect(),a=r.top,s=r.left,l=r.bottom,u=r.right,f=r.height,d=r.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,d=window.innerWidth),(e||n)&&o!==window&&(i=i||o.parentNode,!ue))do if(i&&i.getBoundingClientRect&&(v(i,"transform")!=="none"||n&&v(i,"position")!=="static")){var p=i.getBoundingClientRect();a-=p.top+parseInt(v(i,"border-top-width")),s-=p.left+parseInt(v(i,"border-left-width")),l=a+r.height,u=s+r.width;break}while(i=i.parentNode);if(t&&o!==window){var w=Te(i||o),g=w&&w.a,m=w&&w.d;w&&(a/=m,s/=g,d/=g,f/=m,l=a+f,u=s+d)}return{top:a,left:s,bottom:l,right:u,width:d,height:f}}}function Ft(o,e,n){for(var t=fe(o,!0),i=Y(o)[e];t;){var r=Y(t)[n],a=void 0;if(a=i>=r,!a)return t;if(t===re())break;t=fe(t,!1)}return!1}function xe(o,e,n,t){for(var i=0,r=0,a=o.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==b.ghost&&(t||a[r]!==b.dragged)&&ne(a[r],n.draggable,o,!1)){if(i===e)return a[r];i++}r++}return null}function _t(o,e){for(var n=o.lastElementChild;n&&(n===b.ghost||v(n,"display")==="none"||e&&!Qe(n,e));)n=n.previousElementSibling;return n||null}function Z(o,e){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==b.clone&&(!e||Qe(o,e))&&n++;return n}function Lt(o){var e=0,n=0,t=re();if(o)do{var i=Te(o),r=i.a,a=i.d;e+=o.scrollLeft*r,n+=o.scrollTop*a}while(o!==t&&(o=o.parentNode));return[e,n]}function pn(o,e){for(var n in o)if(o.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===o[n][t])return Number(n)}return-1}function fe(o,e){if(!o||!o.getBoundingClientRect)return re();var n=o,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=v(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return re();if(t||e)return n;t=!0}}while(n=n.parentNode);return re()}function gn(o,e){if(o&&e)for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function ut(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var ke;function Ut(o,e){return function(){if(!ke){var n=arguments,t=this;n.length===1?o.call(t,n[0]):o.apply(t,n),ke=setTimeout(function(){ke=void 0},e)}}}function mn(){clearTimeout(ke),ke=void 0}function $t(o,e,n){o.scrollLeft+=e,o.scrollTop+=n}function qt(o){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}function Kt(o,e,n){var t={};return Array.from(o.children).forEach(function(i){var r,a,s,l;if(!(!ne(i,e.draggable,o,!1)||i.animated||i===n)){var u=Y(i);t.left=Math.min((r=t.left)!==null&&r!==void 0?r:1/0,u.left),t.top=Math.min((a=t.top)!==null&&a!==void 0?a:1/0,u.top),t.right=Math.max((s=t.right)!==null&&s!==void 0?s:-1/0,u.right),t.bottom=Math.max((l=t.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var K="Sortable"+new Date().getTime();function vn(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(i){if(!(v(i,"display")==="none"||i===b.ghost)){o.push({target:i,rect:Y(i)});var r=ae({},o[o.length-1].rect);if(i.thisAnimationDuration){var a=Te(i,!0);a&&(r.top-=a.f,r.left-=a.e)}i.fromRect=r}})}},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(pn(o,{target:t}),1)},animateAll:function(t){var i=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var r=!1,a=0;o.forEach(function(s){var l=0,u=s.target,f=u.fromRect,d=Y(u),p=u.prevFromRect,w=u.prevToRect,g=s.rect,m=Te(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&ut(p,d)&&!ut(f,d)&&(g.top-d.top)/(g.left-d.left)===(f.top-d.top)/(f.left-d.left)&&(l=yn(g,p,w,i.options)),ut(d,f)||(u.prevFromRect=f,u.prevToRect=d,l||(l=i.options.animation),i.animate(u,g,d,l)),l&&(r=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),r?e=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),o=[]},animate:function(t,i,r,a){if(a){v(t,"transition",""),v(t,"transform","");var s=Te(this.el),l=s&&s.a,u=s&&s.d,f=(i.left-r.left)/(l||1),d=(i.top-r.top)/(u||1);t.animatingX=!!f,t.animatingY=!!d,v(t,"transform","translate3d("+f+"px,"+d+"px,0)"),this.forRepaintDummy=bn(t),v(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),v(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){v(t,"transition",""),v(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function bn(o){return o.offsetWidth}function yn(o,e,n,t){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var De=[],ct={initializeByDefault:!0},Ye={mount:function(e){for(var n in ct)ct.hasOwnProperty(n)&&!(n in e)&&(e[n]=ct[n]);De.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),De.push(e)},pluginEvent:function(e,n,t){var i=this;this.eventCanceled=!1,t.cancel=function(){i.eventCanceled=!0};var r=e+"Global";De.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][r]&&n[a.pluginName][r](ae({sortable:n},t)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](ae({sortable:n},t)))})},initializePlugins:function(e,n,t,i){De.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,se(t,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var a=this.modifyOption(e,r,e.options[r]);typeof a!="undefined"&&(e.options[r]=a)}},getEventProperties:function(e,n){var t={};return De.forEach(function(i){typeof i.eventProperties=="function"&&se(t,i.eventProperties.call(n[i.pluginName],e))}),t},modifyOption:function(e,n,t){var i;return De.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(i=r.optionListeners[n].call(e[r.pluginName],t))}),i}};function En(o){var e=o.sortable,n=o.rootEl,t=o.name,i=o.targetEl,r=o.cloneEl,a=o.toEl,s=o.fromEl,l=o.oldIndex,u=o.newIndex,f=o.oldDraggableIndex,d=o.newDraggableIndex,p=o.originalEvent,w=o.putSortable,g=o.extraEventProperties;if(e=e||n&&n[K],!!e){var m,x=e.options,_="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!ue&&!Xe?m=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(t,!0,!0)),m.to=a||n,m.from=s||n,m.item=i||n,m.clone=r,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=f,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=w?w.lastPutMode:void 0;var D=ae(ae({},g),Ye.getEventProperties(t,e));for(var C in D)m[C]=D[C];n&&n.dispatchEvent(m),x[_]&&x[_].call(e,m)}}var wn=["evt"],q=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.evt,r=fn(t,wn);Ye.pluginEvent.bind(b)(e,n,ae({dragEl:c,parentEl:R,ghostEl:E,rootEl:P,nextEl:ye,lastDownEl:$e,cloneEl:k,cloneHidden:de,dragStarted:Pe,putSortable:z,activeSortable:b.active,originalEvent:i,oldIndex:Ce,oldDraggableIndex:Re,newIndex:Q,newDraggableIndex:ce,hideGhostForTarget:Zt,unhideGhostForTarget:en,cloneNowHidden:function(){de=!0},cloneNowShown:function(){de=!1},dispatchSortableEvent:function(s){W({sortable:n,name:s,originalEvent:i})}},r))};function W(o){En(ae({putSortable:z,cloneEl:k,targetEl:c,rootEl:P,oldIndex:Ce,oldDraggableIndex:Re,newIndex:Q,newDraggableIndex:ce},o))}var c,R,E,P,ye,$e,k,de,Ce,Q,Re,ce,He,z,_e=!1,Ze=!1,et=[],ve,te,dt,ft,Xt,Yt,Pe,Se,Fe,Le=!1,ze=!1,qe,j,ht=[],bt=!1,tt=[],ot=typeof document!="undefined",je=St,Bt=Xe||ue?"cssFloat":"float",Dn=ot&&!Ht&&!St&&"draggable"in document.createElement("div"),Vt=(function(){if(ot){if(ue)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}})(),Jt=function(e,n){var t=v(e),i=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),r=xe(e,0,n),a=xe(e,1,n),s=r&&v(r),l=a&&v(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Y(r).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Y(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=i&&t[Bt]==="none"||a&&t[Bt]==="none"&&u+f>i)?"vertical":"horizontal"},Sn=function(e,n,t){var i=t?e.left:e.top,r=t?e.right:e.bottom,a=t?e.width:e.height,s=t?n.left:n.top,l=t?n.right:n.bottom,u=t?n.width:n.height;return i===s||r===l||i+a/2===s+u/2},_n=function(e,n){var t;return et.some(function(i){var r=i[K].options.emptyInsertThreshold;if(!(!r||_t(i))){var a=Y(i),s=e>=a.left-r&&e<=a.right+r,l=n>=a.top-r&&n<=a.bottom+r;if(s&&l)return t=i}}),t},Qt=function(e){function n(r,a){return function(s,l,u,f){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(a||d))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return n(r(s,l,u,f),a)(s,l,u,f);var p=(a?s:l).options.group.name;return r===!0||typeof r=="string"&&r===p||r.join&&r.indexOf(p)>-1}}var t={},i=e.group;(!i||Ue(i)!="object")&&(i={name:i}),t.name=i.name,t.checkPull=n(i.pull,!0),t.checkPut=n(i.put),t.revertClone=i.revertClone,e.group=t},Zt=function(){!Vt&&E&&v(E,"display","none")},en=function(){!Vt&&E&&v(E,"display","")};ot&&!Ht&&document.addEventListener("click",function(o){if(Ze)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),Ze=!1,!1},!0);var be=function(e){if(c){e=e.touches?e.touches[0]:e;var n=_n(e.clientX,e.clientY);if(n){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[K]._onDragOver(t)}}},Cn=function(e){c&&c.parentNode[K]._isOutsideThisEl(e.target)};function b(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=se({},e),o[K]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Jt(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&(!Me||St),emptyInsertThreshold:5};Ye.initializePlugins(this,o,n);for(var t in n)!(t in e)&&(e[t]=n[t]);Qt(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Dn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(o,"pointerdown",this._onTapStart):(T(o,"mousedown",this._onTapStart),T(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(o,"dragover",this),T(o,"dragenter",this)),et.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),se(this,vn())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Se=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,c):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,i=this.options,r=i.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=i.filter;if(Mn(t),!c&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Me&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ne(l,i.draggable,t,!1),!(l&&l.animated)&&$e!==l)){if(Ce=Z(l),Re=Z(l,i.draggable),typeof f=="function"){if(f.call(this,e,l,this)){W({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:t,fromEl:t}),q("filter",n,{evt:e}),r&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(d){if(d=ne(u,d.trim(),t,!1),d)return W({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:t,toEl:t}),q("filter",n,{evt:e}),!0}),f)){r&&e.preventDefault();return}i.handle&&!ne(u,i.handle,t,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,t){var i=this,r=i.el,a=i.options,s=r.ownerDocument,l;if(t&&!c&&t.parentNode===r){var u=Y(t);if(P=r,c=t,R=c.parentNode,ye=c.nextSibling,$e=t,He=a.group,b.dragged=c,ve={target:c,clientX:(n||e).clientX,clientY:(n||e).clientY},Xt=ve.clientX-u.left,Yt=ve.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,c.style["will-change"]="all",l=function(){if(q("delayEnded",i,{evt:e}),b.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!kt&&i.nativeDraggable&&(c.draggable=!0),i._triggerDragStart(e,n),W({sortable:i,name:"choose",originalEvent:e}),J(c,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Wt(c,f.trim(),pt)}),T(s,"dragover",be),T(s,"mousemove",be),T(s,"touchmove",be),a.supportPointer?(T(s,"pointerup",i._onDrop),!this.nativeDraggable&&T(s,"pointercancel",i._onDrop)):(T(s,"mouseup",i._onDrop),T(s,"touchend",i._onDrop),T(s,"touchcancel",i._onDrop)),kt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),q("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Xe||ue))){if(b.eventCanceled){this._onDrop();return}a.supportPointer?(T(s,"pointerup",i._disableDelayedDrag),T(s,"pointercancel",i._disableDelayedDrag)):(T(s,"mouseup",i._disableDelayedDrag),T(s,"touchend",i._disableDelayedDrag),T(s,"touchcancel",i._disableDelayedDrag)),T(s,"mousemove",i._delayedDragTouchMoveHandler),T(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&T(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&pt(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;S(e,"mouseup",this._disableDelayedDrag),S(e,"touchend",this._disableDelayedDrag),S(e,"touchcancel",this._disableDelayedDrag),S(e,"pointerup",this._disableDelayedDrag),S(e,"pointercancel",this._disableDelayedDrag),S(e,"mousemove",this._delayedDragTouchMoveHandler),S(e,"touchmove",this._delayedDragTouchMoveHandler),S(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):n?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(c,"dragend",this),T(P,"dragstart",this._onDragStart));try{document.selection?Ke(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(e,n){if(_e=!1,P&&c){q("dragStarted",this,{evt:n}),this.nativeDraggable&&T(document,"dragover",Cn);var t=this.options;!e&&J(c,t.dragClass,!1),J(c,t.ghostClass,!0),b.active=this,e&&this._appendGhost(),W({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(te){this._lastX=te.clientX,this._lastY=te.clientY,Zt();for(var e=document.elementFromPoint(te.clientX,te.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(te.clientX,te.clientY),e!==n);)n=e;if(c.parentNode[K]._isOutsideThisEl(e),n)do{if(n[K]){var t=void 0;if(t=n[K]._onDragOver({clientX:te.clientX,clientY:te.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=jt(n));en()}},_onTouchMove:function(e){if(ve){var n=this.options,t=n.fallbackTolerance,i=n.fallbackOffset,r=e.touches?e.touches[0]:e,a=E&&Te(E,!0),s=E&&a&&a.a,l=E&&a&&a.d,u=je&&j&&Lt(j),f=(r.clientX-ve.clientX+i.x)/(s||1)+(u?u[0]-ht[0]:0)/(s||1),d=(r.clientY-ve.clientY+i.y)/(l||1)+(u?u[1]-ht[1]:0)/(l||1);if(!b.active&&!_e){if(t&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(E){a?(a.e+=f-(dt||0),a.f+=d-(ft||0)):a={a:1,b:0,c:0,d:1,e:f,f:d};var p="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");v(E,"webkitTransform",p),v(E,"mozTransform",p),v(E,"msTransform",p),v(E,"transform",p),dt=f,ft=d,te=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!E){var e=this.options.fallbackOnBody?document.body:P,n=Y(c,!0,je,!0,e),t=this.options;if(je){for(j=e;v(j,"position")==="static"&&v(j,"transform")==="none"&&j!==document;)j=j.parentNode;j!==document.body&&j!==document.documentElement?(j===document&&(j=re()),n.top+=j.scrollTop,n.left+=j.scrollLeft):j=re(),ht=Lt(j)}E=c.cloneNode(!0),J(E,t.ghostClass,!1),J(E,t.fallbackClass,!0),J(E,t.dragClass,!0),v(E,"transition",""),v(E,"transform",""),v(E,"box-sizing","border-box"),v(E,"margin",0),v(E,"top",n.top),v(E,"left",n.left),v(E,"width",n.width),v(E,"height",n.height),v(E,"opacity","0.8"),v(E,"position",je?"absolute":"fixed"),v(E,"zIndex","100000"),v(E,"pointerEvents","none"),b.ghost=E,e.appendChild(E),v(E,"transform-origin",Xt/parseInt(E.style.width)*100+"% "+Yt/parseInt(E.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,i=e.dataTransfer,r=t.options;if(q("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}q("setupClone",this),b.eventCanceled||(k=qt(c),k.removeAttribute("id"),k.draggable=!1,k.style["will-change"]="",this._hideClone(),J(k,this.options.chosenClass,!1),b.clone=k),t.cloneId=Ke(function(){q("clone",t),!b.eventCanceled&&(t.options.removeCloneOnHide||P.insertBefore(k,c),t._hideClone(),W({sortable:t,name:"clone"}))}),!n&&J(c,r.dragClass,!0),n?(Ze=!0,t._loopId=setInterval(t._emulateDragOver,50)):(S(document,"mouseup",t._onDrop),S(document,"touchend",t._onDrop),S(document,"touchcancel",t._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(t,i,c)),T(document,"drop",t),v(c,"transform","translateZ(0)")),_e=!0,t._dragStartId=Ke(t._dragStarted.bind(t,n,e)),T(document,"selectstart",t),Pe=!0,window.getSelection().removeAllRanges(),Me&&v(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,i,r,a,s=this.options,l=s.group,u=b.active,f=He===l,d=s.sort,p=z||u,w,g=this,m=!1;if(bt)return;function x(ge,it){q(ge,g,ae({evt:e,isOwner:f,axis:w?"vertical":"horizontal",revert:a,dragRect:i,targetRect:r,canSort:d,fromSortable:p,target:t,completed:D,onMove:function(h,y){return We(P,n,c,i,h,Y(h),e,y)},changed:C},it))}function _(){x("dragOverAnimationCapture"),g.captureAnimationState(),g!==p&&p.captureAnimationState()}function D(ge){return x("dragOverCompleted",{insertion:ge}),ge&&(f?u._hideClone():u._showClone(g),g!==p&&(J(c,z?z.options.ghostClass:u.options.ghostClass,!1),J(c,s.ghostClass,!0)),z!==g&&g!==b.active?z=g:g===b.active&&z&&(z=null),p===g&&(g._ignoreWhileAnimating=t),g.animateAll(function(){x("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(t===c&&!c.animated||t===n&&!t.animated)&&(Se=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(c.parentNode[K]._isOutsideThisEl(e.target),!ge&&be(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function C(){Q=Z(c),ce=Z(c,s.draggable),W({sortable:g,name:"change",toEl:n,newIndex:Q,newDraggableIndex:ce,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=ne(t,s.draggable,n,!0),x("dragOver"),b.eventCanceled)return m;if(c.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||g._ignoreWhileAnimating===t)return D(!1);if(Ze=!1,u&&!s.disabled&&(f?d||(a=R!==P):z===this||(this.lastPutMode=He.checkPull(this,u,c,e))&&l.checkPut(this,u,c,e))){if(w=this._getDirection(e,t)==="vertical",i=Y(c),x("dragOverValid"),b.eventCanceled)return m;if(a)return R=P,_(),this._hideClone(),x("revert"),b.eventCanceled||(ye?P.insertBefore(c,ye):P.appendChild(c)),D(!0);var F=_t(n,s.draggable);if(!F||In(e,w,this)&&!F.animated){if(F===c)return D(!1);if(F&&n===e.target&&(t=F),t&&(r=Y(t)),We(P,n,c,i,t,r,e,!!t)!==!1)return _(),F&&F.nextSibling?n.insertBefore(c,F.nextSibling):n.appendChild(c),R=n,C(),D(!0)}else if(F&&On(e,w,this)){var O=xe(n,0,s,!0);if(O===c)return D(!1);if(t=O,r=Y(t),We(P,n,c,i,t,r,e,!1)!==!1)return _(),n.insertBefore(c,O),R=n,C(),D(!0)}else if(t.parentNode===n){r=Y(t);var G=0,A,H=c.parentNode!==n,I=!Sn(c.animated&&c.toRect||i,t.animated&&t.toRect||r,w),U=w?"top":"left",$=Ft(t,"top","top")||Ft(c,"top","top"),he=$?$.scrollTop:void 0;Se!==t&&(A=r[U],Le=!1,ze=!I&&s.invertSwap||H),G=Pn(e,t,r,w,I?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,ze,Se===t);var ee;if(G!==0){var oe=Z(c);do oe-=G,ee=R.children[oe];while(ee&&(v(ee,"display")==="none"||ee===E))}if(G===0||ee===t)return D(!1);Se=t,Fe=G;var pe=t.nextElementSibling,V=!1;V=G===1;var Ee=We(P,n,c,i,t,r,e,V);if(Ee!==!1)return(Ee===1||Ee===-1)&&(V=Ee===1),bt=!0,setTimeout(xn,30),_(),V&&!pe?n.appendChild(c):t.parentNode.insertBefore(c,V?pe:t),$&&$t($,0,he-$.scrollTop),R=c.parentNode,A!==void 0&&!ze&&(qe=Math.abs(A-Y(t)[U])),C(),D(!0)}if(n.contains(c))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){S(document,"mousemove",this._onTouchMove),S(document,"touchmove",this._onTouchMove),S(document,"pointermove",this._onTouchMove),S(document,"dragover",be),S(document,"mousemove",be),S(document,"touchmove",be)},_offUpEvents:function(){var e=this.el.ownerDocument;S(e,"mouseup",this._onDrop),S(e,"touchend",this._onDrop),S(e,"pointerup",this._onDrop),S(e,"pointercancel",this._onDrop),S(e,"touchcancel",this._onDrop),S(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(Q=Z(c),ce=Z(c,t.draggable),q("drop",this,{evt:e}),R=c&&c.parentNode,Q=Z(c),ce=Z(c,t.draggable),b.eventCanceled){this._nulling();return}_e=!1,ze=!1,Le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),yt(this.cloneId),yt(this._dragStartId),this.nativeDraggable&&(S(document,"drop",this),S(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Me&&v(document.body,"user-select",""),v(c,"transform",""),e&&(Pe&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(P===R||z&&z.lastPutMode!=="clone")&&k&&k.parentNode&&k.parentNode.removeChild(k),c&&(this.nativeDraggable&&S(c,"dragend",this),pt(c),c.style["will-change"]="",Pe&&!_e&&J(c,z?z.options.ghostClass:this.options.ghostClass,!1),J(c,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:e}),P!==R?(Q>=0&&(W({rootEl:R,name:"add",toEl:R,fromEl:P,originalEvent:e}),W({sortable:this,name:"remove",toEl:R,originalEvent:e}),W({rootEl:R,name:"sort",toEl:R,fromEl:P,originalEvent:e}),W({sortable:this,name:"sort",toEl:R,originalEvent:e})),z&&z.save()):Q!==Ce&&Q>=0&&(W({sortable:this,name:"update",toEl:R,originalEvent:e}),W({sortable:this,name:"sort",toEl:R,originalEvent:e})),b.active&&((Q==null||Q===-1)&&(Q=Ce,ce=Re),W({sortable:this,name:"end",toEl:R,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),P=c=R=E=ye=k=$e=de=ve=te=Pe=Q=ce=Ce=Re=Se=Fe=z=He=b.dragged=b.ghost=b.clone=b.active=null,tt.forEach(function(e){e.checked=!0}),tt.length=dt=ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":c&&(this._onDragOver(e),Tn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,i=0,r=t.length,a=this.options;i<r;i++)n=t[i],ne(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||Nn(n));return e},sort:function(e,n){var t={},i=this.el;this.toArray().forEach(function(r,a){var s=i.children[a];ne(s,this.options.draggable,i,!1)&&(t[r]=s)},this),n&&this.captureAnimationState(),e.forEach(function(r){t[r]&&(i.removeChild(t[r]),i.appendChild(t[r]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ne(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var i=Ye.modifyOption(this,e,n);typeof i!="undefined"?t[e]=i:t[e]=n,e==="group"&&Qt(t)},destroy:function(){q("destroy",this);var e=this.el;e[K]=null,S(e,"mousedown",this._onTapStart),S(e,"touchstart",this._onTapStart),S(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(S(e,"dragover",this),S(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),et.splice(et.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!de){if(q("hideClone",this),b.eventCanceled)return;v(k,"display","none"),this.options.removeCloneOnHide&&k.parentNode&&k.parentNode.removeChild(k),de=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(de){if(q("showClone",this),b.eventCanceled)return;c.parentNode==P&&!this.options.group.revertClone?P.insertBefore(k,c):ye?P.insertBefore(k,ye):P.appendChild(k),this.options.group.revertClone&&this.animate(c,k),v(k,"display",""),de=!1}}};function Tn(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function We(o,e,n,t,i,r,a,s){var l,u=o[K],f=u.options.onMove,d;return window.CustomEvent&&!ue&&!Xe?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=o,l.dragged=n,l.draggedRect=t,l.related=i||e,l.relatedRect=r||Y(e),l.willInsertAfter=s,l.originalEvent=a,o.dispatchEvent(l),f&&(d=f.call(u,l,a)),d}function pt(o){o.draggable=!1}function xn(){bt=!1}function On(o,e,n){var t=Y(xe(n.el,0,n.options,!0)),i=Kt(n.el,n.options,E),r=10;return e?o.clientX<i.left-r||o.clientY<t.top&&o.clientX<t.right:o.clientY<i.top-r||o.clientY<t.bottom&&o.clientX<t.left}function In(o,e,n){var t=Y(_t(n.el,n.options.draggable)),i=Kt(n.el,n.options,E),r=10;return e?o.clientX>i.right+r||o.clientY>t.bottom&&o.clientX>t.left:o.clientY>i.bottom+r||o.clientX>t.right&&o.clientY>t.top}function Pn(o,e,n,t,i,r,a,s){var l=t?o.clientY:o.clientX,u=t?n.height:n.width,f=t?n.top:n.left,d=t?n.bottom:n.right,p=!1;if(!a){if(s&&qe<u*i){if(!Le&&(Fe===1?l>f+u*r/2:l<d-u*r/2)&&(Le=!0),Le)p=!0;else if(Fe===1?l<f+qe:l>d-qe)return-Fe}else if(l>f+u*(1-i)/2&&l<d-u*(1-i)/2)return An(e)}return p=p||a,p&&(l<f+u*r/2||l>d-u*r/2)?l>f+u/2?1:-1:0}function An(o){return Z(c)<Z(o)?1:-1}function Nn(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function Mn(o){tt.length=0;for(var e=o.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&tt.push(t)}}function Ke(o){return setTimeout(o,0)}function yt(o){return clearTimeout(o)}ot&&T(document,"touchmove",function(o){(b.active||_e)&&o.cancelable&&o.preventDefault()});b.utils={on:T,off:S,css:v,find:Wt,is:function(e,n){return!!ne(e,n,e,!1)},extend:gn,throttle:Ut,closest:ne,toggleClass:J,clone:qt,index:Z,nextTick:Ke,cancelNextTick:yt,detectDirection:Jt,getChild:xe,expando:K};b.get=function(o){return o[K]};b.mount=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(b.utils=ae(ae({},b.utils),t.utils)),Ye.mount(t)})};b.create=function(o,e){return new b(o,e)};b.version=hn;var X=[],Ae,Et,wt=!1,gt,mt,nt,Ne;function kn(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):t.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):(S(document,"pointermove",this._handleFallbackAutoScroll),S(document,"touchmove",this._handleFallbackAutoScroll),S(document,"mousemove",this._handleFallbackAutoScroll)),Gt(),Ve(),mn()},nulling:function(){nt=Et=Ae=wt=Ne=gt=mt=null,X.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var i=this,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,a);if(nt=n,t||this.options.forceAutoScrollFallback||Xe||ue||Me){vt(n,this.options,s,t);var l=fe(s,!0);wt&&(!Ne||r!==gt||a!==mt)&&(Ne&&Gt(),Ne=setInterval(function(){var u=fe(document.elementFromPoint(r,a),!0);u!==l&&(l=u,Ve()),vt(n,i.options,u,t)},10),gt=r,mt=a)}else{if(!this.options.bubbleScroll||fe(s,!0)===re()){Ve();return}vt(n,this.options,fe(s,!1),!1)}}},se(o,{pluginName:"scroll",initializeByDefault:!0})}function Ve(){X.forEach(function(o){clearInterval(o.pid)}),X=[]}function Gt(){clearInterval(Ne)}var vt=Ut(function(o,e,n,t){if(e.scroll){var i=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=re(),u=!1,f;Et!==n&&(Et=n,Ve(),Ae=e.scroll,f=e.scrollFn,Ae===!0&&(Ae=fe(n,!0)));var d=0,p=Ae;do{var w=p,g=Y(w),m=g.top,x=g.bottom,_=g.left,D=g.right,C=g.width,F=g.height,O=void 0,G=void 0,A=w.scrollWidth,H=w.scrollHeight,I=v(w),U=w.scrollLeft,$=w.scrollTop;w===l?(O=C<A&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),G=F<H&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(O=C<A&&(I.overflowX==="auto"||I.overflowX==="scroll"),G=F<H&&(I.overflowY==="auto"||I.overflowY==="scroll"));var he=O&&(Math.abs(D-i)<=a&&U+C<A)-(Math.abs(_-i)<=a&&!!U),ee=G&&(Math.abs(x-r)<=a&&$+F<H)-(Math.abs(m-r)<=a&&!!$);if(!X[d])for(var oe=0;oe<=d;oe++)X[oe]||(X[oe]={});(X[d].vx!=he||X[d].vy!=ee||X[d].el!==w)&&(X[d].el=w,X[d].vx=he,X[d].vy=ee,clearInterval(X[d].pid),(he!=0||ee!=0)&&(u=!0,X[d].pid=setInterval(function(){t&&this.layer===0&&b.active._onTouchMove(nt);var pe=X[this.layer].vy?X[this.layer].vy*s:0,V=X[this.layer].vx?X[this.layer].vx*s:0;typeof f=="function"&&f.call(b.dragged.parentNode[K],V,pe,o,nt,X[this.layer].el)!=="continue"||$t(X[this.layer].el,V,pe)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==l&&(p=fe(p,!1)));wt=u}},30),tn=function(e){var n=e.originalEvent,t=e.putSortable,i=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=t||r;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(d)&&(a("spill"),this.onSpill({dragEl:i,putSortable:t}))}};function Ct(){}Ct.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var i=xe(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:tn};se(Ct,{pluginName:"revertOnSpill"});function Tt(){}Tt.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,i=t||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:tn};se(Tt,{pluginName:"removeOnSpill"});b.mount(new kn);b.mount(Tt,Ct);function Rn(o={}){const{containerRef:e,items:n,itemKey:t="id",disabled:i=B(!1),animation:r=150,ghostClass:a="sortable-ghost",chosenClass:s="sortable-chosen",dragClass:l="sortable-drag",onStart:u=()=>{},onEnd:f=()=>{},onCancel:d=()=>{}}=o;let p=null;const w=B(!1),g=B([]),m=()=>n.value?n.value.map(O=>String(O[t])):[],x=()=>{p||!e.value||(p=new b(e.value,{animation:r,ghostClass:a,chosenClass:s,dragClass:l,delay:0,delayOnTouchOnly:!1,disabled:i.value,onStart:O=>{w.value=!0,g.value=m();const G=n.value[O.oldIndex];u(G,O.oldIndex,O)},onEnd:O=>{w.value=!1;const G=O.to,A=Array.from(G.children).map(I=>I.getAttribute("data-card-id")||I.getAttribute("data-id")).filter(Boolean);JSON.stringify(A)!==JSON.stringify(g.value)?f(A,g.value,O):d()}}))},_=()=>{p||rt(()=>x()),p&&p.option("disabled",!1)},D=()=>{p&&p.option("disabled",!0)},C=()=>{p&&(p.destroy(),p=null),w.value=!1},F=()=>{C(),rt(()=>{e.value&&!i.value&&x()})};return Je(e,O=>{C(),O&&!i.value&&rt(()=>x())}),Je(i,O=>{O?D():e.value&&_()}),Dt(C),{isDragging:w,originalOrder:g,enable:_,disable:D,destroy:C,reinit:F,getInstance:()=>p}}function Fn(o={}){const{delay:e=500,moveTolerance:n=10,onLongPress:t=()=>{},onCancel:i=()=>{}}=o,r=B(!1),a=B(!1);let s=null,l={x:0,y:0},u=null;const f=()=>{s&&(clearTimeout(s),s=null),a.value=!1},d=()=>{f(),r.value&&(r.value=!1,i())},p=()=>{f(),r.value=!1,u=null},w=(_,D=null)=>{_.button!==0&&_.pointerType==="mouse"||_.ctrlKey||_.metaKey||(u=_.currentTarget,l={x:_.clientX,y:_.clientY},a.value=!0,s=setTimeout(()=>{r.value=!0,a.value=!1,t(_,u,D)},e),document.addEventListener("pointermove",g),document.addEventListener("pointerup",m),document.addEventListener("pointercancel",m))},g=_=>{const D=Math.abs(_.clientX-l.x),C=Math.abs(_.clientY-l.y);(D>n||C>n)&&(d(),x())},m=()=>{f(),x()},x=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",m),document.removeEventListener("pointercancel",m)};return Dt(()=>{f(),x()}),{isPressed:r,isPending:a,handlePointerDown:w,cancel:d,reset:p}}function Ln(){const o=B(!1),e=B(null);function n(s,l,u){return we(this,arguments,function*(t,i,r,a={}){const{onSuccess:f=()=>{},onError:d=null,onRollback:p=()=>{},maxRetries:w=0,retryDelay:g=1e3}=a,m=t();o.value=!0,e.value=null;let x=0;const _=()=>we(null,null,function*(){try{const D=yield i();return o.value=!1,f(D),D}catch(D){if(x<w)return x++,yield new Promise(F=>setTimeout(F,g)),_();e.value=D,o.value=!1;const C=()=>{r(m),p()};return d?d(D,C):C(),null}});return _()})}return{isPending:o,error:e,execute:n}}function Xn(o={}){const{debounceMs:e=300,maxConcurrent:n=1}=o,t=B([]),i=B(!1),r=B(0);let a=null,s=null;function l(g,m){return new Promise((x,_)=>{const D=t.value.findIndex(C=>C.id===g);D>-1&&t.value.splice(D,1),t.value.push({id:g,fn:m,resolve:x,reject:_}),f()})}function u(g,m){return s=m,new Promise((x,_)=>{a&&clearTimeout(a),a=setTimeout(()=>{l("sort-order",g).then(x).catch(_)},e)})}function f(){i.value||d()}function d(){return we(this,null,function*(){if(t.value.length===0||r.value>=n){i.value=!1;return}for(i.value=!0;t.value.length>0&&r.value<n;){const g=t.value.shift();r.value++;try{const m=yield g.fn();g.resolve(m)}catch(m){g.reject(m)}finally{r.value--}}i.value=!1,t.value.length>0&&d()})}function p(){a&&clearTimeout(a),t.value.forEach(g=>g.reject(new Error("Cancelled"))),t.value=[]}function w(){return s}return{enqueue:l,enqueueSort:u,cancelAll:p,isProcessing:i,queueLength:()=>t.value.length,getLatestOrderData:w}}function Yn(o={}){const{containerRef:e,cards:n,categoryId:t,subCategoryId:i,onSaveSuccess:r=()=>{},onSaveError:a=()=>{},onCardsReorder:s=null}=o,l=B(!1),u=B(!1),f=B(!1),d=B(null),{execute:p}=Ln(),w=Xn({debounceMs:500}),g=nn(()=>!l.value),{isPending:m,handlePointerDown:x,reset:_}=Fn({delay:500,moveTolerance:10,onLongPress:(A,H,I)=>{l.value=!0,u.value=!0,d.value=I,navigator.vibrate&&navigator.vibrate(50),D.enable(),setTimeout(()=>{u.value=!1},1500),setTimeout(()=>{H&&H.classList.add("sortable-chosen")},50)},onCancel:()=>{u.value=!1}}),D=Rn({containerRef:e,items:n,itemKey:"id",disabled:g,onStart:(A,H)=>{d.value=A},onEnd:(A,H)=>we(null,null,function*(){const I=n.value?[...n.value]:[];yield p(()=>(s&&s(A.map(Number)),I),()=>w.enqueueSort(()=>C(A),{newOrder:A,categoryId:t==null?void 0:t.value,subCategoryId:i==null?void 0:i.value}),U=>{s&&U.length>0&&s(U.map($=>$.id)),a(new Error("‰øùÂ≠òÂ§±Ë¥•ÔºåÂ∑≤ÊÅ¢Â§ç"))},{maxRetries:2,retryDelay:1e3,onSuccess:()=>{r()},onError:(U,$)=>{$()}}),setTimeout(()=>{O()},100)}),onCancel:()=>{O()}});function C(A){return we(this,null,function*(){f.value=!0;try{const H=A.map((I,U)=>({id:Number(I),order:U,menu_id:t==null?void 0:t.value,sub_menu_id:(i==null?void 0:i.value)||null}));return yield un(H),!0}finally{f.value=!1}})}function F(){l.value=!0,D.enable()}function O(){l.value=!1,u.value=!1,d.value=null,D.disable(),_()}function G(A,H){x(A,H)}return Je([t,i],()=>{O(),D.reinit()}),{dragEnabled:l,showHint:u,isSaving:f,isDragging:D.isDragging,isPending:m,draggedCard:d,enableDragMode:F,disableDragMode:O,handleCardPointerDown:G,reinitSortable:D.reinit}}const Bn=["data-card-id","onContextmenu","onPointerdown","onClick"],Gn=["href","target","title"],Hn=["src","onError"],zn={class:"link-text"},jn={key:0,class:"card-selected-badge"},Wn={key:0,class:"drag-hint"},Un={key:0,class:"saving-indicator"},$n={__name:"CardGrid",props:{cards:Array,selectedCards:Array,categoryId:Number,subCategoryId:[Number,null]},emits:["cardsReordered","contextEdit","contextDelete","toggleCardSelection","openMovePanel","saveSuccess","saveError"],setup(o,{emit:e}){const n=o,t=e,i=B(null),r=B(!1),a=B(0),s=B(0),l=B(null),u=at(n,"cards"),f=at(n,"categoryId"),d=at(n,"subCategoryId"),{isDragging:p,showHint:w,isSaving:g,handleCardPointerDown:m,reinitSortable:x}=Yn({containerRef:i,cards:u,categoryId:f,subCategoryId:d,onSaveSuccess:()=>{t("saveSuccess")},onSaveError:h=>{t("saveError",h)},onCardsReorder:h=>{t("cardsReordered",h,n.categoryId,n.subCategoryId)}});function _(h,y){m(h,y)}function D(h,y){l.value=y,a.value=h.clientX,s.value=h.clientY,r.value=!0}function C(){r.value=!1,l.value=null}function F(){l.value&&t("contextEdit",l.value),C()}function O(){l.value&&t("contextDelete",l.value),C()}function G(){l.value&&t("toggleCardSelection",l.value),C()}function A(){l.value&&(Oe(l.value)||t("toggleCardSelection",l.value),t("openMovePanel")),C()}function H(){l.value&&window.open(l.value.url,"_blank"),C()}function I(){l.value&&navigator.clipboard.writeText(l.value.url),C()}function U(h){r.value&&C()}function $(h,y){(h.ctrlKey||h.metaKey)&&(h.preventDefault(),h.stopPropagation(),t("toggleCardSelection",y))}function he(h){(p.value||h.ctrlKey||h.metaKey)&&(h.preventDefault(),h.stopPropagation())}rn(()=>{document.addEventListener("click",U),document.addEventListener("scroll",C)}),Dt(()=>{document.removeEventListener("click",U),document.removeEventListener("scroll",C)}),Je(()=>n.cards,(h,y)=>{h&&h.length>0&&(!y||y.length===0||JSON.stringify(h)!==JSON.stringify(y))&&!p.value&&x()},{deep:!0});function ee(h){return{}}function oe(h){try{return new URL(h).origin}catch(y){return null}}function pe(h){if(h.logo_url)return h.logo_url;const y=oe(h.url);return y?`https://api.xinac.net/icon/?url=${y}&sz=128`:"/default-favicon.png"}const V=[h=>`https://api.xinac.net/icon/?url=${h}&sz=128`,h=>`https://api.afmax.cn/so/ico/index.php?r=${h}&sz=128`,h=>`https://icon.horse/icon/${h}`,h=>`https://www.google.com/s2/favicons?domain=${h}&sz=128`,h=>`https://favicon.im/${h}?larger=true`];function Ee(h,y){const N=h.target.src,Be=oe(y.url);if(!Be){h.target.src="/default-favicon.png";return}h.target._cdnIndex===void 0&&(h.target._cdnIndex=0);for(let L=0;L<V.length;L++)if(V[L](Be),N.includes("api.xinac.net")&&L===0||N.includes("api.afmax.cn")&&L===1||N.includes("icon.horse")&&L===2||N.includes("www.google.com/s2/favicons")&&L===3||N.includes("favicon.im")&&L===4){if(L+1<V.length){h.target._cdnIndex=L+1,h.target.src=V[L+1](Be);return}break}h.target.src="/default-favicon.png"}function ge(h){let y="";return h.desc&&(y+=h.desc+`
`),h.tags&&h.tags.length>0&&(y+="Ê†áÁ≠æ: "+h.tags.map(N=>N.name).join(", ")+`
`),y+=h.url,y}function it(h){return h?h.length>20?h.slice(0,20)+"...":h:""}function Oe(h){var y;return((y=n.selectedCards)==null?void 0:y.some(N=>N.id===h.id))||!1}return(h,y)=>(ie(),me("div",{ref_key:"cardGridRef",ref:i,class:"container card-grid"},[(ie(!0),me(an,null,ln(o.cards,(N,Be)=>(ie(),me("div",{key:N.id,class:sn(["link-item",{selected:Oe(N),dragging:Ie(p)}]),"data-card-id":N.id,style:Ot(ee()),onContextmenu:xt(L=>D(L,N),["prevent"]),onPointerdown:L=>_(L,N),onClick:L=>$(L,N)},[M("a",{href:Ie(p)?"javascript:void(0)":N.url,target:Ie(p)?"":"_blank",title:ge(N),onClick:y[0]||(y[0]=L=>he(L)),class:"card-link"},[M("img",{class:"link-icon",src:pe(N),alt:"",onError:L=>Ee(L,N),loading:"lazy"},null,40,Hn),M("span",zn,It(it(N.title)),1)],8,Gn),Oe(N)?(ie(),me("div",jn,"‚úì")):Ge("",!0)],46,Bn))),128)),(ie(),lt(st,{to:"body"},[r.value?(ie(),me("div",{key:0,class:"context-menu",style:Ot({left:a.value+"px",top:s.value+"px"}),onClick:y[1]||(y[1]=xt(()=>{},["stop"]))},[M("div",{class:"context-menu-item",onClick:F},[...y[2]||(y[2]=[M("span",{class:"context-menu-icon"},"‚úèÔ∏è",-1),M("span",null,"ÁºñËæë",-1)])]),M("div",{class:"context-menu-item",onClick:O},[...y[3]||(y[3]=[M("span",{class:"context-menu-icon"},"üóëÔ∏è",-1),M("span",null,"Âà†Èô§",-1)])]),y[8]||(y[8]=M("div",{class:"context-menu-divider"},null,-1)),M("div",{class:"context-menu-item",onClick:G},[y[4]||(y[4]=M("span",{class:"context-menu-icon"},"‚òëÔ∏è",-1)),M("span",null,It(Oe(l.value)?"ÂèñÊ∂àÈÄâ‰∏≠":"ÈÄâ‰∏≠"),1)]),M("div",{class:"context-menu-item",onClick:A},[...y[5]||(y[5]=[M("span",{class:"context-menu-icon"},"üìÅ",-1),M("span",null,"ÁßªÂä®Âà∞...",-1)])]),y[9]||(y[9]=M("div",{class:"context-menu-divider"},null,-1)),M("div",{class:"context-menu-item",onClick:H},[...y[6]||(y[6]=[M("span",{class:"context-menu-icon"},"üîó",-1),M("span",null,"Âú®Êñ∞Ê†áÁ≠æÈ°µÊâìÂºÄ",-1)])]),M("div",{class:"context-menu-item",onClick:I},[...y[7]||(y[7]=[M("span",{class:"context-menu-icon"},"üìã",-1),M("span",null,"Â§çÂà∂ÈìæÊé•",-1)])])],4)):Ge("",!0)])),(ie(),lt(st,{to:"body"},[Pt(Nt,{name:"fade"},{default:At(()=>[Ie(w)?(ie(),me("div",Wn," ÊùæÂºÄÂºÄÂßãÊãñÊãΩÊéíÂ∫è ")):Ge("",!0)]),_:1})])),(ie(),lt(st,{to:"body"},[Pt(Nt,{name:"fade"},{default:At(()=>[Ie(g)?(ie(),me("div",Un," ‰øùÂ≠ò‰∏≠... ")):Ge("",!0)]),_:1})]))],512))}},Jn=on($n,[["__scopeId","data-v-0b124da4"]]);export{Jn as default};
