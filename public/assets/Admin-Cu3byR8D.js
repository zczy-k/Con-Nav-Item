var he=Object.defineProperty,fe=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ae=(W,l,h)=>l in W?he(W,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):W[l]=h,J=(W,l)=>{for(var h in l||(l={}))ke.call(l,h)&&ae(W,h,l[h]);if(oe)for(var h of oe(l))ye.call(l,h)&&ae(W,h,l[h]);return W},Q=(W,l)=>fe(W,we(l));var $=(W,l,h)=>new Promise((w,_)=>{var B=a=>{try{V(h.next(a))}catch(i){_(i)}},u=a=>{try{V(h.throw(a))}catch(i){_(i)}},V=a=>a.done?w(a.value):Promise.resolve(a.value).then(B,u);V((h=h.apply(W,l)).next())});import{_ as O,r as f,g as N,c as v,o as d,b as e,w as g,v as C,m as z,F as P,a as F,n as H,t as A,e as re,z as ie,d as L,A as ee,p as te,j as le,B as K,y as Z,C as se,s as q,l as de,D as $e,E as j}from"./index-BHTAS0ja.js";import{g as ce,n as _e,o as Ce,q as Me,r as Ve,s as xe,t as Be,c as ve,w as Ue,u as ue,l as Ae,e as Se,x as De,y as Te,z as Ie,A as Le,a as We,B as ze,C as He,D as Pe,b as Fe,E as Oe,F as Ne,G as je,H as Ee,I as Re,J as qe,K as Je}from"./api-CunMeIpu.js";const Ke={class:"menu-manage"},Ge={class:"menu-header"},Qe={class:"menu-add"},Xe={class:"menu-content"},Ye={class:"menu-list"},Ze={class:"main-menu"},et={class:"menu-info"},tt=["onUpdate:modelValue","onBlur"],st={class:"menu-order"},lt=["onUpdate:modelValue","onBlur"],nt={class:"menu-actions"},ot=["onClick","title"],at=["onClick"],it={class:"sub-menu-header"},dt={class:"sub-menu-title"},ut=["onClick"],rt={key:0,class:"sub-menu-list"},ct={class:"sub-menu-info"},vt=["onUpdate:modelValue","onBlur"],pt={class:"sub-menu-order"},mt=["onUpdate:modelValue","onBlur"],bt={class:"sub-menu-actions"},gt=["onClick"],ht={key:1,class:"empty-sub-menu"},ft=["onClick"],wt={__name:"MenuManage",setup(W){const l=f([]),h=f("");N(w);function w(){return $(this,null,function*(){const s=yield ce();l.value=s.data.map(o=>Q(J({},o),{showSubMenu:!1}))})}function _(){return $(this,null,function*(){if(!h.value.trim())return;const s=l.value.length?Math.max(...l.value.map(o=>o.order||0)):0;yield _e({name:h.value.trim(),order:s+1}),h.value="",w()})}function B(s){return $(this,null,function*(){yield Ce(s.id,{name:s.name,order:s.order}),w()})}function u(s){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¸»èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ã€‚")&&(yield Me(s),w())})}function V(s){return $(this,null,function*(){var r;const o=l.value.find(D=>D.id===s),b=prompt("è¯·è¾“å…¥å­èœå•åç§°ï¼š");if(!(b!=null&&b.trim()))return;const M=(r=o.subMenus)!=null&&r.length?Math.max(...o.subMenus.map(D=>D.order||0)):0;yield Ve(s,{name:b.trim(),order:M+1}),w()})}function a(s){return $(this,null,function*(){yield xe(s.id,{name:s.name,order:s.order}),w()})}function i(s){return $(this,null,function*(){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­èœå•å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤å…¶ä¸‹çš„æ‰€æœ‰å¡ç‰‡ã€‚")&&(yield Be(s),w())})}function n(s){const o=l.value.find(b=>b.id===s);o&&(o.showSubMenu=!o.showSubMenu)}return(s,o)=>(d(),v("div",Ke,[e("div",Ge,[o[2]||(o[2]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ä¸»èœå•å’Œå­èœå•")],-1)),e("div",Qe,[g(e("input",{"onUpdate:modelValue":o[0]||(o[0]=b=>h.value=b),placeholder:"è¯·è¾“å…¥ä¸»èœå•åç§°",class:"input"},null,512),[[C,h.value]]),e("button",{class:"btn btn-primary",onClick:_},o[1]||(o[1]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),z(" æ·»åŠ ä¸»èœå• ")]))])]),e("div",Xe,[e("div",Ye,[(d(!0),v(P,null,F(l.value,b=>{var M;return d(),v("div",{key:b.id,class:"menu-item"},[e("div",Ze,[e("div",et,[o[4]||(o[4]=e("div",{class:"menu-icon"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 3h18v18H3zM9 9h6v6H9z"})])],-1)),g(e("input",{"onUpdate:modelValue":r=>b.name=r,onBlur:r=>B(b),class:"menu-name-input"},null,40,tt),[[C,b.name]]),e("div",st,[o[3]||(o[3]=e("span",{class:"order-label"},"æ’åº",-1)),g(e("input",{"onUpdate:modelValue":r=>b.order=r,type:"number",onBlur:r=>B(b),class:"order-input"},null,40,lt),[[C,b.order,void 0,{number:!0}]])])]),e("div",nt,[e("button",{class:"btn btn-icon expand-btn",onClick:r=>n(b.id),title:b.showSubMenu?"æ”¶èµ·å­èœå•":"å±•å¼€å­èœå•"},o[5]||(o[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1)]),8,ot),e("button",{class:"btn btn-danger btn-icon",onClick:r=>u(b.id),title:"åˆ é™¤ä¸»èœå•"},o[6]||(o[6]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,at)])]),e("div",{class:H(["sub-menu-section",{expanded:b.showSubMenu}])},[e("div",it,[e("div",dt,[o[7]||(o[7]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 11H1l8-8 8 8h-8v8z"})],-1)),z(" å­èœå• ("+A(((M=b.subMenus)==null?void 0:M.length)||0)+") ",1)]),e("button",{class:"btn btn-sm btn-outline",onClick:r=>V(b.id)},o[8]||(o[8]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),z(" æ·»åŠ å­èœå• ")]),8,ut)]),b.subMenus&&b.subMenus.length>0?(d(),v("div",rt,[(d(!0),v(P,null,F(b.subMenus,r=>(d(),v("div",{key:r.id,class:"sub-menu-item"},[e("div",ct,[o[9]||(o[9]=e("div",{class:"sub-menu-icon"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M4 12h16M4 18h16"})])],-1)),g(e("input",{"onUpdate:modelValue":D=>r.name=D,onBlur:D=>a(r),class:"sub-menu-name-input"},null,40,vt),[[C,r.name]]),e("div",pt,[g(e("input",{"onUpdate:modelValue":D=>r.order=D,type:"number",onBlur:D=>a(r),class:"order-input"},null,40,mt),[[C,r.order,void 0,{number:!0}]])])]),e("div",bt,[e("button",{class:"btn btn-danger btn-icon btn-sm",onClick:D=>i(r.id),title:"åˆ é™¤å­èœå•"},o[10]||(o[10]=[e("svg",{width:"14",height:"14",viewBox:"0 0 22 22",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,gt)])]))),128))])):(d(),v("div",ht,[o[11]||(o[11]=e("p",null,"æš‚æ— å­èœå•",-1)),e("button",{class:"btn btn-sm btn-outline",onClick:r=>V(b.id)},"æ·»åŠ ç¬¬ä¸€ä¸ªå­èœå•",8,ft)]))],2)])}),128))])])]))}},kt=O(wt,[["__scopeId","data-v-5964fa59"]]),yt={class:"card-manage"},$t={class:"card-header"},_t={class:"card-add"},Ct=["value"],Mt=["value"],Vt={class:"card-card"},xt={class:"card-table"},Bt=["onUpdate:modelValue","onBlur"],Ut=["onUpdate:modelValue","onBlur"],At=["onUpdate:modelValue","onBlur"],St=["onUpdate:modelValue","onBlur"],Dt=["onClick"],Tt={key:0,class:"selected-tags"},It={key:1,class:"tag-placeholder"},Lt=["onUpdate:modelValue","onBlur"],Wt=["onClick"],zt={class:"modal-body"},Ht={key:0,class:"empty-tags"},Pt={key:1,class:"tag-options"},Ft=["checked","onChange"],Ot={__name:"CardManage",setup(W){const l=f([]),h=f([]),w=f(),_=f(""),B=f(""),u=f(""),V=f(""),a=f([]),i=f(!1),n=f(null),s=f([]),o=re(()=>{if(!w.value)return[];const S=l.value.find(x=>x.id===w.value);return(S==null?void 0:S.subMenus)||[]});N(()=>$(null,null,function*(){const S=yield ce();l.value=S.data,l.value.length&&(w.value=l.value[0].id,_.value="");const x=yield ve();a.value=x.data})),ie(w,()=>{_.value="",r()}),ie(_,r);function b(){_.value=""}function M(){r()}function r(){return $(this,null,function*(){if(!w.value)return;const S=yield Se(w.value,_.value||null);h.value=S.data})}function D(){return $(this,null,function*(){!B.value||!u.value||(yield Ue({menu_id:w.value,sub_menu_id:_.value||null,title:B.value,url:u.value,logo_url:V.value}),B.value="",u.value="",V.value="",r())})}function U(S){return $(this,null,function*(){yield ue(S.id,{menu_id:w.value,sub_menu_id:_.value||null,title:S.title,url:S.url,logo_url:S.logo_url,desc:S.desc,order:S.order,tagIds:S.tags?S.tags.map(x=>x.id):[]}),r()})}function k(S){return $(this,null,function*(){yield Ae(S),r()})}function c(S){n.value=S,s.value=S.tags?S.tags.map(x=>x.id):[],i.value=!0}function T(){i.value=!1,n.value=null,s.value=[]}function E(S){const x=s.value.indexOf(S);x>-1?s.value.splice(x,1):s.value.push(S)}function X(){return $(this,null,function*(){n.value&&(yield ue(n.value.id,{menu_id:n.value.menu_id,sub_menu_id:n.value.sub_menu_id,title:n.value.title,url:n.value.url,logo_url:n.value.logo_url,desc:n.value.desc,order:n.value.order,tagIds:s.value}),T(),r())})}return(S,x)=>(d(),v("div",yt,[e("div",$t,[x[8]||(x[8]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",_t,[g(e("select",{"onUpdate:modelValue":x[0]||(x[0]=y=>w.value=y),class:"input narrow",onChange:b},[(d(!0),v(P,null,F(l.value,y=>(d(),v("option",{value:y.id,key:y.id},A(y.name),9,Ct))),128))],544),[[ee,w.value]]),g(e("select",{"onUpdate:modelValue":x[1]||(x[1]=y=>_.value=y),class:"input narrow",onChange:M},[x[6]||(x[6]=e("option",{value:""},"ä¸»èœå•",-1)),(d(!0),v(P,null,F(o.value,y=>(d(),v("option",{value:y.id,key:y.id},A(y.name),9,Mt))),128))],544),[[ee,_.value]]),g(e("input",{"onUpdate:modelValue":x[2]||(x[2]=y=>B.value=y),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[C,B.value]]),g(e("input",{"onUpdate:modelValue":x[3]||(x[3]=y=>u.value=y),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[C,u.value]]),g(e("input",{"onUpdate:modelValue":x[4]||(x[4]=y=>V.value=y),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[C,V.value]]),e("button",{class:"btn",onClick:D},x[7]||(x[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),z(" æ·»åŠ å¡ç‰‡ ")]))])]),e("div",Vt,[e("table",xt,[x[10]||(x[10]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),v(P,null,F(h.value,y=>(d(),v("tr",{key:y.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":I=>y.title=I,onBlur:I=>U(y),class:"table-input"},null,40,Bt),[[C,y.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":I=>y.url=I,onBlur:I=>U(y),class:"table-input"},null,40,Ut),[[C,y.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":I=>y.logo_url=I,onBlur:I=>U(y),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,At),[[C,y.logo_url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":I=>y.desc=I,onBlur:I=>U(y),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,St),[[C,y.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:I=>c(y)},[y.tags&&y.tags.length>0?(d(),v("div",Tt,[(d(!0),v(P,null,F(y.tags,I=>(d(),v("span",{key:I.id,class:"mini-tag",style:te({backgroundColor:I.color})},A(I.name),5))),128))])):(d(),v("span",It,"é€‰æ‹©æ ‡ç­¾"))],8,Dt)]),e("td",null,[g(e("input",{"onUpdate:modelValue":I=>y.order=I,type:"number",onBlur:I=>U(y),class:"table-input order-input"},null,40,Lt),[[C,y.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:I=>k(y.id),title:"åˆ é™¤"},x[9]||(x[9]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,Wt)])]))),128))])])]),i.value?(d(),v("div",{key:0,class:"modal-overlay",onClick:T},[e("div",{class:"modal-content",onClick:x[5]||(x[5]=le(()=>{},["stop"]))},[e("div",{class:"modal-header"},[x[11]||(x[11]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:T},"Ã—")]),e("div",zt,[a.value.length===0?(d(),v("div",Ht,x[12]||(x[12]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)]))):(d(),v("div",Pt,[(d(!0),v(P,null,F(a.value,y=>(d(),v("label",{key:y.id,class:"tag-option"},[e("input",{type:"checkbox",checked:s.value.includes(y.id),onChange:I=>E(y.id)},null,40,Ft),e("span",{class:"tag-label",style:te({backgroundColor:y.color})},A(y.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:T},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:X},"ç¡®å®š")])])])):L("",!0)]))}},Nt=O(Ot,[["__scopeId","data-v-37e77d17"]]),jt={class:"tag-manage"},Et={class:"tag-header"},Rt={class:"tag-add"},qt={class:"tag-content"},Jt={key:0,class:"empty-state"},Kt={key:1,class:"tag-list"},Gt={class:"tag-info"},Qt=["onUpdate:modelValue","onBlur"],Xt={class:"tag-stats"},Yt={class:"card-count"},Zt={class:"tag-controls"},es=["onUpdate:modelValue","onChange"],ts={class:"tag-order"},ss=["onUpdate:modelValue","onBlur"],ls={class:"tag-actions"},ns=["onClick"],os={__name:"TagManage",setup(W){const l=f([]),h=f(""),w=f("#2566d8");N(_);function _(){return $(this,null,function*(){const a=yield ve();l.value=a.data;for(const i of l.value)try{const n=yield De(i.id);i.cardCount=n.data.count}catch(n){i.cardCount=0}})}function B(){return $(this,null,function*(){var o,b;if(!h.value.trim())return;const a=l.value.length?Math.max(...l.value.map(M=>M.order||0)):0,i=h.value.trim(),n=w.value,s={id:Date.now(),name:i,color:n,order:a+1,cardCount:0,_temp:!0};l.value.push(s),h.value="",w.value="#2566d8";try{const M=yield Te({name:i,color:n,order:a+1}),r=l.value.findIndex(D=>D.id===s.id);r>-1&&(l.value[r]=Q(J({},M.data),{cardCount:0}))}catch(M){const r=l.value.findIndex(D=>D.id===s.id);r>-1&&l.value.splice(r,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((b=(o=M.response)==null?void 0:o.data)==null?void 0:b.error)||M.message))}})}function u(a){return $(this,null,function*(){var i,n;if(!a._temp)try{yield Ie(a.id,{name:a.name,color:a.color,order:a.order})}catch(s){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((n=(i=s.response)==null?void 0:i.data)==null?void 0:n.error)||s.message)),_()}})}function V(a){return $(this,null,function*(){var o,b;const i=l.value.find(M=>M.id===a);if(!i)return;const n=i.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${i.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${i.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${i.name}"å—ï¼Ÿ`;if(!confirm(n))return;const s=l.value.findIndex(M=>M.id===a);s>-1&&l.value.splice(s,1);try{yield Le(a)}catch(M){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((b=(o=M.response)==null?void 0:o.data)==null?void 0:b.error)||M.message)),_()}})}return(a,i)=>(d(),v("div",jt,[e("div",Et,[i[3]||(i[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",Rt,[g(e("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>h.value=n),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[C,h.value]]),g(e("input",{"onUpdate:modelValue":i[1]||(i[1]=n=>w.value=n),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[C,w.value]]),e("button",{class:"btn btn-primary",onClick:B},i[2]||(i[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),z(" æ·»åŠ æ ‡ç­¾ ")]))])]),e("div",qt,[l.value.length===0?(d(),v("div",Jt,i[4]||(i[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)]))):(d(),v("div",Kt,[(d(!0),v(P,null,F(l.value,n=>(d(),v("div",{key:n.id,class:"tag-item"},[e("div",{class:"tag-preview",style:te({backgroundColor:n.color})},i[5]||(i[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)]),4),e("div",Gt,[g(e("input",{"onUpdate:modelValue":s=>n.name=s,onBlur:s=>u(n),class:"tag-name-input",maxlength:"20"},null,40,Qt),[[C,n.name]]),e("div",Xt,[e("span",Yt,A(n.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",Zt,[g(e("input",{"onUpdate:modelValue":s=>n.color=s,type:"color",onChange:s=>u(n),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,es),[[C,n.color]]),e("div",ts,[i[6]||(i[6]=e("span",{class:"order-label"},"æ’åº",-1)),g(e("input",{"onUpdate:modelValue":s=>n.order=s,type:"number",onBlur:s=>u(n),class:"order-input"},null,40,ss),[[C,n.order,void 0,{number:!0}]])])]),e("div",ls,[e("button",{class:"btn btn-danger btn-icon",onClick:s=>V(n.id),title:"åˆ é™¤æ ‡ç­¾"},i[7]||(i[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)]),8,ns)])]))),128))]))])]))}},as=O(os,[["__scopeId","data-v-fc56cb55"]]),is={class:"ad-manage"},ds={class:"ad-header"},us={class:"ad-section"},rs={class:"ad-card"},cs={class:"ad-table"},vs=["onUpdate:modelValue","onBlur"],ps=["onUpdate:modelValue","onBlur"],ms=["onClick"],bs={class:"ad-section"},gs={class:"ad-card"},hs={class:"ad-table"},fs=["onUpdate:modelValue","onBlur"],ws=["onUpdate:modelValue","onBlur"],ks=["onClick"],ys={__name:"AdManage",setup(W){const l=f([]),h=f([]),w=f(""),_=f(""),B=f("left");N(u);function u(){return $(this,null,function*(){const n=yield We();l.value=n.data.filter(s=>s.position==="left"),h.value=n.data.filter(s=>s.position==="right")})}function V(){return $(this,null,function*(){!w.value||!_.value||(yield ze({position:B.value,img:w.value,url:_.value}),w.value="",_.value="",B.value="left",u())})}function a(n){return $(this,null,function*(){yield He(n.id,{img:n.img,url:n.url}),u()})}function i(n){return $(this,null,function*(){yield Pe(n),u()})}return(n,s)=>(d(),v("div",is,[e("div",ds,[e("form",{class:"ad-add-row",onSubmit:le(V,["prevent"])},[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>w.value=o),placeholder:"å¹¿å‘Šå›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[C,w.value]]),g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>_.value=o),placeholder:"å¹¿å‘Šè·³è½¬é“¾æ¥",class:"input"},null,512),[[C,_.value]]),g(e("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>B.value=o),class:"input select-input"},s[3]||(s[3]=[e("option",{value:"left"},"å·¦ä¾§å¹¿å‘Š",-1),e("option",{value:"right"},"å³ä¾§å¹¿å‘Š",-1)]),512),[[ee,B.value]]),s[4]||(s[4]=e("button",{class:"btn",type:"submit"},"æ·»åŠ å¹¿å‘Š",-1))],32)]),e("div",us,[s[6]||(s[6]=e("h3",{class:"section-title"},"å·¦ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",rs,[e("table",cs,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),v(P,null,F(l.value,o=>(d(),v("tr",{key:o.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":b=>o.img=b,onBlur:b=>a(o),class:"input"},null,40,vs),[[C,o.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":b=>o.url=b,onBlur:b=>a(o),class:"input"},null,40,ps),[[C,o.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:b=>i(o.id)},"åˆ é™¤å¹¿å‘Š",8,ms)])]))),128))])])])]),e("div",bs,[s[8]||(s[8]=e("h3",{class:"section-title"},"å³ä¾§å¹¿å‘Šåˆ—è¡¨",-1)),e("div",gs,[e("table",hs,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",null,"å›¾ç‰‡"),e("th",null,"è·³è½¬é“¾æ¥"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),v(P,null,F(h.value,o=>(d(),v("tr",{key:o.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":b=>o.img=b,onBlur:b=>a(o),class:"input"},null,40,fs),[[C,o.img]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":b=>o.url=b,onBlur:b=>a(o),class:"input"},null,40,ws),[[C,o.url]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:b=>i(o.id)},"åˆ é™¤å¹¿å‘Š",8,ks)])]))),128))])])])])]))}},$s=O(ys,[["__scopeId","data-v-780b5e23"]]),_s={class:"friend-manage"},Cs={class:"friend-add"},Ms={class:"friend-card"},Vs={class:"friend-table"},xs=["onUpdate:modelValue","onBlur"],Bs=["onUpdate:modelValue","onBlur"],Us=["onUpdate:modelValue","onBlur"],As=["onClick"],Ss={__name:"FriendLinkManage",setup(W){const l=f([]),h=f(""),w=f(""),_=f("");N(B);function B(){return $(this,null,function*(){const i=yield Fe();l.value=i.data})}function u(){return $(this,null,function*(){!h.value||!w.value||(yield Oe({title:h.value,url:w.value,logo:_.value}),h.value="",w.value="",_.value="",B())})}function V(i){return $(this,null,function*(){yield Ne(i.id,{title:i.title,url:i.url,logo:i.logo}),B()})}function a(i){return $(this,null,function*(){yield je(i),B()})}return(i,n)=>(d(),v("div",_s,[n[4]||(n[4]=e("div",{class:"friend-header"},null,-1)),e("div",Cs,[g(e("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>h.value=s),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[C,h.value]]),g(e("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>w.value=s),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[C,w.value]]),g(e("input",{"onUpdate:modelValue":n[2]||(n[2]=s=>_.value=s),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[C,_.value]]),e("button",{class:"btn",onClick:u},"æ·»åŠ å‹é“¾")]),e("div",Ms,[e("table",Vs,[n[3]||(n[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(d(!0),v(P,null,F(l.value,s=>(d(),v("tr",{key:s.id},[e("td",null,[g(e("input",{"onUpdate:modelValue":o=>s.title=o,onBlur:o=>V(s),class:"input"},null,40,xs),[[C,s.title]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>s.url=o,onBlur:o=>V(s),class:"input"},null,40,Bs),[[C,s.url]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>s.logo=o,onBlur:o=>V(s),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,Us),[[C,s.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:o=>a(s.id)},"åˆ é™¤",8,As)])]))),128))])])])]))}},Ds=O(Ss,[["__scopeId","data-v-f280329a"]]),Ts={class:"user-manage"},Is={class:"user-card"},Ls={class:"username-section"},Ws={class:"username-form"},zs={class:"current-username"},Hs={class:"username-display"},Ps={class:"form-group"},Fs={class:"form-actions"},Os=["disabled"],Ns={class:"password-section"},js={class:"password-form"},Es={class:"form-group"},Rs={class:"form-group"},qs={class:"form-group"},Js={class:"form-actions"},Ks=["disabled"],Gs={__name:"UserManage",setup(W){const l=f(""),h=f(""),w=f(""),_=f(!1),B=f(""),u=f("success"),V=f({}),a=f(""),i=f(!1),n=f(""),s=f("success");N(()=>$(null,null,function*(){yield o()}));function o(){return $(this,null,function*(){try{const U=yield Ee();V.value=U.data}catch(U){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",U)}})}function b(){return $(this,null,function*(){var U,k;if(!a.value){M("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(a.value.length<3||a.value.length>20){M("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(a.value===V.value.username){M("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}i.value=!0,n.value="";try{yield Re(a.value),M("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),a.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(c){M(((k=(U=c.response)==null?void 0:U.data)==null?void 0:k.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{i.value=!1}})}function M(U,k){n.value=U,s.value=k,setTimeout(()=>{n.value=""},3e3)}function r(){return $(this,null,function*(){var U,k;if(!l.value||!h.value||!w.value){D("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(h.value!==w.value){D("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(h.value.length<6){D("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}_.value=!0,B.value="";try{yield qe(l.value,h.value),D("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),l.value="",h.value="",w.value=""}catch(c){D(((k=(U=c.response)==null?void 0:U.data)==null?void 0:k.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{_.value=!1}})}function D(U,k){B.value=U,u.value=k,U==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&k==="success"?setTimeout(()=>{B.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{B.value=""},3e3)}return(U,k)=>(d(),v("div",Ts,[k[11]||(k[11]=e("div",{class:"user-header"},null,-1)),e("div",Is,[e("div",Ls,[k[6]||(k[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",Ws,[e("div",zs,[k[4]||(k[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",Hs,A(V.value.username||"admin"),1)]),e("div",Ps,[k[5]||(k[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),g(e("input",{"onUpdate:modelValue":k[0]||(k[0]=c=>a.value=c),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[C,a.value]])]),e("div",Fs,[e("button",{onClick:b,class:"btn",disabled:i.value},A(i.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,Os)]),n.value?(d(),v("p",{key:0,class:H(["message",s.value])},A(n.value),3)):L("",!0)])]),e("div",Ns,[k[10]||(k[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",js,[e("div",Es,[k[7]||(k[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":k[1]||(k[1]=c=>l.value=c),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[C,l.value]])]),e("div",Rs,[k[8]||(k[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":k[2]||(k[2]=c=>h.value=c),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[C,h.value]])]),e("div",qs,[k[9]||(k[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),g(e("input",{"onUpdate:modelValue":k[3]||(k[3]=c=>w.value=c),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[C,w.value]])]),e("div",Js,[e("button",{onClick:r,class:"btn",disabled:_.value},A(_.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,Ks)]),B.value?(d(),v("p",{key:0,class:H(["message",u.value])},A(B.value),3)):L("",!0)])])])]))}},Qs=O(Gs,[["__scopeId","data-v-b8818cd4"]]),Xs={class:"backup-manage"},Ys={class:"tabs"},Zs={class:"tab-content"},el={class:"toolbar"},tl=["disabled"],sl=["disabled"],ll=["disabled"],nl={class:"backup-list"},ol={key:0,class:"empty-state"},al={key:1,class:"backup-grid"},il={class:"backup-info"},dl={class:"backup-name"},ul={class:"backup-meta"},rl={class:"backup-size"},cl={class:"backup-date"},vl={class:"backup-actions"},pl=["onClick"],ml=["onClick"],bl=["onClick"],gl={class:"tab-content"},hl={class:"toolbar"},fl=["disabled"],wl=["disabled"],kl={key:1,class:"info-box"},yl={class:"backup-list"},$l={key:0,class:"empty-state"},_l={key:1,class:"backup-grid"},Cl={class:"backup-info"},Ml={class:"backup-name"},Vl={class:"backup-meta"},xl={class:"backup-size"},Bl={class:"backup-date"},Ul={class:"backup-actions"},Al=["onClick"],Sl=["onClick"],Dl={class:"tab-content"},Tl={class:"config-section"},Il={class:"config-card"},Ll={class:"config-header"},Wl={class:"switch"},zl={key:0,class:"config-fields"},Hl={class:"field-row"},Pl={class:"field-row"},Fl={class:"field-row"},Ol={class:"config-card"},Nl={class:"config-header"},jl={class:"switch"},El={key:0,class:"config-fields"},Rl={class:"field-row"},ql={class:"time-input"},Jl={class:"field-row"},Kl={class:"config-card"},Gl={class:"config-header"},Ql={class:"switch"},Xl={key:0,class:"config-fields"},Yl={class:"field-row checkbox-row"},Zl={class:"checkbox-label"},en={class:"field-row checkbox-row"},tn={class:"checkbox-label"},sn={class:"config-card"},ln={class:"config-header"},nn={class:"switch"},on={key:0,class:"stats-card"},an={class:"stats-grid"},dn={class:"stat-item"},un={class:"stat-value"},rn={class:"stat-item"},cn={class:"stat-value"},vn={class:"stat-item"},pn={class:"stat-value"},mn={class:"stat-item"},bn={class:"stat-value"},gn={class:"config-actions"},hn=["disabled"],fn={key:0,class:"modal-overlay"},wn={class:"modal-content config-modal"},kn={class:"form-group"},yn={class:"form-group"},$n={class:"form-group"},_n={class:"modal-actions"},Cn=["disabled"],Mn={key:1,class:"modal-overlay"},Vn={class:"modal-content"},xn={class:"modal-actions"},Bn={__name:"BackupManage",setup(W){const l=f("local"),h=f([]),w=f([]),_=f(!1),B=f(null),u=K({create:!1,list:!1,delete:!1,restore:!1,upload:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),V=f({text:"",type:""}),a=K({show:!1,filename:"",action:null,title:"",message:"",confirmClass:""}),i=K({configured:!1,url:"",username:""}),n=K({url:"",username:"",password:""}),s=K({debounce:{enabled:!0,delay:30,maxPerDay:3,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!1},autoClean:!0}),o=f(null),b=localStorage.getItem("token");function M(p){return $(this,arguments,function*(m,t={}){return(yield fetch(m,Q(J({},t),{headers:J({Authorization:`Bearer ${b}`,"Content-Type":"application/json"},t.headers)}))).json()})}const r=(m,t="success")=>{V.value={text:m,type:t},setTimeout(()=>{V.value={text:"",type:""}},3e3)},D=()=>$(null,null,function*(){u.create=!0;const m=yield M("/api/backup/create",{method:"POST"});m.success?(r("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),yield U()):r(m.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),u.create=!1}),U=()=>$(null,null,function*(){u.list=!0;const m=yield M("/api/backup/list");m.success?h.value=m.backups:r("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),u.list=!1}),k=m=>{window.open(`/api/backup/download/${m}?token=${b}`,"_blank")},c=(m,t)=>{a.show=!0,a.filename=t,a.action=m,m==="delete"?(a.title="åˆ é™¤",a.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,a.confirmClass="btn-danger"):m==="restore"?(a.title="æ¢å¤",a.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${t} å—ï¼Ÿ`,a.confirmClass="btn-restore"):m==="webdav-restore"?(a.title="ä»WebDAVæ¢å¤",a.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${t} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,a.confirmClass="btn-restore"):m==="webdav-delete"&&(a.title="åˆ é™¤WebDAVå¤‡ä»½",a.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${t} å—ï¼Ÿ`,a.confirmClass="btn-danger")},T=()=>$(null,null,function*(){const{action:m,filename:t}=a;if(a.show=!1,m==="delete"){u.delete=!0;const p=yield M(`/api/backup/delete/${t}`,{method:"DELETE"});p.success?(r("åˆ é™¤æˆåŠŸï¼"),yield U()):r(p.message||"åˆ é™¤å¤±è´¥","error"),u.delete=!1}else if(m==="restore"){u.restore=!0;const p=yield M(`/api/backup/restore/${t}`,{method:"POST"});p.success?(r("æ¢å¤æˆåŠŸï¼"),yield U()):r(p.message||"æ¢å¤å¤±è´¥","error"),u.restore=!1}else m==="webdav-restore"?yield pe(t):m==="webdav-delete"&&(yield me(t))}),E=m=>m?new Date(m).toLocaleString("zh-CN",{hour12:!1}):"--",X=()=>{B.value.click()},S=m=>$(null,null,function*(){const t=m.target.files[0];if(t){if(!t.name.endsWith(".zip")){r("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),m.target.value="";return}if(t.size>500*1024*1024){r("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),m.target.value="";return}u.upload=!0;try{const p=new FormData;p.append("backup",t);const ne=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${b}`},body:p})).json();ne.success?(r("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield U()):r(ne.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(p){console.error("ä¸Šä¼ å¤±è´¥:",p),r("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{u.upload=!1,m.target.value=""}}}),x=()=>$(null,null,function*(){const m=yield M("/api/backup/webdav/config");m.success&&m.config&&(i.configured=m.config.configured,i.url=m.config.url||"",i.username=m.config.username||"")}),y=()=>$(null,null,function*(){if(!n.url||!n.username||!n.password){r("è¯·å¡«å†™å®Œæ•´çš„WebDAVé…ç½®ä¿¡æ¯","error");return}u.webdavConfig=!0;const m=yield M("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(n)});m.success?(r("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"),_.value=!1,n.url="",n.username="",n.password="",yield x()):r(m.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),u.webdavConfig=!1}),I=()=>$(null,null,function*(){u.webdavBackup=!0;const m=yield M("/api/backup/webdav/backup",{method:"POST"});m.success?(r("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield G()):r(m.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),u.webdavBackup=!1}),G=()=>$(null,null,function*(){u.webdavList=!0;const m=yield M("/api/backup/webdav/list");m.success?w.value=m.backups||[]:r("è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),u.webdavList=!1}),pe=m=>$(null,null,function*(){u.webdavRestore=!0;const t=yield M("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:m})});t.success?r("ä»WebDAVæ¢å¤æˆåŠŸï¼"):r(t.message||"ä»WebDAVæ¢å¤å¤±è´¥","error"),u.webdavRestore=!1}),me=m=>$(null,null,function*(){u.webdavDelete=!0;const t=yield M(`/api/backup/webdav/delete/${m}`,{method:"DELETE"});t.success?(r("åˆ é™¤æˆåŠŸï¼"),yield G()):r(t.message||"åˆ é™¤å¤±è´¥","error"),u.webdavDelete=!1}),Y=()=>$(null,null,function*(){const m=yield M("/api/backup/auto/config");m.success&&m.config?(Object.assign(s,m.config),o.value=m.stats||null):r("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),be=()=>$(null,null,function*(){u.autoBackupConfig=!0;const m=yield M("/api/backup/auto/config",{method:"POST",body:JSON.stringify(s)});m.success?(r("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield Y()):r(m.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),u.autoBackupConfig=!1}),ge=()=>{if(!s.scheduled.enabled)return"æœªå¯ç”¨";const m=String(s.scheduled.hour).padStart(2,"0"),t=String(s.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${m}:${t}`};return N(()=>$(null,null,function*(){yield U(),yield x(),i.configured&&(yield G()),yield Y()})),(m,t)=>(d(),v("div",Xs,[e("div",Ys,[e("button",{class:H(["tab",{active:l.value==="local"}]),onClick:t[0]||(t[0]=p=>l.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:H(["tab",{active:l.value==="webdav"}]),onClick:t[1]||(t[1]=p=>l.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:H(["tab",{active:l.value==="auto"}]),onClick:t[2]||(t[2]=p=>l.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),g(e("div",Zs,[e("div",el,[e("button",{class:"btn btn-primary",onClick:D,disabled:u.create},[t[21]||(t[21]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),z(" "+A(u.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,tl),e("button",{class:"btn btn-success",onClick:X,disabled:u.upload},[t[22]||(t[22]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),z(" "+A(u.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,sl),e("button",{class:"btn btn-secondary",onClick:U,disabled:u.list},[t[23]||(t[23]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),z(" "+A(u.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,ll),e("input",{ref_key:"fileInput",ref:B,type:"file",accept:".zip",onChange:S,style:{display:"none"}},null,544)]),V.value.text?(d(),v("div",{key:0,class:H(["message",V.value.type])},A(V.value.text),3)):L("",!0),e("div",nl,[h.value.length===0&&!u.list?(d(),v("div",ol,t[24]||(t[24]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)]))):(d(),v("div",al,[(d(!0),v(P,null,F(h.value,p=>(d(),v("div",{key:p.name,class:"backup-card"},[t[28]||(t[28]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",il,[e("div",dl,A(p.name),1),e("div",ul,[e("span",rl,A(p.size),1),e("span",cl,A(E(p.created)),1)])]),e("div",vl,[e("button",{class:"btn-icon btn-restore",onClick:R=>c("restore",p.name),title:"æ¢å¤å¤‡ä»½"},t[25]||(t[25]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,pl),e("button",{class:"btn-icon",onClick:R=>k(p.name),title:"ä¸‹è½½å¤‡ä»½"},t[26]||(t[26]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)]),8,ml),e("button",{class:"btn-icon btn-danger",onClick:R=>c("delete",p.name),title:"åˆ é™¤å¤‡ä»½"},t[27]||(t[27]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,bl)])]))),128))]))])],512),[[Z,l.value==="local"]]),g(e("div",gl,[e("div",hl,[e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=p=>_.value=!0)},t[29]||(t[29]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),z(" WebDAVé…ç½® ")])),e("button",{class:"btn btn-primary",onClick:I,disabled:u.webdavBackup||!i.configured},[t[30]||(t[30]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),z(" "+A(u.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,fl),e("button",{class:"btn btn-secondary",onClick:G,disabled:u.webdavList||!i.configured},[t[31]||(t[31]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),z(" "+A(u.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,wl)]),V.value.text?(d(),v("div",{key:0,class:H(["message",V.value.type])},A(V.value.text),3)):L("",!0),i.configured?L("",!0):(d(),v("div",kl,t[32]||(t[32]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)]))),e("div",yl,[w.value.length===0&&!u.webdavList?(d(),v("div",$l,t[33]||(t[33]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)]))):(d(),v("div",_l,[(d(!0),v(P,null,F(w.value,p=>(d(),v("div",{key:p.name,class:"backup-card"},[t[36]||(t[36]=se('<div class="backup-icon" data-v-36d811e2><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-36d811e2><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-36d811e2></path><polyline points="14 2 14 8 20 8" data-v-36d811e2></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-36d811e2></path></svg></div>',1)),e("div",Cl,[e("div",Ml,A(p.name),1),e("div",Vl,[e("span",xl,A(p.size),1),e("span",Bl,A(E(p.created)),1)])]),e("div",Ul,[e("button",{class:"btn-icon btn-restore",onClick:R=>c("webdav-restore",p.name),title:"ä»WebDAVæ¢å¤"},t[34]||(t[34]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)]),8,Al),e("button",{class:"btn-icon btn-danger",onClick:R=>c("webdav-delete",p.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},t[35]||(t[35]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Sl)])]))),128))]))])],512),[[Z,l.value==="webdav"]]),g(e("div",Dl,[V.value.text?(d(),v("div",{key:0,class:H(["message",V.value.type])},A(V.value.text),3)):L("",!0),e("div",Tl,[t[71]||(t[71]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),t[72]||(t[72]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",Il,[e("div",Ll,[t[38]||(t[38]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",Wl,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=p=>s.debounce.enabled=p)},null,512),[[q,s.debounce.enabled]]),t[37]||(t[37]=e("span",{class:"slider"},null,-1))])]),t[45]||(t[45]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),s.debounce.enabled?(d(),v("div",zl,[e("div",Hl,[t[39]||(t[39]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=p=>s.debounce.delay=p),min:"5",max:"1440",class:"form-input"},null,512),[[C,s.debounce.delay,void 0,{number:!0}]]),t[40]||(t[40]=e("small",null,"èŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",Pl,[t[41]||(t[41]=e("label",null,"æ¯å¤©æœ€å¤šå¤‡ä»½æ¬¡æ•°",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=p=>s.debounce.maxPerDay=p),min:"1",max:"10",class:"form-input"},null,512),[[C,s.debounce.maxPerDay,void 0,{number:!0}]]),t[42]||(t[42]=e("small",null,"èŒƒå›´ï¼š1-10æ¬¡",-1))]),e("div",Fl,[t[43]||(t[43]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=p=>s.debounce.keep=p),min:"1",max:"30",class:"form-input"},null,512),[[C,s.debounce.keep,void 0,{number:!0}]]),t[44]||(t[44]=e("small",null,"èŒƒå›´ï¼š1-30ä¸ª",-1))])])):L("",!0)]),e("div",Ol,[e("div",Nl,[t[47]||(t[47]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",jl,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=p=>s.scheduled.enabled=p)},null,512),[[q,s.scheduled.enabled]]),t[46]||(t[46]=e("span",{class:"slider"},null,-1))])]),t[53]||(t[53]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),s.scheduled.enabled?(d(),v("div",El,[e("div",Rl,[t[49]||(t[49]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",ql,[g(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=p=>s.scheduled.hour=p),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[C,s.scheduled.hour,void 0,{number:!0}]]),t[48]||(t[48]=e("span",null,":",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=p=>s.scheduled.minute=p),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[C,s.scheduled.minute,void 0,{number:!0}]])]),t[50]||(t[50]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",Jl,[t[51]||(t[51]=e("label",null,"ä¿ç•™å¤©æ•°",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=p=>s.scheduled.keep=p),min:"1",max:"30",class:"form-input"},null,512),[[C,s.scheduled.keep,void 0,{number:!0}]]),t[52]||(t[52]=e("small",null,"èŒƒå›´ï¼š1-30å¤©",-1))])])):L("",!0)]),e("div",Kl,[e("div",Gl,[t[55]||(t[55]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",Ql,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=p=>s.webdav.enabled=p)},null,512),[[q,s.webdav.enabled]]),t[54]||(t[54]=e("span",{class:"slider"},null,-1))])]),t[60]||(t[60]=e("p",{class:"config-info"},"è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚éœ€è¦å…ˆé…ç½® WebDAV è¿æ¥ã€‚",-1)),s.webdav.enabled?(d(),v("div",Xl,[e("div",Yl,[e("label",Zl,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=p=>s.webdav.syncDaily=p)},null,512),[[q,s.webdav.syncDaily]]),t[56]||(t[56]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),t[57]||(t[57]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",en,[e("label",tn,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=p=>s.webdav.syncIncremental=p)},null,512),[[q,s.webdav.syncIncremental]]),t[58]||(t[58]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),t[59]||(t[59]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ ï¼ˆå¯èƒ½é¢‘ç¹ï¼Œä¸æ¨èï¼‰",-1))])])):L("",!0)]),e("div",sn,[e("div",ln,[t[62]||(t[62]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",nn,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=p=>s.autoClean=p)},null,512),[[q,s.autoClean]]),t[61]||(t[61]=e("span",{class:"slider"},null,-1))])]),t[63]||(t[63]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡/å¤©æ•°çš„æ—§å¤‡ä»½æ–‡ä»¶ã€‚",-1))]),o.value?(d(),v("div",on,[t[68]||(t[68]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",an,[e("div",dn,[t[64]||(t[64]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½ï¼ˆä»Šæ—¥ï¼‰",-1)),e("span",un,A(o.value.debounceToday||0)+" æ¬¡",1)]),e("div",rn,[t[65]||(t[65]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",cn,A(E(o.value.lastDebounce)||"æ— "),1)]),e("div",vn,[t[66]||(t[66]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",pn,A(E(o.value.lastScheduled)||"æ— "),1)]),e("div",mn,[t[67]||(t[67]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",bn,A(ge()),1)])])])):L("",!0),e("div",gn,[e("button",{class:"btn btn-secondary",onClick:Y},t[69]||(t[69]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),z(" é‡ç½® ")])),e("button",{class:"btn btn-primary",onClick:be,disabled:u.autoBackupConfig},[t[70]||(t[70]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),z(" "+A(u.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,hn)])])],512),[[Z,l.value==="auto"]]),_.value?(d(),v("div",fn,[e("div",wn,[t[78]||(t[78]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",kn,[t[73]||(t[73]=e("label",null,[z("WebDAV URL "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=p=>n.url=p),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[C,n.url]]),t[74]||(t[74]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",yn,[t[75]||(t[75]=e("label",null,[z("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=p=>n.username=p),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[C,n.username]])]),e("div",$n,[t[76]||(t[76]=e("label",null,[z("å¯†ç  "),e("span",{class:"required"},"*")],-1)),g(e("input",{type:"password","onUpdate:modelValue":t[18]||(t[18]=p=>n.password=p),placeholder:"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,512),[[C,n.password]]),t[77]||(t[77]=e("small",null,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç ",-1))]),e("div",_n,[e("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=p=>_.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:y,disabled:u.webdavConfig},A(u.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,Cn)])])])):L("",!0),a.show?(d(),v("div",Mn,[e("div",Vn,[e("h3",null,"ç¡®è®¤"+A(a.title),1),e("p",null,A(a.message),1),e("div",xn,[e("button",{class:"btn btn-secondary",onClick:t[20]||(t[20]=p=>a.show=!1)},"å–æ¶ˆ"),e("button",{class:H(["btn",a.confirmClass]),onClick:T},"ç¡®è®¤",2)])])])):L("",!0)]))}},Un=O(Bn,[["__scopeId","data-v-36d811e2"]]),An={key:0,class:"login-container"},Sn={class:"login-card"},Dn={class:"login-form"},Tn={class:"password-input-wrapper"},In=["type"],Ln={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Wn={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},zn={class:"login-buttons"},Hn=["disabled"],Pn={key:0,class:"login-error"},Fn={key:1,class:"admin-layout"},On={class:"menu-list"},Nn={class:"admin-main"},jn={class:"admin-header"},En={class:"header-title"},Rn={class:"admin-content"},qn={key:0,class:"welcome-page"},Jn={class:"welcome-cards"},Kn={class:"welcome-card"},Gn={class:"welcome-value"},Qn={class:"welcome-card"},Xn={class:"welcome-value"},Yn={__name:"Admin",setup(W){const l=f("welcome"),h=f(""),w=f(""),_=f(!1),B=f(""),u=f(""),V=f(!1),a=f(""),i=f(!1),n=f(!1),s=re(()=>{switch(l.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"ad":return"å¹¿å‘Šç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";default:return""}});N(()=>{const k=localStorage.getItem("token");_.value=!!k,_.value&&o()});function o(){return $(this,null,function*(){try{const k=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(k.ok){const c=yield k.json();h.value=c.last_login_time||"",w.value=c.last_login_ip||""}}catch(k){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",k)}})}function b(){return $(this,null,function*(){var k,c;if(!B.value||!u.value){a.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}V.value=!0,a.value="";try{const T=yield Je(B.value,u.value);T.data.token&&(localStorage.setItem("token",T.data.token),_.value=!0,h.value=T.data.lastLoginTime||"",w.value=T.data.lastLoginIp||"")}catch(T){a.value=((c=(k=T.response)==null?void 0:k.data)==null?void 0:c.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{V.value=!1}})}function M(){localStorage.removeItem("token"),_.value=!1,B.value="",u.value="",a.value=""}function r(){window.open("/","_blank")}function D(){n.value=!n.value}function U(){n.value=!1}return(k,c)=>_.value?(d(),v("div",Fn,[e("aside",{class:H(["admin-sider",{open:n.value}]),onClick:le(U,["self"])},[e("div",{class:"logo clickable",onClick:c[3]||(c[3]=T=>{l.value="welcome",U()})},"Admin"),e("ul",On,[e("li",{class:H({active:l.value==="menu"}),onClick:c[4]||(c[4]=T=>{l.value="menu",U()})},"æ ç›®ç®¡ç†",2),e("li",{class:H({active:l.value==="card"}),onClick:c[5]||(c[5]=T=>{l.value="card",U()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:H({active:l.value==="tag"}),onClick:c[6]||(c[6]=T=>{l.value="tag",U()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:H({active:l.value==="ad"}),onClick:c[7]||(c[7]=T=>{l.value="ad",U()})},"å¹¿å‘Šç®¡ç†",2),e("li",{class:H({active:l.value==="friend"}),onClick:c[8]||(c[8]=T=>{l.value="friend",U()})},"å‹é“¾ç®¡ç†",2),e("li",{class:H({active:l.value==="user"}),onClick:c[9]||(c[9]=T=>{l.value="user",U()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:H({active:l.value==="backup"}),onClick:c[10]||(c[10]=T=>{l.value="backup",U()})},"å¤‡ä»½ç®¡ç†",2)])],2),e("main",Nn,[e("div",jn,[e("button",{class:"menu-toggle",onClick:D}," â˜° "),e("div",En,A(s.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:r,title:"è¿›å…¥ä¸»é¡µ"},c[15]||(c[15]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),e("button",{class:"btn logout-btn",onClick:M},"é€€å‡ºç™»å½•")])]),e("div",Rn,[l.value==="welcome"?(d(),v("div",qn,[c[18]||(c[18]=e("h2",{class:"welcome-title"},"æ¬¢è¿æ‚¨è¿›å…¥ Con-Nav-Item åå°ç®¡ç†ç³»ç»Ÿ",-1)),e("div",Jn,[e("div",Kn,[c[16]||(c[16]=se('<div class="welcome-icon time-icon" data-v-8c434e49><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-8c434e49><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-8c434e49></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-8c434e49></path></svg></div><div class="welcome-label" data-v-8c434e49>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",Gn,A(h.value||"--"),1)]),e("div",Qn,[c[17]||(c[17]=se('<div class="welcome-icon ip-icon" data-v-8c434e49><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-8c434e49><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-8c434e49></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-8c434e49></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-8c434e49></circle></svg></div><div class="welcome-label" data-v-8c434e49>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",Xn,A(w.value||"--"),1)])])])):L("",!0),l.value==="menu"?(d(),j(kt,{key:1})):L("",!0),l.value==="card"?(d(),j(Nt,{key:2})):L("",!0),l.value==="tag"?(d(),j(as,{key:3})):L("",!0),l.value==="ad"?(d(),j($s,{key:4})):L("",!0),l.value==="friend"?(d(),j(Ds,{key:5})):L("",!0),l.value==="user"?(d(),j(Qs,{key:6})):L("",!0),l.value==="backup"?(d(),j(Un,{key:7})):L("",!0)]),c[19]||(c[19]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[z("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(d(),v("div",An,[e("div",Sn,[c[14]||(c[14]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",Dn,[g(e("input",{"onUpdate:modelValue":c[0]||(c[0]=T=>B.value=T),type:"text",placeholder:"ç”¨æˆ·å",class:"login-input",onKeyup:de(b,["enter"])},null,544),[[C,B.value]]),e("div",Tn,[g(e("input",{"onUpdate:modelValue":c[1]||(c[1]=T=>u.value=T),type:i.value?"text":"password",placeholder:"å¯†ç ",class:"login-input password-input",onKeyup:de(b,["enter"])},null,40,In),[[$e,u.value]]),e("span",{class:"toggle-password",onClick:c[2]||(c[2]=T=>i.value=!i.value)},[i.value?(d(),v("svg",Ln,c[11]||(c[11]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]))):(d(),v("svg",Wn,c[12]||(c[12]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])))])]),e("div",zn,[e("button",{onClick:r,class:"back-btn"},c[13]||(c[13]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),z(" è¿”å›é¦–é¡µ ")])),e("button",{onClick:b,class:"login-btn",disabled:V.value},A(V.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,Hn)]),a.value?(d(),v("p",Pn,A(a.value),1)):L("",!0)])])]))}},so=O(Yn,[["__scopeId","data-v-8c434e49"]]);export{so as default};
